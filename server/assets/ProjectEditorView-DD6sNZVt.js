import{bg as w,F as m,z as s,B as Ke,be as Hl,bf as Jl,r as c,f as S,w as Mt,ac as Gl,G as a,D as o,a9 as J,bi as u,aB as d,bD as ie,bj as V,bh as xe,C as v,bG as Re,bH as Be,K as qt,A as Lt,ck as Kl}from"./vendor-Cu69IzCA.js";import{k as _,_ as Et,V as Ie,t as re,v as Ql,w as Yl,x as Xl,h as R,i as k,y as Zl,b as G,c as M,o as j,d as K,e as He,f as y,z as te,r as E,A as Fe,B as it,C as de,D as ea,n as me,q as Q,E as rt,j as B,a as P,p as ut,F as Je,G as $e,H as Tt,I as Ge,g as ue,J as pe,m as ta,K as la}from"./index-DCJJdkM3.js";class aa{async getAll(L){const{data:p}=await _.get(`/api/projects/${L}/labor-works`);return Array.isArray(p)?p:p.data||[]}async create(L,p){const{data:i}=await _.post(`/api/projects/${L}/labor-works`,p);return i.data||i}async getOne(L,p){const{data:i}=await _.get(`/api/projects/${L}/labor-works/${p}`);return i.data||i}async update(L,p,i){const{data:Y}=await _.put(`/api/projects/${L}/labor-works/${p}`,i);return Y.data||Y}async delete(L,p){await _.delete(`/api/projects/${L}/labor-works/${p}`)}async reorder(L,p){const{data:i}=await _.patch(`/api/projects/${L}/labor-works/reorder`,{order:p});return i}}const Ue=new aa,oa={__name:"IosToggle",props:{modelValue:{type:[Boolean,Number],default:!1}},emits:["update:modelValue"],setup(De){return(L,p)=>(m(),w("div",{class:Ke(["ios-toggle",{"is-checked":!!De.modelValue}]),onClick:p[0]||(p[0]=i=>L.$emit("update:modelValue",!De.modelValue))},[...p[1]||(p[1]=[s("div",{class:"ios-toggle-thumb"},null,-1)])],2))}},St=Et(oa,[["__scopeId","data-v-8770b79c"]]),sa={class:"d-flex align-center justify-space-between"},na={class:"mb-6"},ia={class:"mb-6"},ra={class:"d-flex align-center gap-2 mb-3"},ua={class:"mb-6"},da={class:"mb-6"},ma={class:"mb-6"},pa={class:"mb-6"},ca={key:0,class:"mb-4"},_a={class:"d-flex align-center justify-space-between mb-2"},va={class:"d-flex align-center gap-2"},fa={class:"text-caption font-weight-bold"},ga={class:"d-flex gap-1"},ya={key:0,class:"text-caption text-grey mt-1"},ba={key:1,class:"mb-4"},wa={key:2,class:"text-caption text-warning"},xa={style:{"overflow-x":"auto","margin-top":"12px"}},ha={class:"d-flex gap-2 align-center"},ka={class:"d-flex align-center",style:{"min-width":"24px",height:"24px"}},Va={style:{"font-weight":"400"}},Ca={class:"d-flex align-center justify-space-between"},Fa={key:1},$a={key:0},Ua={key:1},Da={key:0},ja={key:0},Na={key:0},Aa={key:1},Ma=["colspan"],qa={class:"text-body-2"},La={class:"mt-2"},Ta={class:"mt-2"},Sa={class:"mt-2"},Ea={class:"mb-3 pb-3 border-b"},Pa={class:"mt-2"},za={class:"text-caption text-grey"},Oa={class:"text-body-2"},Wa={key:0,class:"mt-2"},Ra={class:"d-flex align-center gap-2"},Ba=["colspan"],Ia={class:"text-body-2"},Ha={class:"mt-2"},Ja={style:{"font-weight":"400"}},Ga={style:{display:"flex","align-items":"center",gap:"6px"}},Ka={style:{"text-align":"right",width:"120px"}},Qa=["colspan"],Ya={class:"text-subtitle-2 mb-3"},Xa={class:"text-caption text-grey"},Za={style:{"text-align":"right"}},eo={style:{"text-align":"right"}},to={class:"text-body-2"},lo={class:"mt-2"},ao={class:"text-caption",style:{color:"#999","margin-top":"8px"}},oo={class:"text-caption mb-3",style:{color:"#666"}},so={style:{"text-align":"right"}},no={style:{"text-align":"right"}},io={style:{"text-align":"right"}},ro={style:{"text-align":"right"}},uo={style:{"text-align":"right"}},mo={style:{"text-align":"right"}},po={style:{"font-weight":"400"}},co={style:{"text-align":"right",width:"120px"}},_o={style:{"font-weight":"400"}},vo={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},fo={key:0,class:"text-subtitle-2"},go={key:0,class:"text-caption text-grey mb-3"},yo={key:0,class:"text-caption text-grey mb-3"},bo={key:0},wo={class:"text-caption mt-1"},xo={key:1},ho={key:0,class:"mb-4"},ko={key:0,class:"text-caption"},Vo={key:1,class:"text-caption"},Co={class:"d-flex align-center gap-2"},Fo={class:"text-subtitle-2"},$o={key:1,class:"text-center py-6 text-grey"},Uo={class:"d-flex justify-space-between align-center mb-4"},Do=Hl({__name:"ProjectEditorView",setup(De){const p=Jl().params.id,i=c({id:0,number:"",expert_name:"",address:"",region_id:null,waste_coefficient:1,repair_coefficient:1,text_blocks:[],normohour_rate:null,normohour_region:null,normohour_date:null,normohour_method:null,normohour_justification:null}),Y=l=>{let e=l.replace(/<[^>]*>/g,"");return e=e.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),e=e.split(`
`).map(t=>t.replace(/[ \t]+/g," ").trim()).filter(t=>t.length>0).join(`
`),e},Qe=l=>l.replace(/\r\n/g,`
`).replace(/\n{3,}/g,`

`).replace(/\u00A0/g," ").split(`
`).map(e=>e.replace(/[ \t]+/g," ").trim()).filter(e=>e.length>0).join(`
`).trim(),dt=l=>{try{let e=l;e=e.replace(/<\/?(p|div|br\s*\/?|li|ul|ol|h[1-6])>/gi,`
`),e=e.replace(/<a[^>]*>(.*?)<\/a>/gi,"$1"),e=e.replace(/<[^>]*>/g,"");const t=document.createElement("textarea");return t.innerHTML=e,e=t.value,e=e.replace(/\r\n/g,`
`).replace(/\n{3,}/g,`

`).replace(/[ \t]+/g," ").trim(),e}catch(e){return console.error("Error cleaning HTML:",e),l.replace(/<[^>]*>/g,"").trim()}},Pt=(l,e)=>{try{e.preventDefault();const t=e.clipboardData;if(!t){console.warn("Clipboard data not available");return}let n="";const r=t.getData("text/html");if(r&&r.trim().length>0?(n=dt(r),console.log("üìã Pasted from HTML")):(n=t.getData("text/plain")||t.getData("text")||"",console.log("üìã Pasted from plain text")),!n.trim()){console.warn("No text to paste");return}const f=Qe(n);l.text=(l.text?l.text+`

`:"")+f,l.text=Y(l.text),console.log("‚úÖ Paste successful. Text length:",l.text.length)}catch(t){console.error("‚ùå Error during paste:",t);try{const n=e.clipboardData?.getData("text/plain")||"";if(n.trim()){const r=Qe(n);l.text=(l.text?l.text+`

`:"")+r,l.text=Y(l.text),console.log("‚úÖ Paste (fallback) successful. Text length:",l.text.length)}}catch(n){console.error("Fallback paste also failed:",n)}}},q=c([]),mt=c([]),le=c([]),je=c(!1),Ne=c(!1),ce=c({show:!1,message:"",color:"info",timeout:3e3}),h=(l,e="info",t=3e3)=>{ce.value={show:!0,message:l,color:e,timeout:t}},F=c({positions:!1,materials:!1,fittings:!1,expenses:!1,normohourSources:!1,laborWorks:!1,operations:!1}),zt=()=>{console.log("üîí Closing settings drawer"),Ne.value=!1},Ot=()=>{console.log("üîì Opening settings drawer. Text blocks:",i.value.text_blocks),Ne.value=!0},X=c([]),z=c([]),he=c([]),pt=c([]),Wt=S(()=>z.value.filter(l=>l.type==="plate")),Rt=S(()=>z.value.filter(l=>l.type==="edge")),Bt=[{title:"–¢–∏–ø –¥–µ—Ç–∞–ª–∏",key:"detail_type"},{title:"–ú–∞—Ç–µ—Ä–∏–∞–ª",key:"material"},{title:"–ö—Ä–æ–º–∫–∞",key:"edge_material"},{title:"–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ—Ä—Ü–æ–≤",key:"edge_scheme"},{title:"–®–∏—Ä–∏–Ω–∞, –º–º",key:"width"},{title:"–î–ª–∏–Ω–∞, –º–º",key:"length"},{title:"–ü–ª–æ—â–∞–¥—å –æ–¥–Ω–æ–π (–º¬≤)",key:"area_single"},{title:"–ö–æ–ª-–≤–æ",key:"quantity"},{title:"–û–±—â–∞—è –ø–ª–æ—â–∞–¥—å (–º¬≤)",key:"area_total"},{title:"–î–µ–π—Å—Ç–≤–∏—è",key:"actions",sortable:!1}],It=[{title:"–ù–∞–∑–≤–∞–Ω–∏–µ",key:"name"},{title:"–ö–æ–ª-–≤–æ",key:"quantity"},{title:"–¶–µ–Ω–∞",key:"unit_price"},{title:"–î–µ–π—Å—Ç–≤–∏—è",key:"actions",sortable:!1}],ct=[{title:"",key:"data-table-expand"},{title:"–ú–∞—Ç–µ—Ä–∏–∞–ª",key:"name"},{title:"–ü–ª–æ—â–∞–¥—å –¥–µ—Ç–∞–ª–µ–π (–º¬≤)",key:"area_details"},{title:"–ö–æ—ç—Ñ—Ñ.",key:"waste_coeff"},{title:"–ü–ª–æ—â–∞–¥—å —Å –æ—Ç—Ö–æ–¥–∞–º–∏ (–º¬≤)",key:"area_with_waste"},{title:"–†–∞–∑–º–µ—Ä –ª–∏—Å—Ç–∞ (–º¬≤)",key:"sheet_area"},{title:"–õ–∏—Å—Ç–æ–≤",key:"sheets_count"},{title:"–¶–µ–Ω–∞ –∑–∞ –ª–∏—Å—Ç",key:"price_per_sheet"},{title:"–¶–µ–Ω–∞ –∑–∞ –º¬≤ (—Ä–∞—Å—á.)",key:"price_per_m2",render:l=>"–¶–µ–Ω–∞ –∑–∞ –º¬≤ (—Ä–∞—Å—á—ë—Ç–Ω–∞—è)"},{title:"–°—É–º–º–∞",key:"total_price"}],Ht=S(()=>i.value?.use_area_calc_mode===!0?ct.filter(e=>e.key!=="sheet_area"&&e.key!=="price_per_sheet").map(e=>e.key==="sheets_count"?{...e,title:"–ü–ª–æ—â–∞–¥—å –∫ –æ–ø–ª–∞—Ç–µ (–º¬≤)"}:e):ct.filter(e=>e.key!=="price_per_m2")),Jt=()=>{if(!(i.value?.apply_waste_to_plate!==!1))return console.log("getWasteCoefficientForPlate: DISABLED ‚Üí returning 1.0"),1;const e=i.value?.waste_plate_coefficient,t=i.value?.waste_coefficient||1,n=e?Number(e):t;return console.log(`getWasteCoefficientForPlate: ENABLED ‚Üí ${n} (${e?"plate-specific":"general"})`),n},_t=()=>{if(!(i.value?.apply_waste_to_edge!==!1))return console.log("getWasteCoefficientForEdge: DISABLED ‚Üí returning 1.0"),1;const e=i.value?.waste_edge_coefficient,t=i.value?.waste_coefficient||1,n=e?Number(e):t;return console.log(`getWasteCoefficientForEdge: ENABLED ‚Üí ${n} (${e?"edge-specific":"general"})`),n},Gt=[{title:"",key:"data-table-expand"},{title:"–ú–∞—Ç–µ—Ä–∏–∞–ª –∫—Ä–æ–º–∫–∏",key:"name"},{title:"–î–ª–∏–Ω–∞ (–º.–ø.)",key:"length_linear"},{title:"–ö–æ—ç—Ñ—Ñ.",key:"waste_coeff"},{title:"–î–ª–∏–Ω–∞ —Å –æ—Ç—Ö–æ–¥–∞–º–∏ (–º.–ø.)",key:"length_with_waste"},{title:"–¶–µ–Ω–∞ –∑–∞ –º.–ø.",key:"price_per_unit"},{title:"–°—É–º–º–∞",key:"total_price"}],Kt=[{title:"–ù–∞–∑–≤–∞–Ω–∏–µ",key:"name"},{title:"–û–ø–∏—Å–∞–Ω–∏–µ",key:"description"},{title:"–°—É–º–º–∞",key:"amount"},{title:"–î–µ–π—Å—Ç–≤–∏—è",key:"actions",sortable:!1}],vt=[{value:"none",label:"–ë–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏",icon:"mdi-minus"},{value:"O",label:"–í–∫—Ä—É–≥ (O)",icon:"mdi-circle-outline"},{value:"=",label:"–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–ª–∏–Ω–µ (=)",icon:"mdi-arrow-left-right"},{value:"||",label:"–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —à–∏—Ä–∏–Ω–µ (||)",icon:"mdi-arrow-up-down"},{value:"L",label:"–ì-–æ–±—Ä–∞–∑–Ω–æ (L)",icon:"mdi-vector-square"},{value:"–ü",label:"–ü-–æ–±—Ä–∞–∑–Ω–æ (–ü)",icon:"mdi-alpha-p-box-outline"}],_e=c(!1),ve=c(!1),fe=c(!1),Ae=c(!1),Ye=c(!1),Xe=c(!1),Me=c(!1),qe=c(!1),Le=c(!1),Ze=c(!1),ae=c(null),A=c({title:"",text:""}),Te=c([]),x=c({source:"",position_profile:null,salary_range:null,period:null,link:null,note:null}),I=c({}),ft=c(),b=c({id:null,project_id:p,detail_type_id:null,material_id:null,edge_material_id:null,edge_scheme:"none",width:0,length:0,quantity:1,custom_name:null}),$=c({id:0,project_id:p,name:"",article:"",unit:"—à—Ç",quantity:1,unit_price:0,note:""}),O=c({id:0,project_id:p,type:"",cost:0}),gt=l=>{if(!l)return"‚Äî";const e=z.value.find(t=>t.id===l);return e?e.name:`–ú–∞—Ç–µ—Ä–∏–∞–ª #${l}`},yt=l=>{if(!l)return"‚Äî";const e=X.value.find(t=>t.id===l);return e?e.name:`–¢–∏–ø #${l}`},et=l=>l?vt.find(e=>e.value===l)?.label||l:"‚Äî",Qt=l=>{if(l.edge_scheme)return et(l.edge_scheme);if(l.detail_type_id){const e=X.value.find(t=>t.id===l.detail_type_id);if(e&&e.edge_processing)return et(e.edge_processing)}return"‚Äî"},bt=l=>{const e=[];return q.value.forEach(t=>{if(!t.edge_material_id||t.edge_material_id!==l||!t.edge_scheme||t.edge_scheme==="none")return;const n=(t.width||0)/1e3,r=(t.length||0)/1e3;let f=0;switch(t.edge_scheme){case"O":f=2*(n+r);break;case"=":f=2*r;break;case"||":f=2*n;break;case"L":f=n+r;break;case"–ü":f=2*n+r;break}const g=f*(t.quantity||0);e.push({position_id:t.id,position_name:t.custom_name||yt(t.detail_type_id)||`–ü–æ–∑–∏—Ü–∏—è ${t.id}`,width:t.width,length:t.length,edge_scheme_label:et(t.edge_scheme),perimeter_one:f,quantity:t.quantity,total_length:g})}),e},Yt=l=>{if(!l){b.value.edge_scheme="none";return}const e=X.value.find(t=>t.id===l);e&&e.edge_processing&&(b.value.edge_scheme=e.edge_processing),ke()},D=l=>{if(l._cached_details)return l._cached_details;const e=l.name||"";return e.toLowerCase().includes("–∫—Ä–æ–º–∫")?Xt(l):e.toLowerCase().includes("–ø–∏–ª")||e.toLowerCase().includes("—Ä–∞—Å–ø–∏–ª")?Zt(l):e.toLowerCase().includes("—Å–≤–µ—Ä–ª")||e.toLowerCase().includes("–æ—Ç–≤–µ—Ä—Å—Ç")?wt(l):{type:"manual",is_manual:!0,message:"–í–≤–µ–¥–µ–Ω–æ –≤—Ä—É—á–Ω—É—é —ç–∫—Å–ø–µ—Ä—Ç–æ–º"}},Xt=l=>{if(l.type==="manual")return{type:"edging",is_manual:!0,message:"–í–≤–µ–¥–µ–Ω–æ –≤—Ä—É—á–Ω—É—é —ç–∫—Å–ø–µ—Ä—Ç–æ–º"};const e=[];let t=0;se.value.forEach(f=>{bt(f.id).forEach(C=>{e.push({position_name:C.position_name,material_name:f.name,length:C.total_length}),t+=C.total_length})});const n=_t(),r=t*n;return{type:"edging",details:e,total_length:t,waste_coeff:n,total_with_waste:r,unit:"–º.–ø."}},Zt=l=>{if(l.type==="manual")return{type:"sawing",is_manual:!0,message:"–í–≤–µ–¥–µ–Ω–æ –≤—Ä—É—á–Ω—É—é —ç–∫—Å–ø–µ—Ä—Ç–æ–º"};const e=[];let t=0;return oe.value.forEach(n=>{const r=n.area_details;r>0&&(e.push({material_name:n.name,area:r}),t+=r)}),{type:"sawing",details:e,total_area:t,unit:"–º¬≤",note:"–û–±—ä—ë–º —Ä–∞—Å–ø–∏–ª–æ–≤–∫–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –ø–ª–æ—â–∞–¥–∏ –¥–µ—Ç–∞–ª–µ–π –ø–ª–∏—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"}},wt=l=>{if(console.log("getDrillingOperationDetails called:",{name:l.name,type:l.type,quantity_from_api:l.quantity,source:l.source,operation_id:l.operation_id,positions:q.value.length,detail_types:X.value.length}),l.type==="manual")return console.log("  -> operation is manual, returning manual message"),{type:"drilling",is_manual:!0,message:"–í–≤–µ–¥–µ–Ω–æ –≤—Ä—É—á–Ω—É—é —ç–∫—Å–ø–µ—Ä—Ç–æ–º"};const e=new Map;q.value.forEach(r=>{const f=z.value.find(g=>g.id===r.material_id);if(console.log("  checking position:",{material_id:r.material_id,material_type:f?.type,detail_type_id:r.detail_type_id,quantity:r.quantity}),f?.type==="plate"&&r.detail_type_id){const g=X.value.find(C=>C.id===r.detail_type_id);if(g){console.log("    -> found detailType:",g.name),e.has(r.detail_type_id)||e.set(r.detail_type_id,{detail_type_name:g.name,total_quantity:0,holes_per_piece:8});const C=e.get(r.detail_type_id);C.total_quantity+=r.quantity||1}}});const t=Array.from(e.values()).map(r=>({detail_type_name:r.detail_type_name,holes_per_piece:r.holes_per_piece,quantity:r.total_quantity,total_holes:r.holes_per_piece*r.total_quantity}));console.log("  drilling details:",t);let n=0;return t.forEach(r=>{n+=r.total_holes}),console.log("  SUMMARY:",{calculated_total:n,api_quantity:l.quantity,difference:l.quantity-n,details_count:t.length}),{type:"drilling",is_manual:!1,details:t,total_holes:n,unit:"—à—Ç.",message:"–†–∞—Å—á—ë—Ç –ø–æ –ø–æ–∑–∏—Ü–∏—è–º —Å –ø–ª–∏—Ç–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏"}};let tt=null;const ke=()=>{tt&&clearTimeout(tt),tt=setTimeout(()=>xt(),350)},xt=async()=>{try{F.value.operations=!0;const e=(await _.get(`/api/projects/${p}/operations`)).data||[];Array.isArray(e)?Se.value=e:(console.warn("Operations data is not an array:",e),Se.value=[])}catch(l){console.warn("Recalc operations failed",l),Se.value=[]}finally{F.value.operations=!1}},el=l=>{b.value.material_id=l,ke()},tl=l=>{b.value.edge_scheme=l||"none",ke()},ll=l=>{b.value.edge_material_id=l,ke()},ht=async()=>{try{F.value.materials=!0;const[l,e,t,n,r,f]=await Promise.all([_.get("/api/detail-types").then(g=>g.data),_.get("/api/materials").then(g=>g.data),_.get("/api/operations").then(g=>g.data),_.get("/api/units").then(g=>g.data),_.get("/api/regions").then(g=>g.data?.data||[]),_.get("/api/position-profiles").then(g=>g.data?.data||[])]);X.value=l,z.value=e,console.log("Materials loaded:",e.length,"samples:",e.slice(0,2)),Ft.value=t,he.value=n||[],pt.value=r,$t.value=f,console.log("Position profiles loaded:",f.length,"profiles:",f.map(g=>({id:g.id,name:g.name}))),console.log("Regions loaded:",r.length,"samples:",r.slice(0,3))}finally{F.value.materials=!1}},T=async()=>{try{F.value.positions=!0,F.value.fittings=!0,F.value.expenses=!0,i.value=(await _.get(`/api/projects/${p}`)).data;const l=i.value.profileRates;if(console.log("‚úÖ Project loaded:",{id:i.value.id,name:i.value.number,hasProfileRates:!!l,profileRatesCount:Array.isArray(l)?l.length:0,profileRatesType:typeof l}),l&&l.length>0&&console.log("üìä First profileRate structure:",JSON.stringify(l[0],null,2)),i.value.use_area_calc_mode=i.value.use_area_calc_mode===!0||i.value.use_area_calc_mode===1,i.value.apply_waste_to_plate=i.value.apply_waste_to_plate!==!1&&i.value.apply_waste_to_plate!==0,i.value.apply_waste_to_edge=i.value.apply_waste_to_edge!==!1&&i.value.apply_waste_to_edge!==0,i.value.apply_waste_to_operations=i.value.apply_waste_to_operations!==!1&&i.value.apply_waste_to_operations!==0,i.value.normohour_rate=Number(i.value.normohour_rate)||0,i.value.waste_coefficient=Number(i.value.waste_coefficient)||1,i.value.waste_plate_coefficient=i.value.waste_plate_coefficient?Number(i.value.waste_plate_coefficient):null,i.value.waste_edge_coefficient=i.value.waste_edge_coefficient?Number(i.value.waste_edge_coefficient):null,i.value.waste_operations_coefficient=i.value.waste_operations_coefficient?Number(i.value.waste_operations_coefficient):null,i.value.repair_coefficient=Number(i.value.repair_coefficient)||1,i.value.show_waste_plate_description=i.value.show_waste_plate_description===!0||i.value.show_waste_plate_description===1,i.value.show_waste_edge_description=i.value.show_waste_edge_description===!0||i.value.show_waste_edge_description===1,i.value.show_waste_operations_description=i.value.show_waste_operations_description===!0||i.value.show_waste_operations_description===1,!i.value.text_blocks)i.value.text_blocks=[];else if(typeof i.value.text_blocks=="string")try{const t=JSON.parse(i.value.text_blocks);Array.isArray(t)&&t.length>0&&typeof t[0]=="string"?i.value.text_blocks=t.map(n=>({title:"",text:n||"",enabled:!0})):Array.isArray(t)?i.value.text_blocks=t.map(n=>({...n,enabled:n.enabled===!0||n.enabled===1})):i.value.text_blocks=[]}catch{i.value.text_blocks=[]}else Array.isArray(i.value.text_blocks)&&i.value.text_blocks.length>0&&typeof i.value.text_blocks[0]=="string"&&(i.value.text_blocks=i.value.text_blocks.map(t=>({title:"",text:t||"",enabled:!0})));q.value=(await _.get(`/api/projects/${p}/positions`)).data,mt.value=(await _.get(`/api/projects/${p}/fittings`)).data,le.value=(await _.get(`/api/projects/${p}/expenses`)).data,console.log("Loaded positions:",q.value),console.log("Loaded expenses:",le.value),le.value&&le.value.length>0&&console.log("First expense structure:",JSON.stringify(le.value[0],null,2)),console.log("Available materials:",z.value.slice(0,3)),console.log("Project coefficients:",{waste_coefficient:i.value.waste_coefficient,waste_plate_coefficient:i.value.waste_plate_coefficient,waste_edge_coefficient:i.value.waste_edge_coefficient,waste_operations_coefficient:i.value.waste_operations_coefficient}),console.log("üìù Text blocks loaded:",i.value.text_blocks),await xt(),await Vt(),await ne();const e=i.value.profileRates;console.log("‚úÖ fetchData completed, final profileRates check:",{hasProfileRates:!!e,count:Array.isArray(e)?e.length:0,rates:e?Array.isArray(e)?e.map(t=>({id:t.id,is_locked:t.is_locked,method:t.calculation_method})):[]:[]})}catch(l){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞:",l),h(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç: ${l.response?.data?.message||l.message}`,"error")}finally{F.value.positions=!1,F.value.fittings=!1,F.value.expenses=!1}},al=async()=>{je.value=!0;try{await Promise.all([ht(),T()])}catch(l){console.error("Refresh failed",l),h("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ","error")}finally{je.value=!1}},ol=()=>{Me.value=!1,b.value={id:null,project_id:p,detail_type_id:null,material_id:i.value?.default_plate_material_id||null,edge_material_id:i.value?.default_edge_material_id||null,edge_scheme:"none",width:0,length:0,quantity:1,custom_name:null},_e.value=!0},sl=l=>{if(Me.value=!0,b.value={...l},!b.value.edge_scheme&&b.value.detail_type_id){const e=X.value.find(t=>t.id===b.value.detail_type_id);e&&e.edge_processing&&(b.value.edge_scheme=e.edge_processing)}_e.value=!0},nl=async()=>{const{valid:l}=await ft.value.validate();if(l)try{if(b.value.material_id){const e=z.value.find(t=>t.id===b.value.material_id);if(e&&e.type==="plate"&&(e.width_mm||e.length_mm)){const t=b.value.width||0,n=b.value.length||0,r=e.width_mm||0,f=e.length_mm||0,g=Math.max(r,f),C=Math.min(r,f);if((t>g||n>g||Math.min(t,n)>C&&Math.max(t,n)>g)&&e.width_mm&&e.length_mm&&!confirm(`‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!

–†–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏ (${t}√ó${n} –º–º) –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ª–∏—Å—Ç–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (${r}√ó${f} –º–º).

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ?`)){console.log("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–∑-–∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞");return}}}Me.value?await _.put(`/api/project-positions/${b.value.id}`,b.value):await _.post(`/api/projects/${p}/positions`,b.value),_e.value=!1,await T()}catch(e){console.error(e),h("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏","error")}},il=async l=>{confirm("–£–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é?")&&(await _.delete(`/api/project-positions/${l.id}`),await T())},rl=async l=>{try{Z.value=l.id||null;const e={project_id:p,detail_type_id:l.detail_type_id,material_id:l.material_id,edge_material_id:l.edge_material_id,edge_scheme:l.edge_scheme,width:l.width,length:l.length,quantity:l.quantity,custom_name:l.custom_name};console.log("üîÑ Cloning position:",e);const t=await _.post(`/api/projects/${p}/positions`,e);console.log("‚úÖ Position cloned successfully"),await T()}catch(e){console.error("‚ùå Error cloning position:",e),h(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏: ${e.response?.data?.message||e.message}`,"error")}finally{Z.value=null}},lt=async(l,e,t)=>{if(!l.id){h("–°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥","warning");return}const n={};e==="width"||e==="length"?n[e]=parseFloat(t)||0:e==="quantity"?n[e]=parseInt(t)||1:n[e]=t;try{await _.put(`/api/project-positions/${l.id}`,n),ke()}catch(r){console.error(r),h("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏","error"),await T()}},ul=()=>{qe.value=!1;const l=he.value[0]||"—à—Ç";$.value={id:0,project_id:p,name:"",article:"",unit:l,quantity:1,unit_price:0,note:""},ve.value=!0},dl=l=>{qe.value=!0;const e=he.value[0]||"—à—Ç";$.value={...l,unit:l.unit||e,note:l.note??""},ve.value=!0},ml=async()=>{try{const l={name:$.value.name,article:$.value.article,unit:$.value.unit||he.value[0]||"—à—Ç",quantity:Number($.value.quantity)||0,unit_price:Number($.value.unit_price)||0,note:$.value.note||null};qe.value?await _.put(`/api/project-fittings/${$.value.id}`,l):await _.post(`/api/projects/${p}/fittings`,l),ve.value=!1,await T()}catch(l){const e=l,t=e?.response?.data?.errors,n=t?Object.values(t).flat().join(`
`):e?.response?.data?.message||e?.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä—ã";h(n,"error")}},pl=async l=>{confirm("–£–¥–∞–ª–∏—Ç—å —Ñ—É—Ä–Ω–∏—Ç—É—Ä—É?")&&(await _.delete(`/api/project-fittings/${l.id}`),await T())},cl=()=>{i.value.text_blocks||(i.value.text_blocks=[]),i.value.text_blocks.length<10&&(i.value.text_blocks.push({title:"",text:"",enabled:!0}),console.log("üìù Added new text block. Total blocks:",i.value.text_blocks.length))},_l=l=>{if(i.value.text_blocks){const e=i.value.text_blocks.splice(l,1);console.log("üìù Removed text block. Removed:",e[0],"Total blocks:",i.value.text_blocks.length)}},vl=l=>{if(i.value.text_blocks&&l>0){const e=i.value.text_blocks[l];i.value.text_blocks[l]=i.value.text_blocks[l-1],i.value.text_blocks[l-1]=e,console.log("‚¨ÜÔ∏è Moved text block up. Current position:",l-1)}},fl=l=>{if(i.value.text_blocks&&l<i.value.text_blocks.length-1){const e=i.value.text_blocks[l];i.value.text_blocks[l]=i.value.text_blocks[l+1],i.value.text_blocks[l+1]=e,console.log("‚¨áÔ∏è Moved text block down. Current position:",l+1)}},gl=()=>{if(!ae.value)return;const l={title:A.value.title.trim(),text:Y(A.value.text)};ae.value==="plate"?l.title||l.text?(i.value.waste_plate_description=l,i.value.show_waste_plate_description=!0):(i.value.waste_plate_description=null,i.value.show_waste_plate_description=!1):ae.value==="edge"?l.title||l.text?(i.value.waste_edge_description=l,i.value.show_waste_edge_description=!0):(i.value.waste_edge_description=null,i.value.show_waste_edge_description=!1):ae.value==="operations"&&(l.title||l.text?(i.value.waste_operations_description=l,i.value.show_waste_operations_description=!0):(i.value.waste_operations_description=null,i.value.show_waste_operations_description=!1)),kt()},kt=()=>{Ye.value=!1,ae.value=null,A.value={title:"",text:""}},yl=l=>{try{l.preventDefault();const e=l.clipboardData;if(!e){console.warn("Clipboard data not available");return}let t="";const n=e?.getData("text/html");n&&n.trim().length>0?t=dt(n):t=e?.getData("text/plain")||"";const r=Qe(t);A.value.text=(A.value.text?A.value.text+`

`:"")+r,A.value.text=Y(A.value.text)}catch(e){console.error("Error during paste:",e)}},Vt=async()=>{try{F.value.normohourSources=!0;const l=await _.get(`/api/projects/${p}/normohour-sources`);Te.value=l.data||[],console.log("üìä Normohour sources loaded:",Te.value)}catch(l){console.error("‚ùå Error loading normohour sources:",l),Te.value=[]}finally{F.value.normohourSources=!1}},Ct=()=>{Xe.value=!1,Ze.value=!1,x.value={source:"",position_profile:null,salary_range:null,period:null,link:null,note:null},I.value={}},bl=()=>(I.value={},(!x.value.source||!x.value.source.trim())&&(I.value.source="–ò—Å—Ç–æ—á–Ω–∏–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω"),x.value.link&&x.value.link.trim()&&(/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(x.value.link.trim())||(I.value.link="–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞")),Object.keys(I.value).length===0),wl=async()=>{if(bl())try{const l={source:x.value.source.trim(),position_profile:x.value.position_profile?x.value.position_profile.trim():null,salary_range:x.value.salary_range?x.value.salary_range.trim():null,period:x.value.period?x.value.period.trim():null,link:x.value.link?x.value.link.trim():null,note:x.value.note?x.value.note.trim():null};if(Ze.value&&x.value.id)await _.put(`/api/projects/${p}/normohour-sources/${x.value.id}`,l),console.log("‚úÖ Normohour source updated");else{if(Te.value.length>=20){h("–ú–∞–∫—Å–∏–º—É–º 20 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤","warning");return}await _.post(`/api/projects/${p}/normohour-sources`,l),console.log("‚úÖ Normohour source created")}await Vt(),Ct()}catch(l){console.error("‚ùå Error saving normohour source:",l);const e=l.response?.data?.message||l.message;h(`–û—à–∏–±–∫–∞: ${e}`,"error")}},xl=async()=>{Ae.value=!0;try{const l=await _.get(`/api/smeta/pdf/${p}`,{responseType:"blob"}),e=URL.createObjectURL(l.data),t=document.createElement("a");t.href=e,t.download=`smeta_${p}.pdf`,t.click(),URL.revokeObjectURL(e)}catch(l){console.error("‚ùå PDF generation error:",l),h(`–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF: ${l.response?.data?.message||l.message}`,"error")}finally{Ae.value=!1}},hl=()=>{Le.value=!1,O.value={id:0,project_id:p,name:"",description:"",amount:0},fe.value=!0},kl=l=>{Le.value=!0,O.value={...l},fe.value=!0},Vl=async()=>{try{const l={name:O.value.name,description:O.value.description,amount:Number(O.value.amount)||0};Le.value?await _.put(`/api/projects/${p}/expenses/${O.value.id}`,l):await _.post(`/api/projects/${p}/expenses`,l),fe.value=!1,await T()}catch(l){const e=l,t=e?.response?.data?.errors,n=t?Object.values(t).flat().join(`
`):e?.response?.data?.message||e?.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞";h(n,"error")}},Cl=async l=>{confirm("–£–¥–∞–ª–∏—Ç—å —Ä–∞—Å—Ö–æ–¥?")&&(await _.delete(`/api/projects/${p}/expenses/${l.id}`),await T())},Se=c([]),at=c(null),Z=c(null),Ee=S(()=>Se.value.map(e=>{const t=e.name||"",n=t.toLowerCase().includes("—Å–≤–µ—Ä–ª")||t.toLowerCase().includes("–æ—Ç–≤–µ—Ä—Å—Ç"),r=e.type!=="manual"&&!e.source?.includes("manual");let f=e.quantity;if(n&&r&&e.source==="detail_type"){const g=wt(e);g.total_holes!==void 0&&(f=g.total_holes)}return{...e,quantity:f,is_manual:e.type==="manual"||e.source==="manual"||!!e.is_manual,total_cost:(f??0)*(e.cost_per_unit??0),_cached_details:D(e)}})),Ft=c([]),ge=c(!1),Pe=c(!1),W=c({id:0,project_id:p,operation_id:null,quantity:1,note:""}),Fl=[{title:"",key:"data-table-expand"},{title:"–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ",key:"name"},{title:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",key:"category"},{title:"–¶–µ–Ω–∞ –∑–∞ –µ–¥.",key:"cost_per_unit",align:"end"},{title:"–ö–æ–ª-–≤–æ",key:"quantity_display"},{title:"–ï–¥. –∏–∑–º.",key:"unit"},{title:"–°—Ç–æ–∏–º–æ—Å—Ç—å",key:"total_cost",align:"end"},{title:"–ò—Å—Ç–æ—á–Ω–∏–∫",key:"source"},{title:"–î–µ–π—Å—Ç–≤–∏—è",key:"actions",sortable:!1}],ee=c([]),$t=c([]),ye=c(!1),ot=c(!1),Ut=c(null),H=c(null),U=c({title:"",basis:"",hours:0,note:"",position_profile_id:null}),ze=c(!1),be=c(null),we=c([]),st=c(!1),N=c({title:"",basis:"",input_data:"",hours:0,note:""}),$l=S(()=>we.value.reduce((l,e)=>l+(parseFloat(e.hours)||0),0)),Ul=[{title:"–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ",key:"title"},{title:"–û—Å–Ω–æ–≤–∞–Ω–∏–µ",key:"basis"},{title:"–ù–æ—Ä–º–∞, —á",key:"hours",align:"end"},{title:"–°—Ç–∞–≤–∫–∞, ‚ÇΩ/—á",key:"rate",align:"end"},{title:"–°—É–º–º–∞, ‚ÇΩ",key:"cost",align:"end"},{title:"–î–µ–π—Å—Ç–≤–∏—è",key:"actions",sortable:!1,width:"100px"}],Ve=c(!1),Oe=c(!1),We=c(!1),Dt=S(()=>Array.isArray(ee.value)?ee.value.reduce((l,e)=>l+(parseFloat(e.cost_total)||0),0):0),Ce=S(()=>{const l=i.value.profileRates;if(typeof l<"u"&&console.log("üîê ratesLocked computed:",{type:Array.isArray(l)?"array":typeof l,value:l,length:Array.isArray(l)?l.length:l&&typeof l=="object"?Object.keys(l).length:0}),!l)return!1;const e=Array.isArray(l)?l:Object.values(l||{});if(e.length===0)return!1;const t=e.every(n=>n.is_locked===!0);return console.log("üîê All rates locked?",t,"out of",e.length),t});Mt(()=>i.value.normohour_rate,l=>{ee.value.length>0&&(ee.value=ee.value.map(e=>({...e,cost:e.hours*(l||0)})))}),Mt(()=>i.value.profileRates,l=>{console.log("üëÄ profileRates changed:",{count:l?Array.isArray(l)?l.length:Object.keys(l).length:0,rates:l?Array.isArray(l)?l.map(e=>({id:e.id,is_locked:e.is_locked})):Object.values(l).map(e=>({id:e.id,is_locked:e.is_locked})):[]})},{deep:!0}),S(()=>{try{if(!q.value||q.value.length===0)return[];const l=new Map;return q.value.forEach(e=>{if(!e.material_id)return;const t=z.value.find(f=>f.id===e.material_id);if(!t)return;const n=(e.width||0)/1e3*((e.length||0)/1e3)*(e.quantity||0);if(!l.has(e.material_id)){const f=t.price_per_unit||0;let g=f;if(t.type==="plate"&&t.length_mm&&t.width_mm){const C=t.length_mm*t.width_mm/1e6;C>0&&(g=f/C)}l.set(e.material_id,{id:e.material_id,name:t.name,volume:0,unit:t.unit||"–º¬≤",price_per_unit:g,price_per_sheet:f,updated_at:t.updated_at})}const r=l.get(e.material_id);r.volume+=n}),Array.from(l.values())}catch(l){return console.error("–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:",l),[]}});const oe=S(()=>{try{if(!q.value||q.value.length===0)return console.log("plateData: no positions"),[];const l=Jt(),e=new Map;q.value.forEach(n=>{if(!n.material_id)return;const r=z.value.find(C=>C.id===n.material_id);if(!r){console.warn("Material not found:",n.material_id);return}if(console.log("Material check:",{id:r.id,name:r.name,type:r.type,isPlate:r.type==="plate"}),r.type!=="plate"){console.log("Skipping non-plate material:",r.name,"type:",r.type);return}const f=(n.width||0)/1e3*((n.length||0)/1e3)*(n.quantity||0);if(!e.has(n.material_id)){const C=r.length_mm&&r.width_mm?r.length_mm*r.width_mm/1e6:0;e.set(n.material_id,{id:n.material_id,name:r.name,area_details:0,waste_coeff:l,area_with_waste:0,sheet_area:C,sheets_count:0,price_per_sheet:r.price_per_unit||0,price_per_m2:r.price_per_unit&&C>0?r.price_per_unit/C:0,updated_at:r.updated_at,source_url:r.source_url})}const g=e.get(n.material_id);g.area_details+=f});const t=i.value?.use_area_calc_mode===!0;return e.forEach(n=>{n.area_with_waste=n.area_details*l,t?n.sheets_count=0:n.sheets_count=n.sheet_area>0?Math.ceil(n.area_with_waste/n.sheet_area):0}),console.log("plateData result:",Array.from(e.values()),"area mode:",t),Array.from(e.values())}catch(l){return console.error("–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–ª–∏—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:",l),[]}}),se=S(()=>{try{if(!q.value||q.value.length===0)return[];const l=_t(),e=new Map;return q.value.forEach(t=>{if(!t.edge_material_id||!t.edge_scheme||t.edge_scheme==="none")return;const n=z.value.find(At=>At.id===t.edge_material_id);if(!n||n.type!=="edge")return;let r=0;const f=(t.width||0)/1e3,g=(t.length||0)/1e3,C=t.quantity||0;switch(t.edge_scheme){case"O":r=2*(f+g)*C;break;case"=":r=2*g*C;break;case"||":r=2*f*C;break;case"L":r=(f+g)*C;break;case"–ü":r=(2*f+g)*C;break;default:r=0}e.has(t.edge_material_id)||e.set(t.edge_material_id,{id:t.edge_material_id,name:n.name,length_linear:0,waste_coeff:l,length_with_waste:0,price_per_unit:n.price_per_unit||0,updated_at:n.updated_at});const Nt=e.get(t.edge_material_id);Nt.length_linear+=r}),e.forEach(t=>{t.length_with_waste=t.length_linear*l}),Array.from(e.values())}catch(l){return console.error("–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∫—Ä–æ–º–∫–∏:",l),[]}}),Dl=S(()=>{if(!oe.value||oe.value.length===0)return 0;const l=i.value?.use_area_calc_mode===!0;return oe.value.reduce((e,t)=>{const n=l?t.area_with_waste*(Number(t.price_per_m2)||0):t.sheets_count*(Number(t.price_per_sheet)||0);return e+n},0)}),jl=S(()=>!se.value||se.value.length===0?0:se.value.reduce((l,e)=>l+e.length_with_waste*(Number(e.price_per_unit)||0),0)),Nl=S(()=>(Dl.value||0)+(jl.value||0)),Al=S(()=>!Ee.value||Ee.value.length===0?0:Ee.value.reduce((l,e)=>{const t=parseFloat(e.total_cost??(e.quantity||0)*(e.cost_per_unit||0))||0;return l+t},0)),Ml=()=>{Pe.value=!1,W.value={id:0,project_id:p,operation_id:null,quantity:1,note:""},ge.value=!0},ql=async()=>{try{const l={quantity:Number(W.value.quantity)||0,note:W.value.note||null},e=W.value.operation_id;l.operation_id=e&&typeof e=="object"?e.id:e,Pe.value?await _.put(`/api/project-operations/${W.value.id}`,l):await _.post(`/api/projects/${p}/operations`,l),ge.value=!1,await T()}catch(l){console.error("saveOperation error",l),h("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏: "+(l.response?.data?.message||l.message),"error")}},Ll=l=>{Pe.value=!0,W.value={...l},ge.value=!0},Tl=async l=>{if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä—É—á–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é?"))try{await _.delete(`/api/project-operations/${l.id}`),await T()}catch{h("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏","error")}},Sl=async()=>{Oe.value=!0;try{const l=await _.post(`/api/projects/${p}/profile-rates/recalculate-and-fix`,{method:"median",only_if_missing:!1});if(l.data.success){await ne(),Ve.value=!1,console.log("‚úÖ –°—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã",l.data.data);const e=l.data.data.created_rate_ids?.length??0;h(`–°—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã (${e} —Å—Ç–∞–≤–æ–∫ —Å–æ–∑–¥–∞–Ω–æ)`,"success")}else console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–µ —Å—Ç–∞–≤–æ–∫:",l.data.message),h("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–µ —Å—Ç–∞–≤–æ–∫: "+l.data.message,"error")}catch(l){console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Å—Ç–∞–≤–æ–∫:",l);try{await ne(),h("–î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–æ —Ñ–∏–∫—Å–∞—Ü–∏—è —Å—Ç–∞–≤–æ–∫ –Ω–µ –ø—Ä–æ—à–ª–∞","warning")}catch{h("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–µ —Å—Ç–∞–≤–æ–∫: "+(l.response?.data?.message||l.message),"error")}}finally{Oe.value=!1}},El=async()=>{We.value=!0;try{if(Ce.value){console.log("üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫...");const e=await _.post(`/api/projects/${p}/profile-rates/unlock`,{});if(e.data.success){console.log("ÔøΩ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞..."),await T(),console.log("‚úÖ –°—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã",e.data.data);const t=e.data.data.unlocked_count??0;h(`–°—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã (${t} —Å—Ç–∞–≤–æ–∫ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ)`,"success")}else console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Å—Ç–∞–≤–æ–∫:",e.data.message),h("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Å—Ç–∞–≤–æ–∫: "+e.data.message,"error")}else{console.log("üìå –°–æ–∑–¥–∞–Ω–∏–µ/—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ –ø–µ—Ä–µ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π...");const e=await _.post(`/api/projects/${p}/profile-rates/recalculate-and-fix`,{method:"median",only_if_missing:!1});if(!e.data.success){h("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ —Å—Ç–∞–≤–æ–∫ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ: "+e.data.message,"error");return}console.log("‚úÖ –°—Ç–∞–≤–∫–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ"),console.log("üîí –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫...");const t=await _.post(`/api/projects/${p}/profile-rates/lock`,{});if(t.data.success){console.log("üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏..."),await T(),console.log("‚úÖ –°—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã",t.data.data);const n=t.data.data.locked_count??0;h(`–°—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã (${n} —Å—Ç–∞–≤–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ)`,"success")}else console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Å—Ç–∞–≤–æ–∫:",t.data.message),h("–û—à–∏–±–∫–∞ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Å—Ç–∞–≤–æ–∫: "+t.data.message,"error")}}catch(l){console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–≤–æ–∫:",l);try{await ne(),h("–î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞: "+(l.response?.data?.message||l.message),"warning")}catch{h("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–≤–æ–∫: "+(l.response?.data?.message||l.message),"error")}}finally{We.value=!1}},Pl=()=>{H.value=null,U.value={title:"",basis:"",hours:0,note:"",position_profile_id:null},ye.value=!0},jt=async()=>{try{if(!Ut.value?.validate())return;ot.value=!0;const l={title:U.value.title||"",basis:U.value.basis||null,hours:parseFloat(String(U.value.hours))||0,note:U.value.note||null,position_profile_id:U.value.position_profile_id||null,hours_source:H.value?.hours_source||"manual",hours_manual:H.value?.hours_manual||parseFloat(String(U.value.hours))||0};H.value?.id?await Ue.update(Number(p),H.value.id,l):await Ue.create(Number(p),{project_id:Number(p),...l}),ye.value=!1,await ne()}catch(l){console.error("saveLaborWork error",l),h("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã: "+(l.response?.data?.message||l.message),"error")}finally{ot.value=!1}},zl=l=>{H.value=l,U.value={title:l.title,basis:l.basis||"",hours:l.hours,note:l.note||"",position_profile_id:l.position_profile_id||null},ye.value=!0},Ol=async l=>{if(confirm(`–£–¥–∞–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É "${l.title}"?`))try{await Ue.delete(Number(p),l.id),await ne()}catch(e){console.error("deleteLaborWork error",e),h("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã: "+(e.response?.data?.message||e.message),"error")}},Wl=async l=>{be.value=l,we.value=[],N.value={title:"",basis:"",input_data:"",hours:0,note:""};try{await nt(l.id),ze.value=!0}catch(e){console.error("Error opening steps modal:",e),h("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–π","error")}},nt=async l=>{try{const e=await _.get(`/api/projects/${p}/labor-works/${l}/steps`);we.value=e.data||[]}catch(e){console.error("Error loading steps:",e),h("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–π","error")}},Rl=async()=>{if(!N.value.title.trim()){h("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–∏","error");return}if(N.value.hours<=0){h("–ß–∞—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–æ–ª—å—à–µ 0","error");return}try{st.value=!0;const l={title:N.value.title.trim(),basis:N.value.basis?.trim()||null,input_data:N.value.input_data?.trim()||null,hours:parseFloat(String(N.value.hours))||0,note:N.value.note?.trim()||null,sort_order:we.value.length};await _.post(`/api/projects/${p}/labor-works/${be.value?.id}/steps`,l),await nt(be.value?.id),await ne(),N.value={title:"",basis:"",input_data:"",hours:0,note:""},h("–ü–æ–¥–æ–ø–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞","success")}catch(l){console.error("Error saving step:",l);const e=l.response?.data?.message||l.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–∏";h(e,"error")}finally{st.value=!1}},Bl=async l=>{if(confirm(`–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏—é "${l.title}"?`))try{await _.delete(`/api/projects/${p}/labor-works/${be.value?.id}/steps/${l.id}`),await nt(be.value?.id),await ne(),h("–ü–æ–¥–æ–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞","success")}catch(e){console.error("Error deleting step:",e),h("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–∏","error")}},ne=async()=>{try{F.value.laborWorks=!0;const l=await _.post(`/api/projects/${p}/labor-works/recalculate`,{mode:"preview"});if(l.data.success&&l.data.data.works)l.data.data.works.length>0&&(console.log("üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–≤–æ–π —Ä–∞–±–æ—Ç—ã:",l.data.data.works[0]),console.log("üìã –í—Å–µ –∫–ª—é—á–∏ —Ä–∞–±–æ—Ç—ã:",Object.keys(l.data.data.works[0]))),ee.value=l.data.data.works.map(e=>({...e,cost:e.cost_total??e.hours*(e.rate_per_hour||0)})),Ve.value=l.data.data.has_missing_rates??!1,l.data.data.has_missing_rates&&console.warn("‚ö†Ô∏è –ï—Å—Ç—å —Ä–∞–±–æ—Ç—ã –±–µ–∑ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ (–Ω–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)");else{const e=await Ue.getAll(Number(p));ee.value=(e||[]).map(t=>{const n=t.rate_per_hour??(i.value.normohour_rate||0);return{...t,cost:t.cost_total??t.hours*n}}),Ve.value=!1}}catch(l){console.error("loadLaborWorks error",l),Ve.value=!1;try{const e=await Ue.getAll(Number(p));ee.value=(e||[]).map(t=>{const n=t.rate_per_hour??(i.value.normohour_rate||0);return{...t,cost:t.cost_total??t.hours*n}})}catch(e){console.error("loadLaborWorks fallback error",e)}}finally{F.value.laborWorks=!1}},Il=()=>{window.open("/detail-types","_blank");const l=setInterval(async()=>{try{const e=await _.get("/api/detail-types").then(t=>t.data);X.value=e}catch(e){console.error("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–µ—Ç–∞–ª–∏:",e)}},2e3);setTimeout(()=>clearInterval(l),300*1e3)};return Gl(async()=>{await ht(),await T()}),(l,e)=>(m(),w(J,null,[a(Ie,{class:"pa-0"},{default:o(()=>[a(Yl,{color:"primary",dark:"",class:"mb-4"},{default:o(()=>[a(Xl,null,{default:o(()=>[u("–ü—Ä–æ–µ–∫—Ç #"+d(i.value.number),1)]),_:1}),a(R),a(k,{size:"small",color:"secondary","prepend-icon":"mdi-refresh",loading:je.value,disabled:je.value,onClick:al,class:"mr-2"},{default:o(()=>[...e[76]||(e[76]=[u(" –û–±–Ω–æ–≤–∏—Ç—å ",-1)])]),_:1},8,["loading","disabled"]),a(k,{size:"small","prepend-icon":"mdi-cog",onClick:Ot},{default:o(()=>[...e[77]||(e[77]=[u(" –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ",-1)])]),_:1})]),_:1}),a(Zl,{"model-value":Ne.value,"onUpdate:modelValue":e[18]||(e[18]=t=>Ne.value=t),location:"right",width:"1000",temporary:"",elevation:"16",class:"settings-drawer"},{default:o(()=>[a(G,{class:"h-100 rounded-0"},{default:o(()=>[a(M,{class:"pa-4 border-b"},{default:o(()=>[s("div",sa,[e[79]||(e[79]=s("span",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞",-1)),a(k,{icon:"",variant:"text",size:"small",onClick:ie(zt,["stop"])},{default:o(()=>[a(j,null,{default:o(()=>[...e[78]||(e[78]=[u("mdi-close",-1)])]),_:1})]),_:1})])]),_:1}),a(K,{class:"pa-4 overflow-y-auto",style:{height:"calc(100vh - 100px)"}},{default:o(()=>[a(He,null,{default:o(()=>[s("div",na,[e[80]||(e[80]=s("h3",{class:"text-subtitle-1 mb-3"},"–û—Å–Ω–æ–≤–Ω–æ–µ",-1)),a(y,{modelValue:i.value.number,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.number=t),label:"‚Ññ –¥–µ–ª–∞",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.expert_name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.expert_name=t),label:"–§–ò–û —ç–∫—Å–ø–µ—Ä—Ç–∞",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.address,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.address=t),label:"–ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞",class:"mb-3"},null,8,["modelValue"]),a(te,{modelValue:i.value.region_id,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.region_id=t),items:pt.value,"item-title":"name","item-value":"id",label:"–†–µ–≥–∏–æ–Ω",clearable:"",density:"compact",class:"mb-3",hint:"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞–≤–æ–∫","menu-props":{maxHeight:300}},null,8,["modelValue","items"])]),a(E,{class:"my-4"}),s("div",ia,[e[83]||(e[83]=s("h3",{class:"text-subtitle-1 mb-3"},"–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã",-1)),a(y,{modelValue:i.value.waste_coefficient,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.waste_coefficient=t),modelModifiers:{number:!0},label:"–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ–±—Ä–µ–∑–∫–æ–≤",type:"number",min:"1",step:"0.01",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.repair_coefficient,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.repair_coefficient=t),modelModifiers:{number:!0},label:"–†–µ–º–æ–Ω—Ç–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç",type:"number",min:"1",step:"0.01",class:"mb-3"},null,8,["modelValue"]),s("div",ra,[e[81]||(e[81]=s("span",{class:"text-subtitle-2"},"–ü–æ –ª–∏—Å—Ç–∞–º",-1)),a(St,{modelValue:i.value.use_area_calc_mode,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.use_area_calc_mode=t)},null,8,["modelValue"]),e[82]||(e[82]=s("span",{class:"text-subtitle-2"},"–ü–æ –ø–ª–æ—â–∞–¥–∏",-1))])]),a(E,{class:"my-4"}),s("div",ua,[e[84]||(e[84]=s("h3",{class:"text-subtitle-1 mb-3"},"–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é",-1)),a(te,{modelValue:i.value.default_plate_material_id,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.default_plate_material_id=t),items:z.value.filter(t=>t.type==="plate"),"item-title":"name","item-value":"id",label:"–ü–ª–∏—Ç–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª",clearable:"",density:"compact",class:"mb-3"},null,8,["modelValue","items"]),a(te,{modelValue:i.value.default_edge_material_id,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.default_edge_material_id=t),items:z.value.filter(t=>t.type==="edge"),"item-title":"name","item-value":"id",label:"–ö—Ä–æ–º–æ—á–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª",clearable:"",density:"compact"},null,8,["modelValue","items"])]),a(E,{class:"my-4"}),s("div",da,[e[89]||(e[89]=s("h3",{class:"text-subtitle-1 mb-3"},"–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –æ—Ç—Ö–æ–¥–æ–≤",-1)),a(Fe,{class:"border",density:"compact"},{default:o(()=>[e[88]||(e[88]=s("thead",null,[s("tr",null,[s("th",null,"–¢–∏–ø"),s("th",null,"–ó–Ω–∞—á–µ–Ω–∏–µ"),s("th",null,"–ü—Ä–∏–º–µ–Ω—è—Ç—å")])],-1)),s("tbody",null,[s("tr",null,[e[85]||(e[85]=s("td",null,"–ü–ª–∏—Ç–Ω—ã–µ",-1)),s("td",null,[a(y,{modelValue:i.value.waste_plate_coefficient,"onUpdate:modelValue":e[9]||(e[9]=t=>i.value.waste_plate_coefficient=t),modelModifiers:{number:!0},type:"number",step:"0.01",min:"1",density:"compact","hide-details":"",style:{"max-width":"100px"},placeholder:String(i.value.waste_coefficient||1.2)},null,8,["modelValue","placeholder"])]),s("td",null,[a(it,{modelValue:i.value.apply_waste_to_plate,"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.apply_waste_to_plate=t),"hide-details":"",class:"mt-0"},null,8,["modelValue"])])]),s("tr",null,[e[86]||(e[86]=s("td",null,"–ö—Ä–æ–º–∫–∞",-1)),s("td",null,[a(y,{modelValue:i.value.waste_edge_coefficient,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.waste_edge_coefficient=t),modelModifiers:{number:!0},type:"number",step:"0.01",min:"1",density:"compact","hide-details":"",style:{"max-width":"100px"},placeholder:String(i.value.waste_coefficient||1.1)},null,8,["modelValue","placeholder"])]),s("td",null,[a(it,{modelValue:i.value.apply_waste_to_edge,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.apply_waste_to_edge=t),"hide-details":"",class:"mt-0"},null,8,["modelValue"])])]),s("tr",null,[e[87]||(e[87]=s("td",null,"–û–ø–µ—Ä–∞—Ü–∏–∏",-1)),s("td",null,[a(y,{modelValue:i.value.waste_operations_coefficient,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.waste_operations_coefficient=t),modelModifiers:{number:!0},type:"number",step:"0.01",min:"1",density:"compact","hide-details":"",style:{"max-width":"100px"},placeholder:String(i.value.waste_coefficient||1)},null,8,["modelValue","placeholder"])]),s("td",null,[a(it,{modelValue:i.value.apply_waste_to_operations,"onUpdate:modelValue":e[14]||(e[14]=t=>i.value.apply_waste_to_operations=t),"hide-details":"",class:"mt-0"},null,8,["modelValue"])])])])]),_:1})]),a(E,{class:"my-4"}),s("div",ma,[e[90]||(e[90]=s("h3",{class:"text-subtitle-1 mb-3"},"–ù–æ—Ä–º–æ-—á–∞—Å —Ä–∞–±–æ—Ç",-1)),a(y,{modelValue:i.value.normohour_rate,"onUpdate:modelValue":e[15]||(e[15]=t=>i.value.normohour_rate=t),modelModifiers:{number:!0},label:"–°—Ç–∞–≤–∫–∞, —Ä—É–±/—á–∞—Å",type:"number",step:"0.01",min:"0",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä, 734",density:"compact",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.normohour_region,"onUpdate:modelValue":e[16]||(e[16]=t=>i.value.normohour_region=t),label:"–ì–æ—Ä–æ–¥/—Ä–µ–≥–∏–æ–Ω",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥",density:"compact",maxlength:"255",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.normohour_date,"onUpdate:modelValue":e[17]||(e[17]=t=>i.value.normohour_date=t),label:"–î–∞—Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç–∞–≤–∫–∏",type:"date",density:"compact"},null,8,["modelValue"])]),a(E,{class:"my-4"}),s("div",pa,[e[94]||(e[94]=s("h3",{class:"text-subtitle-1 mb-3"},"–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –±–ª–æ–∫–∏ —Å–º–µ—Ç—ã",-1)),i.value.text_blocks&&i.value.text_blocks.length>0?(m(),w("div",ca,[(m(!0),w(J,null,xe(i.value.text_blocks,(t,n)=>(m(),w("div",{key:n,class:"mb-3 pa-3 border rounded",style:Lt({"background-color":t.enabled!==!1?"rgba(0,0,0,0.02)":"rgba(0,0,0,0.01)",opacity:t.enabled!==!1?1:.6})},[s("div",_a,[s("div",va,[s("span",fa,"–ë–ª–æ–∫ "+d(n+1),1),a(St,{modelValue:t.enabled,"onUpdate:modelValue":r=>t.enabled=r,title:"–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫ –≤ –æ—Ç—á—ë—Ç–µ"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ga,[n>0?(m(),v(k,{key:0,icon:"",size:"x-small",color:"info",variant:"text",onClick:r=>vl(n),title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö"},{default:o(()=>[a(j,{size:"small"},{default:o(()=>[...e[91]||(e[91]=[u("mdi-arrow-up",-1)])]),_:1})]),_:1},8,["onClick"])):V("",!0),n<(i.value.text_blocks?.length||0)-1?(m(),v(k,{key:1,icon:"",size:"x-small",color:"info",variant:"text",onClick:r=>fl(n),title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑"},{default:o(()=>[a(j,{size:"small"},{default:o(()=>[...e[92]||(e[92]=[u("mdi-arrow-down",-1)])]),_:1})]),_:1},8,["onClick"])):V("",!0),a(k,{icon:"",size:"x-small",color:"error",variant:"text",onClick:r=>_l(n),title:"–£–¥–∞–ª–∏—Ç—å –±–ª–æ–∫"},{default:o(()=>[a(j,{size:"small"},{default:o(()=>[...e[93]||(e[93]=[u("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]),a(y,{modelValue:t.title,"onUpdate:modelValue":r=>t.title=r,label:"–ó–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫–∞",variant:"outlined",density:"compact",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –û–±—â–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è, –ì–∞—Ä–∞–Ω—Ç–∏—è",counter:"100",maxlength:"100",class:"mb-2",onInput:r=>t.title=t.title||"",disabled:t.enabled===!1},null,8,["modelValue","onUpdate:modelValue","onInput","disabled"]),a(pe,{modelValue:t.text,"onUpdate:modelValue":r=>t.text=r,label:"–¢–µ–∫—Å—Ç –±–ª–æ–∫–∞",variant:"outlined",rows:"3",placeholder:"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç (–º–∞–∫—Å–∏–º—É–º 3000 —Å–∏–º–≤–æ–ª–æ–≤)",counter:"3000",maxlength:"3000",onInput:r=>t.text=Y(t.text),onPaste:r=>Pt(t,r),disabled:t.enabled===!1,density:"compact"},null,8,["modelValue","onUpdate:modelValue","onInput","onPaste","disabled"]),t.text.length>0?(m(),w("div",ya," –°–∏–º–≤–æ–ª–æ–≤: "+d(t.text.length)+"/3000 ",1)):V("",!0)],4))),128))])):V("",!0),!i.value.text_blocks||i.value.text_blocks.length<10?(m(),w("div",ba,[a(k,{"prepend-icon":"mdi-plus",color:"secondary",variant:"outlined",size:"small",onClick:cl},{default:o(()=>[u(" –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ ("+d(i.value.text_blocks?i.value.text_blocks.length:0)+"/10) ",1)]),_:1})])):(m(),w("div",wa," –î–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º (10 –±–ª–æ–∫–æ–≤) "))])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[...e[95]||(e[95]=[u("–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–µ–∫—Ç–∞",-1)])]),_:1}),a(K,null,{default:o(()=>[a(E,{class:"my-4"}),a(M,null,{default:o(()=>[...e[96]||(e[96]=[u("–ü–æ–∑–∏—Ü–∏–∏",-1)])]),_:1}),a(k,{"prepend-icon":"mdi-plus",onClick:ol},{default:o(()=>[...e[97]||(e[97]=[u("–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é",-1)])]),_:1}),s("div",xa,[F.value.positions?(m(),v(de,{key:0,type:"table"})):(m(),v(me,{key:1,items:q.value,headers:Bt},{"item.material":o(({item:t})=>[u(d(gt(t.material_id)),1)]),"item.edge_material":o(({item:t})=>[u(d(gt(t.edge_material_id)),1)]),"item.edge_scheme":o(({item:t})=>[u(d(Qt(t)),1)]),"item.detail_type":o(({item:t})=>[u(d(yt(t.detail_type_id)),1)]),"item.width":o(({item:t})=>[a(y,{value:Math.round(t.width||0),type:"number",density:"compact","hide-details":"",style:{"max-width":"120px"},step:"1","onUpdate:modelValue":n=>lt(t,"width",parseInt(n)||0)},null,8,["value","onUpdate:modelValue"])]),"item.length":o(({item:t})=>[a(y,{value:Math.round(t.length||0),type:"number",density:"compact","hide-details":"",style:{"max-width":"120px"},step:"1","onUpdate:modelValue":n=>lt(t,"length",parseInt(n)||0)},null,8,["value","onUpdate:modelValue"])]),"item.area_single":o(({item:t})=>[u(d(((t.width||0)/1e3*((t.length||0)/1e3)).toFixed(4)),1)]),"item.quantity":o(({item:t})=>[a(y,{modelValue:t.quantity,"onUpdate:modelValue":n=>t.quantity=n,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",style:{"max-width":"100px"},onBlur:()=>lt(t,"quantity",t.quantity)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),"item.area_total":o(({item:t})=>[u(d(((t.width||0)/1e3*((t.length||0)/1e3)*(t.quantity||0)).toFixed(4)),1)]),"item.actions":o(({item:t})=>[s("div",ha,[a(j,{onClick:n=>sl(t),disabled:Z.value!==null,class:Ke(Z.value!==null?"text-disabled":"cursor-pointer"),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"},{default:o(()=>[...e[98]||(e[98]=[u(" mdi-pencil ",-1)])]),_:1},8,["onClick","disabled","class"]),s("div",ka,[Z.value!==t.id?(m(),v(j,{key:0,onClick:n=>rl(t),disabled:Z.value!==null,class:Ke(Z.value!==null?"text-disabled":"cursor-pointer"),title:"–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é"},{default:o(()=>[...e[99]||(e[99]=[u(" mdi-content-duplicate ",-1)])]),_:1},8,["onClick","disabled","class"])):(m(),v(ea,{key:1,size:"24",width:"2",indeterminate:"",color:"primary",title:"–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ..."}))]),a(j,{onClick:n=>il(t),disabled:Z.value!==null,class:Ke(Z.value!==null?"text-disabled":"cursor-pointer"),title:"–£–¥–∞–ª–∏—Ç—å"},{default:o(()=>[...e[100]||(e[100]=[u(" mdi-delete ",-1)])]),_:1},8,["onClick","disabled","class"])])]),_:1},8,["items"]))]),a(E,{class:"my-4"}),a(M,null,{default:o(()=>[e[101]||(e[101]=u(" –ú–∞—Ç–µ—Ä–∏–∞–ª—ã ",-1)),a(R),s("div",Va,"–ò—Ç–æ–≥–æ: "+d(Nl.value.toFixed(2))+" ‚ÇΩ",1)]),_:1}),oe.value.length>0?(m(),v(rt,{key:0,class:"mt-2"},{default:o(()=>[s("div",Ca,[s("div",null,[e[103]||(e[103]=s("span",null,"–ü–ª–∏—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã",-1)),i.value.apply_waste_to_plate?V("",!0):(m(),v(Q,{key:0,size:"small",variant:"filled",color:"warning",class:"ml-2"},{default:o(()=>[...e[102]||(e[102]=[u(" –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç–∫–ª—é—á–µ–Ω ",-1)])]),_:1}))]),a(Q,{size:"small",variant:"outlined",color:"info"},{default:o(()=>[u(d(i.value.use_area_calc_mode?"–†–∞—Å—á—ë—Ç –ø–æ –ø–ª–æ—â–∞–¥–∏":"–†–∞—Å—á—ë—Ç –ø–æ –ª–∏—Å—Ç–∞–º"),1)]),_:1})])]),_:1})):V("",!0),F.value.materials&&oe.value.length===0?(m(),v(de,{key:1,type:"table"})):oe.value.length>0?(m(),v(me,{key:2,items:oe.value,headers:Ht.value,density:"comfortable",class:"mb-4","show-expand":""},{"header.price_per_m2":o(({column:t})=>[a(ut,{text:"–¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –∏–∑ —Ü–µ–Ω—ã –ª–∏—Å—Ç–∞"},{activator:o(({props:n})=>[s("span",qt(n,{class:"cursor-help"}),[u(d(t.title)+" ",1),a(Q,{size:"x-small",variant:"text",color:"grey-darken-1"},{default:o(()=>[...e[104]||(e[104]=[u("—Ä–∞—Å—á.",-1)])]),_:1})],16)]),_:2},1024)]),"item.area_details":o(({item:t})=>[u(d(t.area_details.toFixed(2)),1)]),"item.waste_coeff":o(({item:t})=>[u(d((Number(t.waste_coeff)||1).toFixed(2)),1)]),"item.area_with_waste":o(({item:t})=>[u(d(t.area_with_waste.toFixed(2)),1)]),"item.sheet_area":o(({item:t})=>[!i.value.use_area_calc_mode&&t.sheet_area>0?(m(),v(ut,{key:0,text:`${(t.sheet_area*1e6).toFixed(0)} –º–º¬≤`},{activator:o(({props:n})=>[s("span",Re(Be(n)),d(t.sheet_area.toFixed(4)),17)]),_:2},1032,["text"])):i.value.use_area_calc_mode?V("",!0):(m(),w("span",Fa,"‚Äî"))]),"item.sheets_count":o(({item:t})=>[i.value.use_area_calc_mode?(m(),w("span",Ua,d(t.area_with_waste.toFixed(2))+" –º¬≤",1)):(m(),w("span",$a,d(t.sheets_count),1))]),"item.price_per_sheet":o(({item:t})=>[i.value.use_area_calc_mode?V("",!0):(m(),w("span",Da,d((Number(t.price_per_sheet)||0).toFixed(2))+" ‚ÇΩ ",1))]),"item.price_per_m2":o(({item:t})=>[i.value.use_area_calc_mode?(m(),w("span",ja,d((Number(t.price_per_m2)||0).toFixed(2))+" ‚ÇΩ/–º¬≤ ",1)):V("",!0)]),"item.total_price":o(({item:t})=>[i.value.use_area_calc_mode?(m(),w("span",Aa,d((t.area_with_waste*(Number(t.price_per_m2)||0)).toFixed(2))+" ‚ÇΩ ",1)):(m(),w("span",Na,d((t.sheets_count*(Number(t.price_per_sheet)||0)).toFixed(2))+" ‚ÇΩ ",1))]),"expanded-row":o(({columns:t,item:n})=>[s("tr",null,[s("td",{colspan:t.length,class:"pa-4",style:{"background-color":"#f5f5f5"}},[a(Ie,{class:"pa-0"},{default:o(()=>[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[...e[105]||(e[105]=[s("div",{class:"text-subtitle-2 mb-2"},[s("strong",null,"–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞:")],-1)])]),_:1})]),_:1}),a(B,null,{default:o(()=>[a(P,{cols:"12",md:"6"},{default:o(()=>[s("div",qa,[s("div",null,[e[106]||(e[106]=u("–ü–ª–æ—â–∞–¥—å –¥–µ—Ç–∞–ª–µ–π: ",-1)),s("strong",null,d(n.area_details.toFixed(2))+" –º¬≤",1)]),s("div",null,[e[107]||(e[107]=u("–ö–æ—ç—Ñ. –æ—Ç—Ö–æ–¥–æ–≤: ",-1)),s("strong",null,d((Number(n.waste_coeff)||1).toFixed(2)),1)]),s("div",null,[e[108]||(e[108]=u("–ü–ª–æ—â–∞–¥—å —Å –æ—Ç—Ö–æ–¥–∞–º–∏: ",-1)),s("strong",null,d(n.area_with_waste.toFixed(2))+" –º¬≤",1)]),i.value.use_area_calc_mode?(m(),w(J,{key:1},[s("div",Ea,[e[116]||(e[116]=s("div",{class:"text-subtitle-2 mb-2"},[s("strong",null,"–û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞—Å—á—ë—Ç:")],-1)),s("div",null,[e[113]||(e[113]=u("–ü–ª–æ—â–∞–¥—å –∫ –æ–ø–ª–∞—Ç–µ: ",-1)),s("strong",null,d(n.area_with_waste.toFixed(2))+" –º¬≤",1)]),s("div",null,[e[114]||(e[114]=u("–¶–µ–Ω–∞ –∑–∞ –º¬≤ (—Ä–∞—Å—á.): ",-1)),s("strong",null,d(n.price_per_m2.toFixed(2))+" ‚ÇΩ/–º¬≤",1)]),s("div",Pa,[e[115]||(e[115]=u("–ò—Ç–æ–≥–æ: ",-1)),s("strong",null,d(n.area_with_waste.toFixed(2))+" √ó "+d(n.price_per_m2.toFixed(2))+" = "+d((n.area_with_waste*n.price_per_m2).toFixed(2))+" ‚ÇΩ",1)])]),s("div",za,[e[117]||(e[117]=s("div",{class:"mb-2"},[s("strong",null,"–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:")],-1)),s("div",null,"–†–∞–∑–º–µ—Ä –ª–∏—Å—Ç–∞: "+d(n.sheet_area.toFixed(4))+" –º¬≤",1),s("div",null,"–¶–µ–Ω–∞ –∑–∞ –ª–∏—Å—Ç: "+d((Number(n.price_per_sheet)||0).toFixed(2))+" ‚ÇΩ",1),e[118]||(e[118]=s("div",{class:"mt-2"},"–¶–µ–Ω–∞ –∑–∞ –º¬≤ –ø–æ–ª—É—á–µ–Ω–∞ —Ä–∞—Å—á—ë—Ç–Ω—ã–º –ø—É—Ç—ë–º –∏–∑ —Ü–µ–Ω—ã –ª–∏—Å—Ç–∞:",-1)),s("div",null,d((Number(n.price_per_sheet)||0).toFixed(2))+" ‚ÇΩ / "+d(n.sheet_area.toFixed(4))+" –º¬≤ = "+d(n.price_per_m2.toFixed(2))+" ‚ÇΩ/–º¬≤",1)])],64)):(m(),w(J,{key:0},[s("div",null,[e[109]||(e[109]=u("–ü–ª–æ—â–∞–¥—å –ª–∏—Å—Ç–∞: ",-1)),s("strong",null,d(n.sheet_area.toFixed(4))+" –º¬≤",1)]),s("div",La,[e[110]||(e[110]=u("–õ–∏—Å—Ç–æ–≤: ",-1)),s("strong",null,"ceil("+d(n.area_with_waste.toFixed(2))+" / "+d(n.sheet_area.toFixed(4))+") = "+d(n.sheets_count),1)]),s("div",Ta,[e[111]||(e[111]=u("–¶–µ–Ω–∞ –∑–∞ –º¬≤: ",-1)),s("strong",null,d(n.price_per_m2.toFixed(2))+" ‚ÇΩ/–º¬≤",1)]),s("div",Sa,[e[112]||(e[112]=u("–ò—Ç–æ–≥–æ: ",-1)),s("strong",null,d(n.sheets_count)+" √ó "+d((Number(n.price_per_sheet)||0).toFixed(2))+" = "+d((n.sheets_count*(Number(n.price_per_sheet)||0)).toFixed(2))+" ‚ÇΩ",1)])],64))])]),_:2},1024),n.updated_at?(m(),v(P,{key:0,cols:"12",md:"6"},{default:o(()=>[e[122]||(e[122]=s("div",{class:"text-subtitle-2 mb-2"},[s("strong",null,"–ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–µ–Ω—ã:")],-1)),s("div",Oa,[s("div",null,[e[119]||(e[119]=u("–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ",-1)),s("strong",null,d(new Date(n.updated_at).toLocaleDateString("ru-RU")),1)]),n.source_url?(m(),w("div",Wa,[a(k,{href:n.source_url,target:"_blank",size:"small",variant:"text",color:"primary","prepend-icon":"mdi-link-variant"},{default:o(()=>[...e[120]||(e[120]=[u(" –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–∞—Ç–µ—Ä–∏–∞–ª–∞ ",-1)])]),_:1},8,["href"])])):V("",!0),e[121]||(e[121]=s("div",{class:"text-caption text-grey mt-2"},"–¶–µ–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É",-1))])]),_:2},1024)):V("",!0)]),_:2},1024)]),_:2},1024)],8,Ma)])]),_:1},8,["items","headers"])):V("",!0),se.value.length>0?(m(),v(rt,{key:3,class:"mt-2"},{default:o(()=>[s("div",Ra,[e[124]||(e[124]=s("span",null,"–ö—Ä–æ–º–∫–∞",-1)),i.value.apply_waste_to_edge?V("",!0):(m(),v(Q,{key:0,size:"small",variant:"filled",color:"warning"},{default:o(()=>[...e[123]||(e[123]=[u(" –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç–∫–ª—é—á–µ–Ω ",-1)])]),_:1}))])]),_:1})):V("",!0),F.value.materials&&se.value.length===0?(m(),v(de,{key:4,type:"table"})):se.value.length>0?(m(),v(me,{key:5,items:se.value,headers:Gt,density:"comfortable","show-expand":""},{"item.length_linear":o(({item:t})=>[u(d(t.length_linear.toFixed(2)),1)]),"item.waste_coeff":o(({item:t})=>[u(d((Number(t.waste_coeff)||1).toFixed(2)),1)]),"item.length_with_waste":o(({item:t})=>[u(d(t.length_with_waste.toFixed(2)),1)]),"item.price_per_unit":o(({item:t})=>[u(d((Number(t.price_per_unit)||0).toFixed(2))+" ‚ÇΩ ",1)]),"item.total_price":o(({item:t})=>[u(d((t.length_with_waste*(Number(t.price_per_unit)||0)).toFixed(2))+" ‚ÇΩ ",1)]),"expanded-row":o(({columns:t,item:n})=>[s("tr",null,[s("td",{colspan:t.length,class:"pa-4",style:{"background-color":"#f5f5f5"}},[a(Ie,{class:"pa-0"},{default:o(()=>[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[...e[125]||(e[125]=[s("div",{class:"text-subtitle-2 mb-3"},[s("strong",null,"–†–∞—Å—á—ë—Ç –¥–ª–∏–Ω—ã –∫—Ä–æ–º–∫–∏:")],-1)])]),_:1})]),_:1}),a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[a(Fe,{class:"border-table"},{default:o(()=>[e[127]||(e[127]=s("thead",null,[s("tr",null,[s("th",null,"–ü–æ–∑–∏—Ü–∏—è"),s("th",null,"–†–∞–∑–º–µ—Ä –¥–µ—Ç–∞–ª–∏ (–º–º)"),s("th",null,"–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ—Ä—Ü–æ–≤"),s("th",null,"–ü–µ—Ä–∏–º–µ—Ç—Ä –æ–¥–Ω–æ–π (–º)"),s("th",null,"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ"),s("th",null,"–ò—Ç–æ–≥–æ –¥–ª–∏–Ω–∞ (–º)")])],-1)),s("tbody",null,[(m(!0),w(J,null,xe(bt(n.id),r=>(m(),w("tr",{key:r.position_id},[s("td",null,d(r.position_name),1),s("td",null,d(r.width)+" √ó "+d(r.length),1),s("td",null,d(r.edge_scheme_label),1),s("td",null,d(r.perimeter_one.toFixed(4)),1),s("td",null,d(r.quantity),1),s("td",null,[s("strong",null,d(r.total_length.toFixed(2)),1)])]))),128))]),s("tfoot",null,[s("tr",null,[e[126]||(e[126]=s("td",{colspan:"5",style:{"text-align":"right"}},[s("strong",null,"–í—Å–µ–≥–æ:")],-1)),s("td",null,[s("strong",null,d(n.length_linear.toFixed(2))+" –º",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(B,{class:"mt-4"},{default:o(()=>[a(P,{cols:"12",md:"6"},{default:o(()=>[s("div",Ia,[s("div",null,[e[128]||(e[128]=u("–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç—Ö–æ–¥–æ–≤: ",-1)),s("strong",null,d((Number(n.waste_coeff)||1).toFixed(2)),1)]),s("div",Ha,[e[129]||(e[129]=u("–†–∞—Å—á—ë—Ç: ",-1)),s("strong",null,d(n.length_linear.toFixed(2))+" √ó "+d((Number(n.waste_coeff)||1).toFixed(2))+" = "+d(n.length_with_waste.toFixed(2))+" –º",1)]),e[130]||(e[130]=s("div",{class:"text-caption",style:{color:"#666","margin-top":"12px","line-height":"1.5"}},[s("strong",null,"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:"),u(' –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –º–∞—Ç–µ—Ä–∏–∞–ª—É –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—Ä–æ–º–∫–æ–æ–±–ª–∏—Ü–æ–≤–∫–∏. –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ "–ö—Ä–æ–º–∫–æ–æ–±–ª–∏—Ü–æ–≤–∫–∞" –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ç–æ–≥–æ –∂–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞. ')],-1))])]),_:2},1024)]),_:2},1024)]),_:2},1024)],8,Ba)])]),_:1},8,["items"])):V("",!0),a(E,{class:"my-4"}),a(M,null,{default:o(()=>[e[131]||(e[131]=u(" –û–ø–µ—Ä–∞—Ü–∏–∏ ",-1)),a(R),s("div",Ja,"–ò—Ç–æ–≥–æ: "+d(Al.value.toFixed(2))+" ‚ÇΩ",1)]),_:1}),a(k,{"prepend-icon":"mdi-plus",onClick:Ml,class:"mb-2"},{default:o(()=>[...e[132]||(e[132]=[u("–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é",-1)])]),_:1}),F.value.operations?(m(),v(de,{key:6,type:"table"})):(m(),v(me,{key:7,expanded:[at.value],items:Ee.value,headers:Fl,density:"comfortable","show-expand":"","item-value":"id","onClick:row":e[19]||(e[19]=(t,{item:n,expand:r})=>{r&&(at.value.value=at.value.value===n.id?null:n.id)})},{"item.quantity_display":o(({item:t})=>[u(d((typeof t.quantity=="number"?t.quantity:parseFloat(t.quantity||0)).toFixed(2)),1)]),"item.name":o(({item:t})=>[s("div",Ga,[s("span",null,d(t.name),1),t.is_manual?V("",!0):(m(),v(j,{key:0,size:"18",color:"blue"},{default:o(()=>[...e[133]||(e[133]=[u("mdi-robot",-1)])]),_:1}))])]),"item.cost_per_unit":o(({item:t})=>[s("div",Ka,d(parseFloat(t.cost_per_unit||0).toFixed(2))+" ‚ÇΩ",1)]),"item.total_cost":o(({item:t})=>[u(d(parseFloat(t.total_cost).toFixed(2))+" ‚ÇΩ ",1)]),"item.source":o(({item:t})=>[a(Q,{size:"small",color:t.is_manual?"primary":"success",variant:"flat"},{default:o(()=>[u(d(t.is_manual?"–†—É—á–Ω–∞—è":"–ê–≤—Ç–æ"),1)]),_:2},1032,["color"])]),"item.actions":o(({item:t})=>[t.is_manual?(m(),v(j,{key:0,onClick:n=>Ll(t),class:"me-2",color:"primary"},{default:o(()=>[...e[134]||(e[134]=[u(" mdi-pencil ",-1)])]),_:1},8,["onClick"])):V("",!0),t.is_manual?(m(),v(j,{key:1,onClick:n=>Tl(t),color:"error",icon:"mdi-delete"},null,8,["onClick"])):V("",!0)]),"expanded-row":o(({columns:t,item:n})=>[s("tr",null,[s("td",{colspan:t.length,class:"pa-4",style:{"background-color":"#f5f5f5"}},[a(Ie,{class:"pa-0"},{default:o(()=>[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[s("div",Ya,[s("strong",null,'–†–∞—Å—á—ë—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ "'+d(n.name)+'":',1)])]),_:2},1024)]),_:2},1024),D(n).type==="edging"?(m(),w(J,{key:0},[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[a(Fe,{class:"border-table"},{default:o(()=>[e[136]||(e[136]=s("thead",null,[s("tr",null,[s("th",null,"–ü–æ–∑–∏—Ü–∏—è / –ú–∞—Ç–µ—Ä–∏–∞–ª"),s("th",{style:{"text-align":"right"}},"–î–ª–∏–Ω–∞ (–º)")])],-1)),s("tbody",null,[(m(!0),w(J,null,xe(D(n).details,r=>(m(),w("tr",{key:`${r.position_name}-${r.material_name}`},[s("td",null,[s("div",null,d(r.position_name),1),s("div",Xa,d(r.material_name),1)]),s("td",Za,d(r.length.toFixed(2)),1)]))),128))]),s("tfoot",null,[s("tr",null,[e[135]||(e[135]=s("td",null,[s("strong",null,"–ò—Ç–æ–≥–æ:")],-1)),s("td",eo,[s("strong",null,d(D(n).total_length.toFixed(2))+" –º",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(B,{class:"mt-3"},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[s("div",to,[s("div",null,[e[137]||(e[137]=u("–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞: ",-1)),s("strong",null,d((Number(D(n).waste_coeff)||1).toFixed(2)),1)]),s("div",lo,[e[138]||(e[138]=u("–ö –æ–ø–ª–∞—Ç–µ: ",-1)),s("strong",null,d(D(n).total_with_waste.toFixed(2))+" –º.–ø.",1)]),s("div",ao," ("+d(D(n).total_length.toFixed(2))+" √ó "+d((Number(D(n).waste_coeff)||1).toFixed(2))+" = "+d(D(n).total_with_waste.toFixed(2))+" –º.–ø.) ",1)])]),_:2},1024)]),_:2},1024)],64)):D(n).type==="sawing"?(m(),v(B,{key:1},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[s("div",oo,d(D(n).note),1),a(Fe,{class:"border-table"},{default:o(()=>[e[140]||(e[140]=s("thead",null,[s("tr",null,[s("th",null,"–ú–∞—Ç–µ—Ä–∏–∞–ª"),s("th",{style:{"text-align":"right"}},"–ü–ª–æ—â–∞–¥—å (–º¬≤)")])],-1)),s("tbody",null,[(m(!0),w(J,null,xe(D(n).details,r=>(m(),w("tr",{key:r.material_name},[s("td",null,d(r.material_name),1),s("td",so,d(r.area.toFixed(2)),1)]))),128))]),s("tfoot",null,[s("tr",null,[e[139]||(e[139]=s("td",null,[s("strong",null,"–ò—Ç–æ–≥–æ:")],-1)),s("td",no,[s("strong",null,d(D(n).total_area.toFixed(2))+" –º¬≤",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024)):D(n).type==="drilling"?(m(),v(B,{key:2},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[D(n).details&&D(n).details.length>0?(m(),v(Fe,{key:0,class:"border-table"},{default:o(()=>[e[142]||(e[142]=s("thead",null,[s("tr",null,[s("th",null,"–¢–∏–ø –¥–µ—Ç–∞–ª–∏"),s("th",{style:{"text-align":"right"}},"–û—Ç–≤–µ—Ä—Å—Ç–∏–π –Ω–∞ –¥–µ—Ç–∞–ª—å"),s("th",{style:{"text-align":"right"}},"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Ç–∞–ª–µ–π"),s("th",{style:{"text-align":"right"}},"–í—Å–µ–≥–æ –æ—Ç–≤–µ—Ä—Å—Ç–∏–π")])],-1)),s("tbody",null,[(m(!0),w(J,null,xe(D(n).details,r=>(m(),w("tr",{key:r.detail_type_name},[s("td",null,d(r.detail_type_name),1),s("td",io,d(r.holes_per_piece),1),s("td",ro,d(r.quantity),1),s("td",uo,d(r.total_holes),1)]))),128))]),s("tfoot",null,[s("tr",null,[e[141]||(e[141]=s("td",{colspan:"3"},[s("strong",null,"–ò—Ç–æ–≥–æ:")],-1)),s("td",mo,[s("strong",null,d(D(n).total_holes)+" —à—Ç",1)])])])]),_:2},1024)):(m(),v(Je,{key:1,type:"info",variant:"tonal"},{default:o(()=>[u(d(D(n).message),1)]),_:2},1024))]),_:2},1024)]),_:2},1024)):(m(),v(B,{key:3},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[a(Je,{type:"info",variant:"tonal"},{default:o(()=>[u(d(D(n).message),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:2},1024)],8,Qa)])]),_:1},8,["expanded","items"])),a(E,{class:"my-4"}),a(M,null,{default:o(()=>[...e[143]||(e[143]=[u("–§—É—Ä–Ω–∏—Ç—É—Ä–∞",-1)])]),_:1}),a(k,{"prepend-icon":"mdi-plus",onClick:ul},{default:o(()=>[...e[144]||(e[144]=[u("–î–æ–±–∞–≤–∏—Ç—å —Ñ—É—Ä–Ω–∏—Ç—É—Ä—É",-1)])]),_:1}),F.value.fittings?(m(),v(de,{key:8,type:"table",class:"mt-3"})):(m(),v(me,{key:9,items:mt.value,headers:It},{"item.actions":o(({item:t})=>[a(j,{onClick:ie(n=>dl(t),["stop"]),class:"me-2"},{default:o(()=>[...e[145]||(e[145]=[u("mdi-pencil",-1)])]),_:1},8,["onClick"]),a(j,{onClick:ie(n=>pl(t),["stop"])},{default:o(()=>[...e[146]||(e[146]=[u("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["items"])),a(E,{class:"my-4"}),a(M,null,{default:o(()=>[e[147]||(e[147]=u(" –ù–æ—Ä–º–∏—Ä—É–µ–º—ã–µ —Ä–∞–±–æ—Ç—ã ",-1)),a(R),s("div",po,"–ò—Ç–æ–≥–æ: "+d((typeof Dt.value=="number"?Dt.value:0).toFixed(2))+" ‚ÇΩ",1)]),_:1}),Ve.value?(m(),v(Je,{key:10,type:"warning",variant:"tonal",class:"mb-3",closable:""},{default:o(()=>[...e[148]||(e[148]=[s("strong",null,"‚ö† –ù–µ –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏ –∏–º–µ—é—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∞–≤–∫–∏",-1),u(' ‚Äî –Ω–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—Ç–∞–≤–∫–∏" –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é. ',-1)])]),_:1})):V("",!0),a(k,{"prepend-icon":"mdi-plus",onClick:Pl,class:"mb-3"},{default:o(()=>[...e[149]||(e[149]=[u("–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É",-1)])]),_:1}),a(k,{"prepend-icon":"mdi-refresh",onClick:Sl,class:"mb-3 ms-3",variant:"outlined",loading:Oe.value,disabled:Oe.value},{default:o(()=>[...e[150]||(e[150]=[u(" –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—Ç–∞–≤–∫–∏ ",-1)])]),_:1},8,["loading","disabled"]),a(k,{"prepend-icon":Ce.value?"mdi-lock":"mdi-lock-open",onClick:El,class:"mb-3 ms-3",variant:"outlined",color:Ce.value?"success":"warning",loading:We.value,disabled:We.value},{default:o(()=>[u(d(Ce.value?"–°—Ç–∞–≤–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã":"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–≤–∫–∏"),1)]),_:1},8,["prepend-icon","color","loading","disabled"]),Ce.value?(m(),v(Q,{key:11,color:"success","text-color":"white","prepend-icon":"mdi-check-circle",class:"mb-3 ms-3"},{default:o(()=>[...e[151]||(e[151]=[u(" –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ ",-1)])]),_:1})):(m(),v(Q,{key:12,color:"warning","text-color":"white","prepend-icon":"mdi-alert-circle",class:"mb-3 ms-3"},{default:o(()=>[...e[152]||(e[152]=[u(" –ù–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ ",-1)])]),_:1})),F.value.laborWorks?(m(),v(de,{key:13,type:"table"})):(m(),v(me,{key:14,items:ee.value,headers:Ul,density:"comfortable","item-value":"id",class:"mb-4"},{"item.basis":o(({item:t})=>[u(d(t.basis||"‚Äî"),1)]),"item.hours":o(({item:t})=>[u(d(typeof t.hours=="number"?t.hours.toFixed(2):parseFloat(t.hours||0).toFixed(2)),1)]),"item.rate":o(({item:t})=>[s("div",co,d((parseFloat(t.rate_per_hour)||0).toFixed(2))+" ‚ÇΩ/—á",1)]),"item.cost":o(({item:t})=>[s("div",{style:Lt([{"text-align":"right",width:"120px"},{color:(parseFloat(t.cost_total)||0)===0&&(i.value.normohour_rate||0)>0?"#666":"inherit"}])},[s("strong",null,d((parseFloat(t.cost_total)||0).toFixed(2))+" ‚ÇΩ",1)],4)]),"item.actions":o(({item:t})=>[a(ut,{text:"–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è"},{activator:o(({props:n})=>[a(j,qt(n,{onClick:r=>Wl(t),class:"me-2",color:"info",size:"small"}),{default:o(()=>[...e[153]||(e[153]=[u(" mdi-clipboard-list ",-1)])]),_:1},16,["onClick"])]),_:2},1024),a(j,{onClick:n=>zl(t),class:"me-2",color:"primary",size:"small"},{default:o(()=>[...e[154]||(e[154]=[u(" mdi-pencil ",-1)])]),_:1},8,["onClick"]),a(j,{onClick:n=>Ol(t),color:"error",size:"small"},{default:o(()=>[...e[155]||(e[155]=[u(" mdi-delete ",-1)])]),_:1},8,["onClick"])]),"no-data":o(()=>[...e[156]||(e[156]=[s("div",{class:"text-center py-8 text-grey"}," –ú–æ–Ω—Ç–∞–∂–Ω–æ-—Å–±–æ—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã ",-1)])]),_:1},8,["items"])),a(E,{class:"my-4"}),a(M,null,{default:o(()=>[e[157]||(e[157]=u("–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã ",-1)),s("div",_o,"–ò—Ç–æ–≥–æ: "+d((Array.isArray(le.value)?le.value.reduce((t,n)=>t+(parseFloat(n.amount)||0),0):0).toFixed(2))+" ‚ÇΩ",1)]),_:1}),s("div",vo,[a(k,{"prepend-icon":"mdi-plus",onClick:hl},{default:o(()=>[...e[158]||(e[158]=[u("–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥",-1)])]),_:1})]),F.value.expenses?(m(),v(de,{key:15,type:"table"})):(m(),v(me,{key:16,items:le.value,headers:Kt},{"item.amount":o(({item:t})=>[u(d(Number(t.amount||0).toFixed(2))+" ‚ÇΩ ",1)]),"item.actions":o(({item:t})=>[a(j,{onClick:ie(n=>kl(t),["stop"]),class:"me-2"},{default:o(()=>[...e[159]||(e[159]=[u("mdi-pencil",-1)])]),_:1},8,["onClick"]),a(j,{onClick:ie(n=>Cl(t),["stop"])},{default:o(()=>[...e[160]||(e[160]=[u("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["items"])),a(E,{class:"my-4"}),a(k,{color:"secondary",onClick:xl,loading:Ae.value,disabled:Ae.value},{default:o(()=>[...e[161]||(e[161]=[u("–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),a(re,{modelValue:_e.value,"onUpdate:modelValue":e[30]||(e[30]=t=>_e.value=t),"max-width":"700"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Me.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é":"–ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è"),1)]),_:1}),a(K,null,{default:o(()=>[a(He,{ref_key:"positionForm",ref:ft},{default:o(()=>[a(te,{modelValue:b.value.detail_type_id,"onUpdate:modelValue":[e[21]||(e[21]=t=>b.value.detail_type_id=t),Yt],items:X.value,"item-title":"name","item-value":"id",label:"–¢–∏–ø –¥–µ—Ç–∞–ª–∏",clearable:"",density:"comfortable",class:"mb-3"},{"append-inner":o(()=>[a(k,{icon:"mdi-plus",size:"x-small",variant:"tonal",color:"primary",onClick:ie(Il,["stop"]),title:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –¥–µ—Ç–∞–ª–∏"})]),"append-item":o(()=>[a($e,{onClick:e[20]||(e[20]=t=>l.$router.push("/detail-types"))},{default:o(()=>[a(Tt,null,{default:o(()=>[...e[162]||(e[162]=[u("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞–º–∏",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","items"]),a(te,{modelValue:b.value.material_id,"onUpdate:modelValue":[e[22]||(e[22]=t=>b.value.material_id=t),el],items:Wt.value,"item-title":"name","item-value":"id",label:"–ü–ª–∏—Ç–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª",rules:[t=>!!t||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],density:"comfortable",class:"mb-3"},{item:o(({props:t,item:n})=>[a($e,Re(Be(t)),{default:o(()=>[n.raw.origin==="parser"?(m(),v(Ge,{key:0,class:"text-blue"},{default:o(()=>[...e[163]||(e[163]=[u(" –°–∏—Å—Ç–µ–º–Ω—ã–π (—Å–ø–∞—Ä—Å–µ–Ω–æ) ",-1)])]),_:1})):(m(),v(Ge,{key:1,class:"text-grey"},{default:o(()=>[...e[164]||(e[164]=[u(" –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π ",-1)])]),_:1}))]),_:2},1040)]),_:1},8,["modelValue","items","rules"]),a(B,null,{default:o(()=>[a(P,{cols:"6"},{default:o(()=>[a(y,{modelValue:b.value.width,"onUpdate:modelValue":e[23]||(e[23]=t=>b.value.width=t),modelModifiers:{number:!0},label:"–®–∏—Ä–∏–Ω–∞, –º–º",type:"number",rules:[t=>t>0||"–î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0"],density:"comfortable"},null,8,["modelValue","rules"])]),_:1}),a(P,{cols:"6"},{default:o(()=>[a(y,{modelValue:b.value.length,"onUpdate:modelValue":e[24]||(e[24]=t=>b.value.length=t),modelModifiers:{number:!0},label:"–î–ª–∏–Ω–∞, –º–º",type:"number",rules:[t=>t>0||"–î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0"],density:"comfortable"},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(y,{modelValue:b.value.quantity,"onUpdate:modelValue":e[25]||(e[25]=t=>b.value.quantity=t),modelModifiers:{number:!0},label:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ",type:"number",min:1,rules:[t=>t>=1||"–ú–∏–Ω–∏–º—É–º 1"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(te,{modelValue:b.value.edge_scheme,"onUpdate:modelValue":[e[26]||(e[26]=t=>b.value.edge_scheme=t),tl],items:vt,"item-title":"label","item-value":"value",label:"–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ—Ä—Ü–æ–≤",disabled:!!b.value.detail_type_id,density:"comfortable",class:"mb-3"},{selection:o(({item:t})=>[a(Q,{size:"small"},{default:o(()=>[a(j,{start:"",size:"16"},{default:o(()=>[u(d(t.raw.icon),1)]),_:2},1024),u(" "+d(t.raw.label),1)]),_:2},1024)]),item:o(({props:t,item:n})=>[a($e,Re(Be(t)),{prepend:o(()=>[a(j,null,{default:o(()=>[u(d(n.raw.icon),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","disabled"]),b.value.edge_scheme&&b.value.edge_scheme!=="none"?(m(),v(te,{key:0,modelValue:b.value.edge_material_id,"onUpdate:modelValue":[e[27]||(e[27]=t=>b.value.edge_material_id=t),ll],items:Rt.value,"item-title":"name","item-value":"id",label:"–ú–∞—Ç–µ—Ä–∏–∞–ª –∫—Ä–æ–º–∫–∏",rules:[t=>!!t||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],density:"comfortable",class:"mb-3"},null,8,["modelValue","items","rules"])):V("",!0),a(y,{modelValue:b.value.custom_name,"onUpdate:modelValue":e[28]||(e[28]=t=>b.value.custom_name=t),label:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",hint:"–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–ü–æ–ª–∫–∞ –ª–µ–≤–∞—è¬ª","persistent-hint":"",density:"comfortable"},null,8,["modelValue"])]),_:1},512)]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:e[29]||(e[29]=t=>_e.value=!1)},{default:o(()=>[...e[165]||(e[165]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:nl},{default:o(()=>[...e[166]||(e[166]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:ve.value,"onUpdate:modelValue":e[38]||(e[38]=t=>ve.value=t),"max-width":"600"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(qe.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É—Ä–Ω–∏—Ç—É—Ä—É":"–ù–æ–≤–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞"),1)]),_:1}),a(K,null,{default:o(()=>[a(y,{modelValue:$.value.name,"onUpdate:modelValue":e[31]||(e[31]=t=>$.value.name=t),label:"–ù–∞–∑–≤–∞–Ω–∏–µ",required:""},null,8,["modelValue"]),a(y,{modelValue:$.value.article,"onUpdate:modelValue":e[32]||(e[32]=t=>$.value.article=t),label:"–ê—Ä—Ç–∏–∫—É–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"},null,8,["modelValue"]),a(te,{modelValue:$.value.unit,"onUpdate:modelValue":e[33]||(e[33]=t=>$.value.unit=t),items:he.value,label:"–ï–¥. –∏–∑–º.",rules:[t=>!!t||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],density:"comfortable",class:"mb-3",clearable:""},null,8,["modelValue","items","rules"]),a(y,{modelValue:$.value.quantity,"onUpdate:modelValue":e[34]||(e[34]=t=>$.value.quantity=t),modelModifiers:{number:!0},label:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ",type:"number"},null,8,["modelValue"]),a(y,{modelValue:$.value.unit_price,"onUpdate:modelValue":e[35]||(e[35]=t=>$.value.unit_price=t),modelModifiers:{number:!0},label:"–¶–µ–Ω–∞ –∑–∞ —à—Ç, ‚ÇΩ",type:"number"},null,8,["modelValue"]),a(pe,{modelValue:$.value.note,"onUpdate:modelValue":e[36]||(e[36]=t=>$.value.note=t),label:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:e[37]||(e[37]=t=>ve.value=!1)},{default:o(()=>[...e[167]||(e[167]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:ml},{default:o(()=>[...e[168]||(e[168]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:fe.value,"onUpdate:modelValue":e[43]||(e[43]=t=>fe.value=t),"max-width":"600"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Le.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥":"–ù–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥"),1)]),_:1}),a(K,null,{default:o(()=>[a(y,{modelValue:O.value.name,"onUpdate:modelValue":e[39]||(e[39]=t=>O.value.name=t),label:"–ù–∞–∑–≤–∞–Ω–∏–µ",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –î–æ—Å—Ç–∞–≤–∫–∞, –ú–æ–Ω—Ç–∞–∂, –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",required:"",class:"mb-3"},null,8,["modelValue"]),a(pe,{modelValue:O.value.description,"onUpdate:modelValue":e[40]||(e[40]=t=>O.value.description=t),label:"–û–ø–∏—Å–∞–Ω–∏–µ",placeholder:"–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—Ö–æ–¥–∞",rows:"3",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:O.value.amount,"onUpdate:modelValue":e[41]||(e[41]=t=>O.value.amount=t),modelModifiers:{number:!0},label:"–°—É–º–º–∞, ‚ÇΩ",type:"number",step:"0.01",min:"0"},null,8,["modelValue"])]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:e[42]||(e[42]=t=>fe.value=!1)},{default:o(()=>[...e[169]||(e[169]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:Vl},{default:o(()=>[...e[170]||(e[170]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:Ye.value,"onUpdate:modelValue":e[47]||(e[47]=t=>Ye.value=t),"max-width":"700"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[e[171]||(e[171]=u(" –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ ",-1)),ae.value?(m(),w("span",fo," ("+d(ae.value==="plate"?"–ü–ª–∏—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã":ae.value==="edge"?"–ö—Ä–æ–º–∫–∞":"–û–ø–µ—Ä–∞—Ü–∏–∏")+") ",1)):V("",!0)]),_:1}),a(K,{class:"mt-4"},{default:o(()=>[a(y,{modelValue:A.value.title,"onUpdate:modelValue":e[44]||(e[44]=t=>A.value.title=t),label:"–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–ø–∏—Å–∞–Ω–∏—è",variant:"outlined",density:"compact",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞, –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ, –£—Å–ª–æ–≤–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è",counter:"100",maxlength:"100",class:"mb-3"},null,8,["modelValue"]),a(pe,{modelValue:A.value.text,"onUpdate:modelValue":e[45]||(e[45]=t=>A.value.text=t),label:"–¢–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è",variant:"outlined",rows:"4",placeholder:"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è (–º–∞–∫—Å–∏–º—É–º 3000 —Å–∏–º–≤–æ–ª–æ–≤, HTML —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)",counter:"3000",maxlength:"3000",onInput:e[46]||(e[46]=t=>A.value.text=Y(A.value.text)),onPaste:yl,class:"mb-2"},null,8,["modelValue"]),A.value.text.length>0?(m(),w("div",go," –°–∏–º–≤–æ–ª–æ–≤: "+d(A.value.text.length)+"/3000 ",1)):V("",!0)]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:kt},{default:o(()=>[...e[172]||(e[172]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:gl},{default:o(()=>[...e[173]||(e[173]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:Xe.value,"onUpdate:modelValue":e[55]||(e[55]=t=>Xe.value=t),"max-width":"700"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Ze.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫":"–î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—Ç–∞–≤–∫–∏"),1)]),_:1}),a(K,{class:"mt-4"},{default:o(()=>[a(y,{modelValue:x.value.source,"onUpdate:modelValue":e[48]||(e[48]=t=>x.value.source=t),label:"–ò—Å—Ç–æ—á–Ω–∏–∫ *",variant:"outlined",density:"compact",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: hh.ru, Avito, –ò–Ω–¥–µ–∫—Å –∑–∞—Ä–ø–ª–∞—Ç, –û–ø—Ä–æ—Å –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤",counter:"255",maxlength:"255",error:!!I.value.source,"error-messages":I.value.source?[I.value.source]:[],class:"mb-3"},null,8,["modelValue","error","error-messages"]),a(y,{modelValue:x.value.position_profile,"onUpdate:modelValue":e[49]||(e[49]=t=>x.value.position_profile=t),label:"–ü—Ä–æ—Ñ–∏–ª—å –¥–æ–ª–∂–Ω–æ—Å—Ç–∏",variant:"outlined",density:"compact",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –°–±–æ—Ä—â–∏–∫ –º–µ–±–µ–ª–∏, –ü–ª–æ—Ç–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 3, –ú–æ–Ω—Ç–∞–∂–Ω–∏–∫",counter:"255",maxlength:"255",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:x.value.salary_range,"onUpdate:modelValue":e[50]||(e[50]=t=>x.value.salary_range=t),label:"–ó–∞—Ä–ø–ª–∞—Ç–∞/–≤–∏–ª–∫–∞",variant:"outlined",density:"compact",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: 1000-1200 ‚ÇΩ/—á –∏–ª–∏ 75000-85000 ‚ÇΩ/–º–µ—Å—è—Ü",counter:"255",maxlength:"255",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:x.value.period,"onUpdate:modelValue":e[51]||(e[51]=t=>x.value.period=t),label:"–ü–µ—Ä–∏–æ–¥",variant:"outlined",density:"compact",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: —è–Ω–≤–∞—Ä—è 2026, –∫–≤–∞—Ä—Ç–∞–ª 4 2025",counter:"50",maxlength:"50",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:x.value.link,"onUpdate:modelValue":e[52]||(e[52]=t=>x.value.link=t),label:"–°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫",variant:"outlined",density:"compact",placeholder:"https://hh.ru/...",counter:"1000",maxlength:"1000",onBlur:e[53]||(e[53]=t=>x.value.link=x.value.link?x.value.link.trim():null),error:!!I.value.link,"error-messages":I.value.link?[I.value.link]:[],class:"mb-3"},null,8,["modelValue","error","error-messages"]),a(pe,{modelValue:x.value.note,"onUpdate:modelValue":e[54]||(e[54]=t=>x.value.note=t),label:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ",variant:"outlined",rows:"2",placeholder:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏—Å—Ç–æ—á–Ω–∏–∫–µ",counter:"1000",maxlength:"1000",class:"mb-2"},null,8,["modelValue"]),x.value.note?(m(),w("div",yo," –°–∏–º–≤–æ–ª–æ–≤: "+d(x.value.note.length)+"/1000 ",1)):V("",!0),e[174]||(e[174]=s("div",{class:"text-caption text-orange"}," * ‚Äî –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ",-1))]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:Ct},{default:o(()=>[...e[175]||(e[175]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:wl},{default:o(()=>[...e[176]||(e[176]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(re,{modelValue:ge.value,"onUpdate:modelValue":e[60]||(e[60]=t=>ge.value=t),"max-width":"600"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Pe.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é":"–ù–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è"),1)]),_:1}),a(K,null,{default:o(()=>[a(te,{modelValue:W.value.operation_id,"onUpdate:modelValue":e[56]||(e[56]=t=>W.value.operation_id=t),items:Ft.value,"item-title":"name","item-value":"id",label:"–û–ø–µ—Ä–∞—Ü–∏—è",rules:[t=>!!t||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],density:"comfortable","return-object":"",class:"mb-3"},{item:o(({props:t,item:n})=>[a($e,Re(Be(t)),{default:o(()=>[a(Ge,null,{default:o(()=>[u(d(n.raw.category),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","rules"]),a(y,{modelValue:W.value.quantity,"onUpdate:modelValue":e[57]||(e[57]=t=>W.value.quantity=t),modelModifiers:{number:!0},label:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ",type:"number",min:"0.01",step:"0.01",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:W.value.note,"onUpdate:modelValue":e[58]||(e[58]=t=>W.value.note=t),label:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",density:"comfortable"},null,8,["modelValue"])]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:e[59]||(e[59]=t=>ge.value=!1)},{default:o(()=>[...e[177]||(e[177]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:ql},{default:o(()=>[...e[178]||(e[178]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:ye.value,"onUpdate:modelValue":e[67]||(e[67]=t=>ye.value=t),"max-width":"600"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(H.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É":"–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É"),1)]),_:1}),a(K,null,{default:o(()=>[a(He,{ref_key:"laborWorkFormRef",ref:Ut,onSubmit:ie(jt,["prevent"])},{default:o(()=>[a(y,{modelValue:U.value.title,"onUpdate:modelValue":e[61]||(e[61]=t=>U.value.title=t),label:"–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã",rules:[t=>!!t||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=>t&&t.length<=255||"–ú–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(y,{modelValue:U.value.basis,"onUpdate:modelValue":e[62]||(e[62]=t=>U.value.basis=t),label:"–û—Å–Ω–æ–≤–∞–Ω–∏–µ (–ì–û–°–¢/–¢–£)",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ø. 5.2.4 –ì–û–°–¢ 16371-2014",rules:[t=>!t||t.length<=500||"–ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(y,{modelValue:U.value.hours,"onUpdate:modelValue":e[63]||(e[63]=t=>U.value.hours=t),modelModifiers:{number:!0},label:"–ù–æ—Ä–º–∞, —á",type:"number",min:"0",step:"0.25",readonly:H.value&&H.value.hours_source==="from_steps",rules:[t=>t!=null&&t!==""||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=>t>=0||"–ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 0",t=>t<=999.99||"–ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 999.99"],density:"comfortable",class:"mb-3"},Kl({_:2},[H.value&&H.value.hours_source==="from_steps"?{name:"hint",fn:o(()=>[e[179]||(e[179]=u(' ‚ö†Ô∏è –ü–æ–ª–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –ß–∞—Å—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–π. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –≤ "–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏". ',-1))]),key:"0"}:void 0]),1032,["modelValue","readonly","rules"]),a(ta,{modelValue:U.value.position_profile_id,"onUpdate:modelValue":e[64]||(e[64]=t=>U.value.position_profile_id=t),label:"–ü—Ä–æ—Ñ–∏–ª—å –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",items:$t.value,"item-title":"name","item-value":"id",placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞–≤–∫–∏...",density:"comfortable",class:"mb-3",clearable:""},null,8,["modelValue","items"]),a(pe,{modelValue:U.value.note,"onUpdate:modelValue":e[65]||(e[65]=t=>U.value.note=t),label:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",placeholder:"–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Ä–∞–±–æ—Ç—É, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è...",rules:[t=>!t||t.length<=5e3||"–ú–∞–∫—Å–∏–º—É–º 5000 —Å–∏–º–≤–æ–ª–æ–≤"],rows:"3",density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),U.value.hours?(m(),v(Je,{key:0,type:"info",variant:"tonal",class:"mb-3"},{default:o(()=>[i.value.normohour_rate?(m(),w("div",bo,[e[180]||(e[180]=s("strong",null,"–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞:",-1)),u(" "+d((U.value.hours*(i.value.normohour_rate||0)).toFixed(2))+" ‚ÇΩ ",1),s("div",wo," ("+d(U.value.hours.toFixed(2))+" —á √ó "+d((i.value.normohour_rate||0).toFixed(2))+" ‚ÇΩ/—á) ",1),e[181]||(e[181]=s("div",{class:"text-caption mt-2",style:{"font-style":"italic"}}," * –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞–≤–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è ",-1))])):(m(),w("div",xo," –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –ø–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞–≤–æ–∫ "))]),_:1})):V("",!0)]),_:1},512)]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:e[66]||(e[66]=t=>ye.value=!1)},{default:o(()=>[...e[182]||(e[182]=[u("–û—Ç–º–µ–Ω–∞",-1)])]),_:1}),a(k,{color:"primary",onClick:jt,loading:ot.value},{default:o(()=>[...e[183]||(e[183]=[u("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:ze.value,"onUpdate:modelValue":e[74]||(e[74]=t=>ze.value=t),"max-width":"700"},{default:o(()=>[a(G,null,{default:o(()=>[a(M,null,{default:o(()=>[u(" üìã –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è: "+d(be.value?.title),1)]),_:1}),a(K,{class:"pa-4"},{default:o(()=>[we.value.length>0?(m(),w("div",ho,[a(la,null,{default:o(()=>[(m(!0),w(J,null,xe(we.value,(t,n)=>(m(),v($e,{key:t.id,class:"mb-2"},{prepend:o(()=>[a(Q,{size:"small",variant:"outlined"},{default:o(()=>[u(d(n+1),1)]),_:2},1024)]),append:o(()=>[s("div",Co,[s("div",Fo,d(t.hours.toFixed(2))+"—á",1),a(j,{onClick:r=>Bl(t),size:"small",color:"error"},{default:o(()=>[...e[184]||(e[184]=[u(" mdi-delete ",-1)])]),_:1},8,["onClick"])])]),default:o(()=>[a(Tt,null,{default:o(()=>[u(d(t.title),1)]),_:2},1024),t.basis||t.input_data?(m(),v(Ge,{key:0},{default:o(()=>[t.input_data?(m(),w("div",ko,"üì¶ "+d(t.input_data),1)):V("",!0),t.basis?(m(),w("div",Vo,"üìÑ "+d(t.basis),1)):V("",!0)]),_:2},1024)):V("",!0)]),_:2},1024))),128))]),_:1})])):(m(),w("div",$o," –ù–µ—Ç –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏–π ")),a(E,{class:"my-4"}),s("div",Uo,[e[185]||(e[185]=s("span",{class:"text-subtitle-1 font-weight-bold"},"–ò—Ç–æ–≥–æ —á–∞—Å–æ–≤:",-1)),a(Q,{color:"primary","text-color":"white",size:"large"},{default:o(()=>[u(d($l.value.toFixed(2))+" —á ",1)]),_:1})]),a(He,{onSubmit:ie(Rl,["prevent"]),class:"mt-4"},{default:o(()=>[a(E,{class:"mb-4"}),a(rt,null,{default:o(()=>[...e[186]||(e[186]=[u("–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏—é",-1)])]),_:1}),a(y,{modelValue:N.value.title,"onUpdate:modelValue":e[68]||(e[68]=t=>N.value.title=t),label:"–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞",rules:[t=>!!t||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(y,{modelValue:N.value.basis,"onUpdate:modelValue":e[69]||(e[69]=t=>N.value.basis=t),label:"–û—Å–Ω–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ø. 3.1",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:N.value.input_data,"onUpdate:modelValue":e[70]||(e[70]=t=>N.value.input_data=t),label:"–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: 1 —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, 6 –º–æ–¥—É–ª–µ–π",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:N.value.hours,"onUpdate:modelValue":e[71]||(e[71]=t=>N.value.hours=t),modelModifiers:{number:!0},label:"–ß–∞—Å—ã –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞",type:"number",min:"0",step:"0.25",rules:[t=>t!=null&&t!==""||"–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=>t>=0||"–ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 0"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(pe,{modelValue:N.value.note,"onUpdate:modelValue":e[72]||(e[72]=t=>N.value.note=t),label:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",rows:"2",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(k,{type:"submit",color:"success","prepend-icon":"mdi-plus",block:"",loading:st.value},{default:o(()=>[...e[187]||(e[187]=[u(" –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–æ–ø–µ—Ä–∞—Ü–∏—é ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),a(ue,null,{default:o(()=>[a(R),a(k,{onClick:e[73]||(e[73]=t=>ze.value=!1)},{default:o(()=>[...e[188]||(e[188]=[u("–ó–∞–∫—Ä—ã—Ç—å",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ql,{modelValue:ce.value.show,"onUpdate:modelValue":e[75]||(e[75]=t=>ce.value.show=t),timeout:ce.value.timeout,color:ce.value.color,location:"bottom right"},{default:o(()=>[u(d(ce.value.message),1)]),_:1},8,["modelValue","timeout","color"])],64))}}),Ao=Et(Do,[["__scopeId","data-v-0cc93fd2"]]);export{Ao as default};
