import{be as Ie,r as u,f as R,ac as Me,bg as v,G as a,D as t,bi as i,z as n,aB as r,C as $,bj as I,bD as ne,a9 as ue,F as d}from"./vendor-Cu69IzCA.js";import{L as Se,M as Te,t as O,k as _,N as re,o as g,O as de,i as m,b as f,d as c,f as y,m as X,B as me,h as M,j as ve,a as w,c as S,n as pe,q as qe,e as fe,P as Fe,Q as _e,F as Be,J as ye,g as j,_ as We}from"./index-BbPvUMNu.js";const he={class:"work-profiles-view"},Ne={class:"d-flex align-center justify-space-between mb-4"},Oe={class:"text-h6"},je={class:"text-h6"},Ae={class:"text-h6"},Le={class:"text-h6"},Ge={key:0},Qe={key:1,class:"text-grey"},Ee={class:"font-weight-medium"},He={key:0,class:"text-caption text-grey"},Je={key:0},Ke={key:1,class:"text-grey"},Xe={class:"font-weight-medium"},Ye={class:"font-weight-medium"},Ze={key:1,class:"text-grey"},el=["title"],ll={key:1,class:"text-grey"},al={class:"d-flex gap-2"},tl={class:"text-center py-8"},ol={class:"mb-4"},sl={class:"d-flex align-center justify-space-between mb-4"},il={class:"font-weight-medium"},nl=["title"],ul={key:1,class:"text-grey"},rl={class:"d-flex gap-2"},dl={class:"text-center py-8"},ml=Ie({__name:"WorkProfilesView",setup(vl){const V=u([]),Y=u([]),A=u([]),L=u([]),x=u(!1),C=u(!1),G=u(!1),Q=u(!1),b=u(null),T=u(""),q=u(null),E=u(!0),F=u(null),Z=u(),B=u("sources"),k=u(!1),P=u(!1),H=u(!1),J=u(!1),U=u(null),z=u(null),ee=u(),p=u({name:"",description:"",sort_order:0}),s=u({region_id:null,position_profile_id:null,source:"",type:"single",salary_value:null,salary_value_min:null,salary_value_max:null,hours_per_month:160,source_date:new Date().toISOString().split("T")[0],link:"",note:"",is_active:!0}),ce=[{title:"Регион",key:"region_name",width:"120px"},{title:"Источник",key:"source",width:"150px"},{title:"Профиль должности",key:"position_profile_name",width:"150px"},{title:"Зарплата",key:"salary_display",width:"140px"},{title:"Ставка/час",key:"rate_display",width:"120px"},{title:"Часы/мес",key:"hours_per_month",width:"100px",align:"center"},{title:"Ссылка",key:"link",width:"80px",align:"center",sortable:!1},{title:"Примечание",key:"note",width:"150px"},{title:"Статус",key:"is_active",width:"100px"},{title:"",key:"actions",width:"80px",sortable:!1}],ge=[{title:"Название",key:"name",width:"300px"},{title:"Описание",key:"description",width:"400px"},{title:"Порядок сортировки",key:"sort_order",width:"150px",align:"center"},{title:"",key:"actions",width:"80px",sortable:!1}],Ve=R(()=>new Set(V.value.map(o=>o.region_id))),xe=R(()=>new Set(V.value.filter(o=>o.position_profile_id).map(o=>o.position_profile_id))),le=R(()=>{if(s.value.type==="single"&&s.value.salary_value){const o=s.value.hours_per_month||160;return Math.round(s.value.salary_value/o)}return null}),be=R(()=>{if(s.value.type==="range"&&s.value.salary_value_min){const o=s.value.hours_per_month||160;return Math.round(s.value.salary_value_min/o)}return null}),ke=R(()=>{if(s.value.type==="range"&&s.value.salary_value_max){const o=s.value.hours_per_month||160;return Math.round(s.value.salary_value_max/o)}return null}),D=async()=>{try{const o=await _.get("/api/global-normohour-sources");V.value=o.data.data||[],W()}catch(o){console.error("Ошибка загрузки профилей работ:",o)}},we=async()=>{try{const o=await _.get("/api/regions");A.value=(o.data.data||o.data||[]).sort((e,l)=>(e.region_name||"").localeCompare(l.region_name||""))}catch(o){console.error("Ошибка загрузки регионов:",o)}},K=async()=>{try{const o=await _.get("/api/position-profiles");L.value=o.data.data||o.data||[]}catch(o){console.error("Ошибка загрузки профилей должностей:",o)}},W=()=>{let o=V.value;if(T.value){const e=T.value.toLowerCase();o=o.filter(l=>l.source.toLowerCase().includes(e)||l.note&&l.note.toLowerCase().includes(e))}q.value&&(o=o.filter(e=>e.region_id===q.value)),E.value&&(o=o.filter(e=>e.is_active)),Y.value=o},ae=()=>{s.value.type==="single"?(s.value.salary_value_min=null,s.value.salary_value_max=null):s.value.salary_value=null},h=()=>{},te=()=>{b.value=null,s.value={region_id:null,position_profile_id:null,source:"",type:"single",salary_value:null,salary_value_min:null,salary_value_max:null,hours_per_month:160,source_date:new Date().toISOString().split("T")[0],link:"",note:"",is_active:!0},x.value=!0},Ce=o=>{b.value=o.id,s.value={region_id:o.region_id,position_profile_id:o.position_profile_id||null,source:o.source,type:o.is_range?"range":"single",salary_value:o.is_range?null:o.salary_value||null,salary_value_min:o.is_range&&o.salary_value_min||null,salary_value_max:o.is_range&&o.salary_value_max||null,hours_per_month:o.hours_per_month||160,source_date:o.source_date||new Date().toISOString().split("T")[0],link:o.link||"",note:o.note||"",is_active:o.is_active},x.value=!0},oe=async()=>{if(Z.value?.validate()){G.value=!0;try{const o={region_id:s.value.region_id,position_profile_id:s.value.position_profile_id||null,source:s.value.source,type:s.value.type,salary_value:s.value.salary_value||null,salary_value_min:s.value.salary_value_min||null,salary_value_max:s.value.salary_value_max||null,hours_per_month:s.value.hours_per_month||160,source_date:s.value.source_date,link:s.value.link||null,note:s.value.note||null,is_active:s.value.is_active};b.value?await _.put(`/api/global-normohour-sources/${b.value}`,o):await _.post("/api/global-normohour-sources",o),x.value=!1,await D()}catch(o){console.error("Ошибка сохранения:",o),alert("Ошибка сохранения источника профиля работ")}finally{G.value=!1}}},Pe=async o=>{try{await _.get(`/api/global-normohour-sources/${o.id}/toggle-active`),await D()}catch(e){console.error("Ошибка изменения активности:",e)}},Ue=o=>{F.value=o,C.value=!0},ze=async()=>{if(F.value){Q.value=!0;try{await _.delete(`/api/global-normohour-sources/${F.value.id}`),C.value=!1,await D()}catch(o){console.error("Ошибка удаления:",o),alert("Ошибка удаления источника профиля работ")}finally{Q.value=!1}}},se=()=>{U.value=null,p.value={name:"",description:"",sort_order:0},k.value=!0},De=o=>{U.value=o.id,p.value={name:o.name,description:o.description||"",sort_order:o.sort_order||0},k.value=!0},ie=async()=>{if(ee.value?.validate()){H.value=!0;try{const o={name:p.value.name,description:p.value.description||null,sort_order:p.value.sort_order||0};U.value?await _.put(`/api/position-profiles/${U.value}`,o):await _.post("/api/position-profiles",o),k.value=!1,await K()}catch(o){console.error("Ошибка сохранения профиля должности:",o),alert("Ошибка сохранения профиля должности")}finally{H.value=!1}}},Re=o=>{z.value=o,P.value=!0},$e=async()=>{if(z.value){J.value=!0;try{await _.delete(`/api/position-profiles/${z.value.id}`),P.value=!1,await K()}catch(o){console.error("Ошибка удаления профиля должности:",o),alert("Ошибка удаления профиля должности")}finally{J.value=!1}}};return Me(async()=>{await D(),await we(),await K()}),(o,e)=>(d(),v("div",he,[a(Se,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=l=>B.value=l),class:"mb-4"},{default:t(()=>[a(re,{value:"sources"},{default:t(()=>[a(g,{class:"mr-2"},{default:t(()=>[...e[28]||(e[28]=[i("mdi-chart-box-outline",-1)])]),_:1}),e[29]||(e[29]=i(" Источники нормо-часов ",-1))]),_:1}),a(re,{value:"profiles"},{default:t(()=>[a(g,{class:"mr-2"},{default:t(()=>[...e[30]||(e[30]=[i("mdi-briefcase-outline",-1)])]),_:1}),e[31]||(e[31]=i(" Профили должностей ",-1))]),_:1})]),_:1},8,["modelValue"]),a(Te,{modelValue:B.value,"onUpdate:modelValue":e[20]||(e[20]=l=>B.value=l)},{default:t(()=>[a(de,{value:"sources"},{default:t(()=>[n("div",Ne,[e[33]||(e[33]=n("h1",{class:"text-h5"},"Профили работ (Нормо-часы)",-1)),a(m,{color:"primary","prepend-icon":"mdi-plus",onClick:te},{default:t(()=>[...e[32]||(e[32]=[i(" Добавить источник ",-1)])]),_:1})]),a(f,{class:"mb-4",elevation:"0",variant:"outlined"},{default:t(()=>[a(c,{class:"d-flex gap-3 align-center flex-wrap"},{default:t(()=>[a(y,{modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=l=>T.value=l),placeholder:"Поиск по источнику...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"250px"},onInput:W},null,8,["modelValue"]),a(X,{modelValue:q.value,"onUpdate:modelValue":[e[2]||(e[2]=l=>q.value=l),W],items:A.value,"item-title":"region_name","item-value":"id",placeholder:"Фильтр по регионам",variant:"outlined",density:"compact","hide-details":"",clearable:"",style:{"max-width":"250px"}},null,8,["modelValue","items"]),a(me,{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=l=>E.value=l),label:"Только активные",density:"compact","hide-details":"",onChange:W},null,8,["modelValue"]),a(M),a(m,{icon:"",size:"small",variant:"text",onClick:D,title:"Обновить"},{default:t(()=>[a(g,null,{default:t(()=>[...e[34]||(e[34]=[i("mdi-refresh",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(ve,{class:"mb-4"},{default:t(()=>[a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{elevation:"0",variant:"outlined"},{default:t(()=>[a(c,null,{default:t(()=>[e[35]||(e[35]=n("div",{class:"text-caption text-grey"},"Всего источников",-1)),n("div",Oe,r(V.value.length),1)]),_:1})]),_:1})]),_:1}),a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{elevation:"0",variant:"outlined"},{default:t(()=>[a(c,null,{default:t(()=>[e[36]||(e[36]=n("div",{class:"text-caption text-grey"},"Активных",-1)),n("div",je,r(V.value.filter(l=>l.is_active).length),1)]),_:1})]),_:1})]),_:1}),a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{elevation:"0",variant:"outlined"},{default:t(()=>[a(c,null,{default:t(()=>[e[37]||(e[37]=n("div",{class:"text-caption text-grey"},"Регионов",-1)),n("div",Ae,r(Ve.value.size),1)]),_:1})]),_:1})]),_:1}),a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{elevation:"0",variant:"outlined"},{default:t(()=>[a(c,null,{default:t(()=>[e[38]||(e[38]=n("div",{class:"text-caption text-grey"},"Профилей должностей",-1)),n("div",Le,r(xe.value.size),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{elevation:"0",variant:"outlined"},{default:t(()=>[a(S,{class:"pb-0"},{default:t(()=>[...e[39]||(e[39]=[i("Источники нормо-часов",-1)])]),_:1}),a(pe,{items:Y.value,headers:ce,"item-value":"id",density:"comfortable",class:"mb-4","items-per-page":25},{"item.region_name":t(({item:l})=>[l.region_name?(d(),v("span",Ge,r(l.region_name),1)):(d(),v("span",Qe,"—"))]),"item.source":t(({item:l})=>[n("div",Ee,r(l.source),1),l.source_date_formatted?(d(),v("div",He,r(l.source_date_formatted),1)):I("",!0)]),"item.position_profile_name":t(({item:l})=>[l.position_profile_name?(d(),v("span",Je,r(l.position_profile_name),1)):(d(),v("span",Ke,"—"))]),"item.salary_display":t(({item:l})=>[n("div",Xe,r(l.salary_display),1)]),"item.rate_display":t(({item:l})=>[n("div",Ye,r(l.rate_display),1)]),"item.hours_per_month":t(({item:l})=>[i(r(l.hours_per_month),1)]),"item.link":t(({item:l})=>[l.link?(d(),$(m,{key:0,icon:"",size:"small",variant:"text",href:l.link,target:"_blank",title:"Открыть ссылку"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[40]||(e[40]=[i("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])):(d(),v("span",Ze,"—"))]),"item.note":t(({item:l})=>[l.note?(d(),v("span",{key:0,title:l.note,class:"text-truncate"},r(l.note),9,el)):(d(),v("span",ll,"—"))]),"item.is_active":t(({item:l})=>[a(qe,{color:l.is_active?"success":"grey",size:"small",onClick:N=>Pe(l),style:{cursor:"pointer"}},{default:t(()=>[i(r(l.is_active?"Активен":"Неактивен"),1)]),_:2},1032,["color","onClick"])]),"item.actions":t(({item:l})=>[n("div",al,[a(m,{icon:"",size:"small",variant:"text",color:"primary",onClick:N=>Ce(l),title:"Редактировать"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[41]||(e[41]=[i("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),a(m,{icon:"",size:"small",variant:"text",color:"error",onClick:N=>Ue(l),title:"Удалить"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[42]||(e[42]=[i("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]),"no-data":t(()=>[n("div",tl,[e[44]||(e[44]=n("div",{class:"text-grey mb-3"},"Источники не найдены",-1)),a(m,{color:"primary",variant:"text",onClick:te},{default:t(()=>[...e[43]||(e[43]=[i(" Добавить первый источник ",-1)])]),_:1})])]),_:2},1032,["items"])]),_:1}),a(O,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=l=>x.value=l),"max-width":"700",scrollable:""},{default:t(()=>[a(f,null,{default:t(()=>[a(S,null,{default:t(()=>[i(r(b.value?"Редактировать источник нормо-часов":"Новый источник нормо-часов"),1)]),_:1}),a(c,{class:"mt-4"},{default:t(()=>[a(fe,{ref_key:"formRef",ref:Z,onSubmit:ne(oe,["prevent"])},{default:t(()=>[a(X,{modelValue:s.value.region_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.region_id=l),items:A.value,"item-title":"region_name","item-value":"id",label:"Регион*",variant:"outlined",density:"compact",required:"",class:"mb-4",rules:[l=>!!l||"Регион обязателен"]},null,8,["modelValue","items","rules"]),a(X,{modelValue:s.value.position_profile_id,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.position_profile_id=l),items:L.value,"item-title":"name","item-value":"id",label:"Профиль должности",variant:"outlined",density:"compact",clearable:"",class:"mb-4"},null,8,["modelValue","items"]),a(y,{modelValue:s.value.source,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.source=l),label:"Источник*",placeholder:"Например: hh.ru",variant:"outlined",density:"compact",required:"",class:"mb-4",rules:[l=>!!l||"Источник обязателен"]},null,8,["modelValue","rules"]),n("div",ol,[e[45]||(e[45]=n("label",{class:"text-subtitle-2 d-block mb-2"},"Тип ставки*",-1)),a(Fe,{modelValue:s.value.type,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.type=l),inline:"",required:""},{default:t(()=>[a(_e,{value:"single",label:"Одно значение",onChange:ae}),a(_e,{value:"range",label:"Диапазон (от - до)",onChange:ae})]),_:1},8,["modelValue"])]),s.value.type==="single"?(d(),$(y,{key:0,modelValue:s.value.salary_value,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.salary_value=l),modelModifiers:{number:!0},label:"Зарплата (₽)*",placeholder:"Например: 100000",variant:"outlined",density:"compact",type:"number",required:"",class:"mb-4",rules:[l=>!!l||"Зарплата обязательна",l=>l>0||"Зарплата должна быть больше 0"],onInput:h},null,8,["modelValue","rules"])):I("",!0),s.value.type==="range"?(d(),$(ve,{key:1,class:"mb-4"},{default:t(()=>[a(w,{cols:"12",sm:"6"},{default:t(()=>[a(y,{modelValue:s.value.salary_value_min,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.salary_value_min=l),modelModifiers:{number:!0},label:"От (₽)*",placeholder:"Например: 100000",variant:"outlined",density:"compact",type:"number",required:"",rules:[l=>!!l||"Минимум обязателен",l=>l>0||"Должно быть больше 0"],onInput:h},null,8,["modelValue","rules"])]),_:1}),a(w,{cols:"12",sm:"6"},{default:t(()=>[a(y,{modelValue:s.value.salary_value_max,"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.salary_value_max=l),modelModifiers:{number:!0},label:"До (₽)*",placeholder:"Например: 150000",variant:"outlined",density:"compact",type:"number",required:"",rules:[l=>!!l||"Максимум обязателен",l=>l>0||"Должно быть больше 0"],onInput:h},null,8,["modelValue","rules"])]),_:1})]),_:1})):I("",!0),a(y,{modelValue:s.value.hours_per_month,"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.hours_per_month=l),modelModifiers:{number:!0},label:"Часы в месяц",placeholder:"160",variant:"outlined",density:"compact",type:"number",class:"mb-4",rules:[l=>!l||l>0||"Должно быть больше 0"],onInput:h},null,8,["modelValue","rules"]),le.value?(d(),$(Be,{key:2,type:"info",class:"mb-4"},{default:t(()=>[s.value.type==="single"?(d(),v(ue,{key:0},[e[46]||(e[46]=i(" Ставка в час: ",-1)),n("strong",null,r(le.value)+" ₽/ч",1)],64)):(d(),v(ue,{key:1},[e[47]||(e[47]=i(" Ставка в час: ",-1)),n("strong",null,r(be.value)+"–"+r(ke.value)+" ₽/ч",1)],64))]),_:1})):I("",!0),a(y,{modelValue:s.value.source_date,"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.source_date=l),label:"Дата источника",type:"date",variant:"outlined",density:"compact",class:"mb-4"},null,8,["modelValue"]),a(y,{modelValue:s.value.link,"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.link=l),label:"Ссылка на источник",placeholder:"https://...",variant:"outlined",density:"compact",type:"url",class:"mb-4"},null,8,["modelValue"]),a(ye,{modelValue:s.value.note,"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.note=l),label:"Примечание",placeholder:"Дополнительная информация",variant:"outlined",density:"compact",rows:"2",class:"mb-4"},null,8,["modelValue"]),a(me,{modelValue:s.value.is_active,"onUpdate:modelValue":e[15]||(e[15]=l=>s.value.is_active=l),label:"Активен",class:"mb-4"},null,8,["modelValue"])]),_:1},512)]),_:1}),a(j,null,{default:t(()=>[a(M),a(m,{onClick:e[16]||(e[16]=l=>x.value=!1)},{default:t(()=>[...e[48]||(e[48]=[i("Отмена",-1)])]),_:1}),a(m,{color:"primary",loading:G.value,onClick:oe},{default:t(()=>[i(r(b.value?"Сохранить":"Добавить"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(O,{modelValue:C.value,"onUpdate:modelValue":e[19]||(e[19]=l=>C.value=l),"max-width":"400"},{default:t(()=>[a(f,null,{default:t(()=>[a(S,null,{default:t(()=>[...e[49]||(e[49]=[i("Удалить источник?",-1)])]),_:1}),a(c,{class:"mt-4"},{default:t(()=>[n("p",null,[e[50]||(e[50]=i("Вы уверены, что хотите удалить источник ",-1)),n("strong",null,r(F.value?.source),1),e[51]||(e[51]=i("?",-1))]),e[52]||(e[52]=n("p",{class:"text-caption text-grey mt-3"},"Это действие нельзя отменить.",-1))]),_:1}),a(j,null,{default:t(()=>[a(M),a(m,{onClick:e[18]||(e[18]=l=>C.value=!1)},{default:t(()=>[...e[53]||(e[53]=[i("Отмена",-1)])]),_:1}),a(m,{color:"error",loading:Q.value,onClick:ze},{default:t(()=>[...e[54]||(e[54]=[i(" Удалить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(de,{value:"profiles"},{default:t(()=>[n("div",sl,[e[56]||(e[56]=n("h1",{class:"text-h5"},"Управление профилями должностей",-1)),a(m,{color:"primary","prepend-icon":"mdi-plus",onClick:se},{default:t(()=>[...e[55]||(e[55]=[i(" Добавить профиль ",-1)])]),_:1})]),a(f,{elevation:"0",variant:"outlined"},{default:t(()=>[a(pe,{items:L.value,headers:ge,"item-value":"id",density:"comfortable","items-per-page":25},{"item.name":t(({item:l})=>[n("div",il,r(l.name),1)]),"item.description":t(({item:l})=>[l.description?(d(),v("span",{key:0,title:l.description,class:"text-truncate"},r(l.description),9,nl)):(d(),v("span",ul,"—"))]),"item.sort_order":t(({item:l})=>[i(r(l.sort_order),1)]),"item.actions":t(({item:l})=>[n("div",rl,[a(m,{icon:"",size:"small",variant:"text",color:"primary",onClick:N=>De(l),title:"Редактировать"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[57]||(e[57]=[i("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),a(m,{icon:"",size:"small",variant:"text",color:"error",onClick:N=>Re(l),title:"Удалить"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[58]||(e[58]=[i("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]),"no-data":t(()=>[n("div",dl,[e[60]||(e[60]=n("div",{class:"text-grey mb-3"},"Профили должностей не найдены",-1)),a(m,{color:"primary",variant:"text",onClick:se},{default:t(()=>[...e[59]||(e[59]=[i(" Добавить первый профиль ",-1)])]),_:1})])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(O,{modelValue:k.value,"onUpdate:modelValue":e[25]||(e[25]=l=>k.value=l),"max-width":"500"},{default:t(()=>[a(f,null,{default:t(()=>[a(S,null,{default:t(()=>[i(r(U.value?"Редактировать профиль должности":"Новый профиль должности"),1)]),_:1}),a(c,{class:"mt-4"},{default:t(()=>[a(fe,{ref_key:"profileFormRef",ref:ee,onSubmit:ne(ie,["prevent"])},{default:t(()=>[a(y,{modelValue:p.value.name,"onUpdate:modelValue":e[21]||(e[21]=l=>p.value.name=l),label:"Название профиля*",placeholder:"Например: Сборщик мебели",variant:"outlined",density:"compact",required:"",class:"mb-4",rules:[l=>!!l||"Название обязательно"]},null,8,["modelValue","rules"]),a(ye,{modelValue:p.value.description,"onUpdate:modelValue":e[22]||(e[22]=l=>p.value.description=l),label:"Описание",placeholder:"Дополнительная информация о профиле",variant:"outlined",density:"compact",rows:"3",class:"mb-4"},null,8,["modelValue"]),a(y,{modelValue:p.value.sort_order,"onUpdate:modelValue":e[23]||(e[23]=l=>p.value.sort_order=l),modelModifiers:{number:!0},label:"Порядок сортировки",type:"number",variant:"outlined",density:"compact",class:"mb-4",rules:[l=>l>=0||"Значение должно быть >= 0"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),a(j,{class:"pt-0"},{default:t(()=>[a(M),a(m,{color:"grey",variant:"text",onClick:e[24]||(e[24]=l=>k.value=!1)},{default:t(()=>[...e[61]||(e[61]=[i(" Отмена ",-1)])]),_:1}),a(m,{color:"primary",variant:"elevated",loading:H.value,onClick:ie},{default:t(()=>[...e[62]||(e[62]=[i(" Сохранить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(O,{modelValue:P.value,"onUpdate:modelValue":e[27]||(e[27]=l=>P.value=l),"max-width":"400"},{default:t(()=>[a(f,null,{default:t(()=>[a(S,null,{default:t(()=>[...e[63]||(e[63]=[i("Удалить профиль должности?",-1)])]),_:1}),z.value?(d(),$(c,{key:0,class:"pt-4"},{default:t(()=>[e[64]||(e[64]=i(" Вы уверены, что хотите удалить профиль ",-1)),n("strong",null,r(z.value.name),1),e[65]||(e[65]=i("? Это действие нельзя отменить. ",-1))]),_:1})):I("",!0),a(j,{class:"pt-0"},{default:t(()=>[a(M),a(m,{color:"grey",variant:"text",onClick:e[26]||(e[26]=l=>P.value=!1)},{default:t(()=>[...e[66]||(e[66]=[i(" Отмена ",-1)])]),_:1}),a(m,{color:"error",variant:"elevated",loading:J.value,onClick:$e},{default:t(()=>[...e[67]||(e[67]=[i(" Удалить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),_l=We(ml,[["__scopeId","data-v-44e2199c"]]);export{_l as default};
