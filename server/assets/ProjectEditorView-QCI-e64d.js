import{bg as w,F as m,z as s,B as Ke,be as Hl,bf as Jl,r as c,f as E,w as Mt,ac as Gl,G as a,D as o,a9 as H,bi as u,aB as d,bD as ie,bj as V,bh as xe,C as v,bG as Re,bH as Be,K as qt,A as Lt,ck as Kl}from"./vendor-Cu69IzCA.js";import{k as _,_ as St,V as Ie,t as re,v as Ql,w as Yl,x as Xl,h as R,i as h,y as Zl,b as J,c as M,o as j,d as G,e as He,f as y,z as te,r as S,A as Fe,B as it,C as de,D as ea,n as me,q as K,E as rt,j as B,a as P,p as ut,F as Je,G as $e,H as Tt,I as Ge,g as ue,J as pe,m as ta,K as la}from"./index-BbPvUMNu.js";class aa{async getAll(L){const{data:p}=await _.get(`/api/projects/${L}/labor-works`);return Array.isArray(p)?p:p.data||[]}async create(L,p){const{data:i}=await _.post(`/api/projects/${L}/labor-works`,p);return i.data||i}async getOne(L,p){const{data:i}=await _.get(`/api/projects/${L}/labor-works/${p}`);return i.data||i}async update(L,p,i){const{data:Q}=await _.put(`/api/projects/${L}/labor-works/${p}`,i);return Q.data||Q}async delete(L,p){await _.delete(`/api/projects/${L}/labor-works/${p}`)}async reorder(L,p){const{data:i}=await _.patch(`/api/projects/${L}/labor-works/reorder`,{order:p});return i}}const Ue=new aa,oa={__name:"IosToggle",props:{modelValue:{type:[Boolean,Number],default:!1}},emits:["update:modelValue"],setup(De){return(L,p)=>(m(),w("div",{class:Ke(["ios-toggle",{"is-checked":!!De.modelValue}]),onClick:p[0]||(p[0]=i=>L.$emit("update:modelValue",!De.modelValue))},[...p[1]||(p[1]=[s("div",{class:"ios-toggle-thumb"},null,-1)])],2))}},Et=St(oa,[["__scopeId","data-v-8770b79c"]]),sa={class:"d-flex align-center justify-space-between"},na={class:"mb-6"},ia={class:"mb-6"},ra={class:"d-flex align-center gap-2 mb-3"},ua={class:"mb-6"},da={class:"mb-6"},ma={class:"mb-6"},pa={class:"mb-6"},ca={key:0,class:"mb-4"},_a={class:"d-flex align-center justify-space-between mb-2"},va={class:"d-flex align-center gap-2"},fa={class:"text-caption font-weight-bold"},ga={class:"d-flex gap-1"},ya={key:0,class:"text-caption text-grey mt-1"},ba={key:1,class:"mb-4"},wa={key:2,class:"text-caption text-warning"},xa={style:{"overflow-x":"auto","margin-top":"12px"}},ka={class:"d-flex gap-2 align-center"},ha={class:"d-flex align-center",style:{"min-width":"24px",height:"24px"}},Va={style:{"font-weight":"400"}},Ca={class:"d-flex align-center justify-space-between"},Fa={key:1},$a={key:0},Ua={key:1},Da={key:0},ja={key:0},Na={key:0},Aa={key:1},Ma=["colspan"],qa={class:"text-body-2"},La={class:"mt-2"},Ta={class:"mt-2"},Ea={class:"mt-2"},Sa={class:"mb-3 pb-3 border-b"},Pa={class:"mt-2"},za={class:"text-caption text-grey"},Oa={class:"text-body-2"},Wa={key:0,class:"mt-2"},Ra={class:"d-flex align-center gap-2"},Ba=["colspan"],Ia={class:"text-body-2"},Ha={class:"mt-2"},Ja={style:{"font-weight":"400"}},Ga={style:{display:"flex","align-items":"center",gap:"6px"}},Ka={style:{"text-align":"right",width:"120px"}},Qa=["colspan"],Ya={class:"text-subtitle-2 mb-3"},Xa={class:"text-caption text-grey"},Za={style:{"text-align":"right"}},eo={style:{"text-align":"right"}},to={class:"text-body-2"},lo={class:"mt-2"},ao={class:"text-caption",style:{color:"#999","margin-top":"8px"}},oo={class:"text-caption mb-3",style:{color:"#666"}},so={style:{"text-align":"right"}},no={style:{"text-align":"right"}},io={style:{"text-align":"right"}},ro={style:{"text-align":"right"}},uo={style:{"text-align":"right"}},mo={style:{"text-align":"right"}},po={style:{"font-weight":"400"}},co={style:{"text-align":"right",width:"120px"}},_o={style:{"font-weight":"400"}},vo={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},fo={key:0,class:"text-subtitle-2"},go={key:0,class:"text-caption text-grey mb-3"},yo={key:0,class:"text-caption text-grey mb-3"},bo={key:0},wo={class:"text-caption mt-1"},xo={key:1},ko={key:0,class:"mb-4"},ho={key:0,class:"text-caption"},Vo={key:1,class:"text-caption"},Co={class:"d-flex align-center gap-2"},Fo={class:"text-subtitle-2"},$o={key:1,class:"text-center py-6 text-grey"},Uo={class:"d-flex justify-space-between align-center mb-4"},Do=Hl({__name:"ProjectEditorView",setup(De){const p=Jl().params.id,i=c({id:0,number:"",expert_name:"",address:"",region_id:null,waste_coefficient:1,repair_coefficient:1,text_blocks:[],normohour_rate:null,normohour_region:null,normohour_date:null,normohour_method:null,normohour_justification:null}),Q=l=>{let e=l.replace(/<[^>]*>/g,"");return e=e.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),e=e.split(`
`).map(t=>t.replace(/[ \t]+/g," ").trim()).filter(t=>t.length>0).join(`
`),e},Qe=l=>l.replace(/\r\n/g,`
`).replace(/\n{3,}/g,`

`).replace(/\u00A0/g," ").split(`
`).map(e=>e.replace(/[ \t]+/g," ").trim()).filter(e=>e.length>0).join(`
`).trim(),dt=l=>{try{let e=l;e=e.replace(/<\/?(p|div|br\s*\/?|li|ul|ol|h[1-6])>/gi,`
`),e=e.replace(/<a[^>]*>(.*?)<\/a>/gi,"$1"),e=e.replace(/<[^>]*>/g,"");const t=document.createElement("textarea");return t.innerHTML=e,e=t.value,e=e.replace(/\r\n/g,`
`).replace(/\n{3,}/g,`

`).replace(/[ \t]+/g," ").trim(),e}catch(e){return console.error("Error cleaning HTML:",e),l.replace(/<[^>]*>/g,"").trim()}},Pt=(l,e)=>{try{e.preventDefault();const t=e.clipboardData;if(!t){console.warn("Clipboard data not available");return}let n="";const r=t.getData("text/html");if(r&&r.trim().length>0?(n=dt(r),console.log("ðŸ“‹ Pasted from HTML")):(n=t.getData("text/plain")||t.getData("text")||"",console.log("ðŸ“‹ Pasted from plain text")),!n.trim()){console.warn("No text to paste");return}const f=Qe(n);l.text=(l.text?l.text+`

`:"")+f,l.text=Q(l.text),console.log("âœ… Paste successful. Text length:",l.text.length)}catch(t){console.error("âŒ Error during paste:",t);try{const n=e.clipboardData?.getData("text/plain")||"";if(n.trim()){const r=Qe(n);l.text=(l.text?l.text+`

`:"")+r,l.text=Q(l.text),console.log("âœ… Paste (fallback) successful. Text length:",l.text.length)}}catch(n){console.error("Fallback paste also failed:",n)}}},q=c([]),mt=c([]),le=c([]),je=c(!1),Ne=c(!1),ce=c({show:!1,message:"",color:"info",timeout:3e3}),k=(l,e="info",t=3e3)=>{ce.value={show:!0,message:l,color:e,timeout:t}},F=c({positions:!1,materials:!1,fittings:!1,expenses:!1,normohourSources:!1,laborWorks:!1,operations:!1}),zt=()=>{console.log("ðŸ”’ Closing settings drawer"),Ne.value=!1},Ot=()=>{console.log("ðŸ”“ Opening settings drawer. Text blocks:",i.value.text_blocks),Ne.value=!0},Y=c([]),z=c([]),ke=c([]),pt=c([]),Wt=E(()=>z.value.filter(l=>l.type==="plate")),Rt=E(()=>z.value.filter(l=>l.type==="edge")),Bt=[{title:"Ð¢Ð¸Ð¿ Ð´ÐµÑ‚Ð°Ð»Ð¸",key:"detail_type"},{title:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»",key:"material"},{title:"ÐšÑ€Ð¾Ð¼ÐºÐ°",key:"edge_material"},{title:"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚Ð¾Ñ€Ñ†Ð¾Ð²",key:"edge_scheme"},{title:"Ð¨Ð¸Ñ€Ð¸Ð½Ð°, Ð¼Ð¼",key:"width"},{title:"Ð”Ð»Ð¸Ð½Ð°, Ð¼Ð¼",key:"length"},{title:"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ð¾Ð´Ð½Ð¾Ð¹ (Ð¼Â²)",key:"area_single"},{title:"ÐšÐ¾Ð»-Ð²Ð¾",key:"quantity"},{title:"ÐžÐ±Ñ‰Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÑŒ (Ð¼Â²)",key:"area_total"},{title:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",key:"actions",sortable:!1}],It=[{title:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ",key:"name"},{title:"ÐšÐ¾Ð»-Ð²Ð¾",key:"quantity"},{title:"Ð¦ÐµÐ½Ð°",key:"unit_price"},{title:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",key:"actions",sortable:!1}],ct=[{title:"",key:"data-table-expand"},{title:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»",key:"name"},{title:"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ (Ð¼Â²)",key:"area_details"},{title:"ÐšÐ¾ÑÑ„Ñ„.",key:"waste_coeff"},{title:"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ñ Ð¾Ñ‚Ñ…Ð¾Ð´Ð°Ð¼Ð¸ (Ð¼Â²)",key:"area_with_waste"},{title:"Ð Ð°Ð·Ð¼ÐµÑ€ Ð»Ð¸ÑÑ‚Ð° (Ð¼Â²)",key:"sheet_area"},{title:"Ð›Ð¸ÑÑ‚Ð¾Ð²",key:"sheets_count"},{title:"Ð¦ÐµÐ½Ð° Ð·Ð° Ð»Ð¸ÑÑ‚",key:"price_per_sheet"},{title:"Ð¦ÐµÐ½Ð° Ð·Ð° Ð¼Â² (Ñ€Ð°ÑÑ‡.)",key:"price_per_m2",render:l=>"Ð¦ÐµÐ½Ð° Ð·Ð° Ð¼Â² (Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð½Ð°Ñ)"},{title:"Ð¡ÑƒÐ¼Ð¼Ð°",key:"total_price"}],Ht=E(()=>i.value?.use_area_calc_mode===!0?ct.filter(e=>e.key!=="sheet_area"&&e.key!=="price_per_sheet").map(e=>e.key==="sheets_count"?{...e,title:"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ðº Ð¾Ð¿Ð»Ð°Ñ‚Ðµ (Ð¼Â²)"}:e):ct.filter(e=>e.key!=="price_per_m2")),Jt=()=>{if(!(i.value?.apply_waste_to_plate!==!1))return console.log("getWasteCoefficientForPlate: DISABLED â†’ returning 1.0"),1;const e=i.value?.waste_plate_coefficient,t=i.value?.waste_coefficient||1,n=e?Number(e):t;return console.log(`getWasteCoefficientForPlate: ENABLED â†’ ${n} (${e?"plate-specific":"general"})`),n},_t=()=>{if(!(i.value?.apply_waste_to_edge!==!1))return console.log("getWasteCoefficientForEdge: DISABLED â†’ returning 1.0"),1;const e=i.value?.waste_edge_coefficient,t=i.value?.waste_coefficient||1,n=e?Number(e):t;return console.log(`getWasteCoefficientForEdge: ENABLED â†’ ${n} (${e?"edge-specific":"general"})`),n},Gt=[{title:"",key:"data-table-expand"},{title:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» ÐºÑ€Ð¾Ð¼ÐºÐ¸",key:"name"},{title:"Ð”Ð»Ð¸Ð½Ð° (Ð¼.Ð¿.)",key:"length_linear"},{title:"ÐšÐ¾ÑÑ„Ñ„.",key:"waste_coeff"},{title:"Ð”Ð»Ð¸Ð½Ð° Ñ Ð¾Ñ‚Ñ…Ð¾Ð´Ð°Ð¼Ð¸ (Ð¼.Ð¿.)",key:"length_with_waste"},{title:"Ð¦ÐµÐ½Ð° Ð·Ð° Ð¼.Ð¿.",key:"price_per_unit"},{title:"Ð¡ÑƒÐ¼Ð¼Ð°",key:"total_price"}],Kt=[{title:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ",key:"name"},{title:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",key:"description"},{title:"Ð¡ÑƒÐ¼Ð¼Ð°",key:"amount"},{title:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",key:"actions",sortable:!1}],vt=[{value:"none",label:"Ð‘ÐµÐ· Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸",icon:"mdi-minus"},{value:"O",label:"Ð’ÐºÑ€ÑƒÐ³ (O)",icon:"mdi-circle-outline"},{value:"=",label:"ÐŸÐ°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾ Ð´Ð»Ð¸Ð½Ðµ (=)",icon:"mdi-arrow-left-right"},{value:"||",label:"ÐŸÐ°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾ ÑˆÐ¸Ñ€Ð¸Ð½Ðµ (||)",icon:"mdi-arrow-up-down"},{value:"L",label:"Ð“-Ð¾Ð±Ñ€Ð°Ð·Ð½Ð¾ (L)",icon:"mdi-vector-square"},{value:"ÐŸ",label:"ÐŸ-Ð¾Ð±Ñ€Ð°Ð·Ð½Ð¾ (ÐŸ)",icon:"mdi-alpha-p-box-outline"}],_e=c(!1),ve=c(!1),fe=c(!1),Ae=c(!1),Ye=c(!1),Xe=c(!1),Me=c(!1),qe=c(!1),Le=c(!1),Ze=c(!1),ae=c(null),A=c({title:"",text:""}),Te=c([]),x=c({source:"",position_profile:null,salary_range:null,period:null,link:null,note:null}),I=c({}),ft=c(),b=c({id:null,project_id:p,detail_type_id:null,material_id:null,edge_material_id:null,edge_scheme:"none",width:0,length:0,quantity:1,custom_name:null}),$=c({id:0,project_id:p,name:"",article:"",unit:"ÑˆÑ‚",quantity:1,unit_price:0,note:""}),O=c({id:0,project_id:p,type:"",cost:0}),gt=l=>{if(!l)return"â€”";const e=z.value.find(t=>t.id===l);return e?e.name:`ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» #${l}`},yt=l=>{if(!l)return"â€”";const e=Y.value.find(t=>t.id===l);return e?e.name:`Ð¢Ð¸Ð¿ #${l}`},et=l=>l?vt.find(e=>e.value===l)?.label||l:"â€”",Qt=l=>{if(l.edge_scheme)return et(l.edge_scheme);if(l.detail_type_id){const e=Y.value.find(t=>t.id===l.detail_type_id);if(e&&e.edge_processing)return et(e.edge_processing)}return"â€”"},bt=l=>{const e=[];return q.value.forEach(t=>{if(!t.edge_material_id||t.edge_material_id!==l||!t.edge_scheme||t.edge_scheme==="none")return;const n=(t.width||0)/1e3,r=(t.length||0)/1e3;let f=0;switch(t.edge_scheme){case"O":f=2*(n+r);break;case"=":f=2*r;break;case"||":f=2*n;break;case"L":f=n+r;break;case"ÐŸ":f=2*n+r;break}const g=f*(t.quantity||0);e.push({position_id:t.id,position_name:t.custom_name||yt(t.detail_type_id)||`ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ ${t.id}`,width:t.width,length:t.length,edge_scheme_label:et(t.edge_scheme),perimeter_one:f,quantity:t.quantity,total_length:g})}),e},Yt=l=>{if(!l){b.value.edge_scheme="none";return}const e=Y.value.find(t=>t.id===l);e&&e.edge_processing&&(b.value.edge_scheme=e.edge_processing),he()},U=l=>{if(l._cached_details)return l._cached_details;const e=l.name||"";return e.toLowerCase().includes("ÐºÑ€Ð¾Ð¼Ðº")?Xt(l):e.toLowerCase().includes("Ð¿Ð¸Ð»")||e.toLowerCase().includes("Ñ€Ð°ÑÐ¿Ð¸Ð»")?Zt(l):e.toLowerCase().includes("ÑÐ²ÐµÑ€Ð»")||e.toLowerCase().includes("Ð¾Ñ‚Ð²ÐµÑ€ÑÑ‚")?wt(l):{type:"manual",is_manual:!0,message:"Ð’Ð²ÐµÐ´ÐµÐ½Ð¾ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð¾Ð¼"}},Xt=l=>{if(l.type==="manual")return{type:"edging",is_manual:!0,message:"Ð’Ð²ÐµÐ´ÐµÐ½Ð¾ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð¾Ð¼"};const e=[];let t=0;se.value.forEach(f=>{bt(f.id).forEach(C=>{e.push({position_name:C.position_name,material_name:f.name,length:C.total_length}),t+=C.total_length})});const n=_t(),r=t*n;return{type:"edging",details:e,total_length:t,waste_coeff:n,total_with_waste:r,unit:"Ð¼.Ð¿."}},Zt=l=>{if(l.type==="manual")return{type:"sawing",is_manual:!0,message:"Ð’Ð²ÐµÐ´ÐµÐ½Ð¾ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð¾Ð¼"};const e=[];let t=0;return oe.value.forEach(n=>{const r=n.area_details;r>0&&(e.push({material_name:n.name,area:r}),t+=r)}),{type:"sawing",details:e,total_area:t,unit:"Ð¼Â²",note:"ÐžÐ±ÑŠÑ‘Ð¼ Ñ€Ð°ÑÐ¿Ð¸Ð»Ð¾Ð²ÐºÐ¸ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ Ð¿Ð»Ð¾Ñ‰Ð°Ð´Ð¸ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ Ð¿Ð»Ð¸Ñ‚Ð½Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²"}},wt=l=>{if(console.log("getDrillingOperationDetails called:",{name:l.name,type:l.type,quantity_from_api:l.quantity,source:l.source,operation_id:l.operation_id,positions:q.value.length,detail_types:Y.value.length}),l.type==="manual")return console.log("  -> operation is manual, returning manual message"),{type:"drilling",is_manual:!0,message:"Ð’Ð²ÐµÐ´ÐµÐ½Ð¾ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð¾Ð¼"};const e=new Map;q.value.forEach(r=>{const f=z.value.find(g=>g.id===r.material_id);if(console.log("  checking position:",{material_id:r.material_id,material_type:f?.type,detail_type_id:r.detail_type_id,quantity:r.quantity}),f?.type==="plate"&&r.detail_type_id){const g=Y.value.find(C=>C.id===r.detail_type_id);if(g){console.log("    -> found detailType:",g.name),e.has(r.detail_type_id)||e.set(r.detail_type_id,{detail_type_name:g.name,total_quantity:0,holes_per_piece:8});const C=e.get(r.detail_type_id);C.total_quantity+=r.quantity||1}}});const t=Array.from(e.values()).map(r=>({detail_type_name:r.detail_type_name,holes_per_piece:r.holes_per_piece,quantity:r.total_quantity,total_holes:r.holes_per_piece*r.total_quantity}));console.log("  drilling details:",t);let n=0;return t.forEach(r=>{n+=r.total_holes}),console.log("  SUMMARY:",{calculated_total:n,api_quantity:l.quantity,difference:l.quantity-n,details_count:t.length}),{type:"drilling",is_manual:!1,details:t,total_holes:n,unit:"ÑˆÑ‚.",message:"Ð Ð°ÑÑ‡Ñ‘Ñ‚ Ð¿Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑÐ¼ Ñ Ð¿Ð»Ð¸Ñ‚Ð½Ñ‹Ð¼Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°Ð¼Ð¸"}};let tt=null;const he=()=>{tt&&clearTimeout(tt),tt=setTimeout(()=>xt(),350)},xt=async()=>{try{F.value.operations=!0;const e=(await _.get(`/api/projects/${p}/operations`)).data||[];Array.isArray(e)?Ee.value=e:(console.warn("Operations data is not an array:",e),Ee.value=[])}catch(l){console.warn("Recalc operations failed",l),Ee.value=[]}finally{F.value.operations=!1}},el=l=>{b.value.material_id=l,he()},tl=l=>{b.value.edge_scheme=l||"none",he()},ll=l=>{b.value.edge_material_id=l,he()},kt=async()=>{try{F.value.materials=!0;const[l,e,t,n,r,f]=await Promise.all([_.get("/api/detail-types").then(g=>g.data),_.get("/api/materials").then(g=>g.data),_.get("/api/operations").then(g=>g.data),_.get("/api/units").then(g=>g.data),_.get("/api/regions").then(g=>g.data?.data||[]),_.get("/api/position-profiles").then(g=>g.data?.data||[])]);Y.value=l,z.value=e,console.log("Materials loaded:",e.length,"samples:",e.slice(0,2)),Ft.value=t,ke.value=n||[],pt.value=r,$t.value=f,console.log("Position profiles loaded:",f.length,"profiles:",f.map(g=>({id:g.id,name:g.name}))),console.log("Regions loaded:",r.length,"samples:",r.slice(0,3))}finally{F.value.materials=!1}},T=async()=>{try{F.value.positions=!0,F.value.fittings=!0,F.value.expenses=!0,i.value=(await _.get(`/api/projects/${p}`)).data;const l=i.value.profileRates;if(console.log("âœ… Project loaded:",{id:i.value.id,name:i.value.number,hasProfileRates:!!l,profileRatesCount:Array.isArray(l)?l.length:0,profileRatesType:typeof l}),l&&l.length>0&&console.log("ðŸ“Š First profileRate structure:",JSON.stringify(l[0],null,2)),i.value.use_area_calc_mode=i.value.use_area_calc_mode===!0||i.value.use_area_calc_mode===1,i.value.apply_waste_to_plate=i.value.apply_waste_to_plate!==!1&&i.value.apply_waste_to_plate!==0,i.value.apply_waste_to_edge=i.value.apply_waste_to_edge!==!1&&i.value.apply_waste_to_edge!==0,i.value.apply_waste_to_operations=i.value.apply_waste_to_operations!==!1&&i.value.apply_waste_to_operations!==0,i.value.normohour_rate=Number(i.value.normohour_rate)||0,i.value.waste_coefficient=Number(i.value.waste_coefficient)||1,i.value.waste_plate_coefficient=i.value.waste_plate_coefficient?Number(i.value.waste_plate_coefficient):null,i.value.waste_edge_coefficient=i.value.waste_edge_coefficient?Number(i.value.waste_edge_coefficient):null,i.value.waste_operations_coefficient=i.value.waste_operations_coefficient?Number(i.value.waste_operations_coefficient):null,i.value.repair_coefficient=Number(i.value.repair_coefficient)||1,i.value.show_waste_plate_description=i.value.show_waste_plate_description===!0||i.value.show_waste_plate_description===1,i.value.show_waste_edge_description=i.value.show_waste_edge_description===!0||i.value.show_waste_edge_description===1,i.value.show_waste_operations_description=i.value.show_waste_operations_description===!0||i.value.show_waste_operations_description===1,!i.value.text_blocks)i.value.text_blocks=[];else if(typeof i.value.text_blocks=="string")try{const t=JSON.parse(i.value.text_blocks);Array.isArray(t)&&t.length>0&&typeof t[0]=="string"?i.value.text_blocks=t.map(n=>({title:"",text:n||"",enabled:!0})):Array.isArray(t)?i.value.text_blocks=t.map(n=>({...n,enabled:n.enabled===!0||n.enabled===1})):i.value.text_blocks=[]}catch{i.value.text_blocks=[]}else Array.isArray(i.value.text_blocks)&&i.value.text_blocks.length>0&&typeof i.value.text_blocks[0]=="string"&&(i.value.text_blocks=i.value.text_blocks.map(t=>({title:"",text:t||"",enabled:!0})));q.value=(await _.get(`/api/projects/${p}/positions`)).data,mt.value=(await _.get(`/api/projects/${p}/fittings`)).data,le.value=(await _.get(`/api/projects/${p}/expenses`)).data,console.log("Loaded positions:",q.value),console.log("Loaded expenses:",le.value),le.value&&le.value.length>0&&console.log("First expense structure:",JSON.stringify(le.value[0],null,2)),console.log("Available materials:",z.value.slice(0,3)),console.log("Project coefficients:",{waste_coefficient:i.value.waste_coefficient,waste_plate_coefficient:i.value.waste_plate_coefficient,waste_edge_coefficient:i.value.waste_edge_coefficient,waste_operations_coefficient:i.value.waste_operations_coefficient}),console.log("ðŸ“ Text blocks loaded:",i.value.text_blocks),await xt(),await Vt(),await ne();const e=i.value.profileRates;console.log("âœ… fetchData completed, final profileRates check:",{hasProfileRates:!!e,count:Array.isArray(e)?e.length:0,rates:e?Array.isArray(e)?e.map(t=>({id:t.id,is_locked:t.is_locked,method:t.calculation_method})):[]:[]})}catch(l){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:",l),k(`ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚: ${l.response?.data?.message||l.message}`,"error")}finally{F.value.positions=!1,F.value.fittings=!1,F.value.expenses=!1}},al=async()=>{je.value=!0;try{await Promise.all([kt(),T()])}catch(l){console.error("Refresh failed",l),k("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ","error")}finally{je.value=!1}},ol=()=>{Me.value=!1,b.value={id:null,project_id:p,detail_type_id:null,material_id:i.value?.default_plate_material_id||null,edge_material_id:i.value?.default_edge_material_id||null,edge_scheme:"none",width:0,length:0,quantity:1,custom_name:null},_e.value=!0},sl=l=>{if(Me.value=!0,b.value={...l},!b.value.edge_scheme&&b.value.detail_type_id){const e=Y.value.find(t=>t.id===b.value.detail_type_id);e&&e.edge_processing&&(b.value.edge_scheme=e.edge_processing)}_e.value=!0},nl=async()=>{const{valid:l}=await ft.value.validate();if(l)try{if(b.value.material_id){const e=z.value.find(t=>t.id===b.value.material_id);if(e&&e.type==="plate"&&(e.width_mm||e.length_mm)){const t=b.value.width||0,n=b.value.length||0,r=e.width_mm||0,f=e.length_mm||0,g=Math.max(r,f),C=Math.min(r,f);if((t>g||n>g||Math.min(t,n)>C&&Math.max(t,n)>g)&&e.width_mm&&e.length_mm&&!confirm(`âš ï¸ Ð’ÐÐ˜ÐœÐÐÐ˜Ð•!

Ð Ð°Ð·Ð¼ÐµÑ€ Ð´ÐµÑ‚Ð°Ð»Ð¸ (${t}Ã—${n} Ð¼Ð¼) Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°ÐµÑ‚ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð»Ð¸ÑÑ‚Ð° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð° (${r}Ã—${f} Ð¼Ð¼).

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ð²Ð²ÐµÐ´Ñ‘Ð½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ….

ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ?`)){console.log("Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼ Ð¸Ð·-Ð·Ð° Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð°");return}}}Me.value?await _.put(`/api/project-positions/${b.value.id}`,b.value):await _.post(`/api/projects/${p}/positions`,b.value),_e.value=!1,await T()}catch(e){console.error(e),k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸","error")}},il=async l=>{confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ?")&&(await _.delete(`/api/project-positions/${l.id}`),await T())},rl=async l=>{try{X.value=l.id||null;const e={project_id:p,detail_type_id:l.detail_type_id,material_id:l.material_id,edge_material_id:l.edge_material_id,edge_scheme:l.edge_scheme,width:l.width,length:l.length,quantity:l.quantity,custom_name:l.custom_name};console.log("ðŸ”„ Cloning position:",e);const t=await _.post(`/api/projects/${p}/positions`,e);console.log("âœ… Position cloned successfully"),await T()}catch(e){console.error("âŒ Error cloning position:",e),k(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÐºÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸: ${e.response?.data?.message||e.message}`,"error")}finally{X.value=null}},lt=async(l,e,t)=>{if(!l.id){k("Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ Ñ‡ÐµÑ€ÐµÐ· Ð´Ð¸Ð°Ð»Ð¾Ð³","warning");return}const n={};e==="width"||e==="length"?n[e]=parseFloat(t)||0:e==="quantity"?n[e]=parseInt(t)||1:n[e]=t;try{await _.put(`/api/project-positions/${l.id}`,n),he()}catch(r){console.error(r),k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸","error"),await T()}},ul=()=>{qe.value=!1;const l=ke.value[0]||"ÑˆÑ‚";$.value={id:0,project_id:p,name:"",article:"",unit:l,quantity:1,unit_price:0,note:""},ve.value=!0},dl=l=>{qe.value=!0;const e=ke.value[0]||"ÑˆÑ‚";$.value={...l,unit:l.unit||e,note:l.note??""},ve.value=!0},ml=async()=>{try{const l={name:$.value.name,article:$.value.article,unit:$.value.unit||ke.value[0]||"ÑˆÑ‚",quantity:Number($.value.quantity)||0,unit_price:Number($.value.unit_price)||0,note:$.value.note||null};qe.value?await _.put(`/api/project-fittings/${$.value.id}`,l):await _.post(`/api/projects/${p}/fittings`,l),ve.value=!1,await T()}catch(l){const e=l,t=e?.response?.data?.errors,n=t?Object.values(t).flat().join(`
`):e?.response?.data?.message||e?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ñ‹";k(n,"error")}},pl=async l=>{confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ñƒ?")&&(await _.delete(`/api/project-fittings/${l.id}`),await T())},cl=()=>{i.value.text_blocks||(i.value.text_blocks=[]),i.value.text_blocks.length<10&&(i.value.text_blocks.push({title:"",text:"",enabled:!0}),console.log("ðŸ“ Added new text block. Total blocks:",i.value.text_blocks.length))},_l=l=>{if(i.value.text_blocks){const e=i.value.text_blocks.splice(l,1);console.log("ðŸ“ Removed text block. Removed:",e[0],"Total blocks:",i.value.text_blocks.length)}},vl=l=>{if(i.value.text_blocks&&l>0){const e=i.value.text_blocks[l];i.value.text_blocks[l]=i.value.text_blocks[l-1],i.value.text_blocks[l-1]=e,console.log("â¬†ï¸ Moved text block up. Current position:",l-1)}},fl=l=>{if(i.value.text_blocks&&l<i.value.text_blocks.length-1){const e=i.value.text_blocks[l];i.value.text_blocks[l]=i.value.text_blocks[l+1],i.value.text_blocks[l+1]=e,console.log("â¬‡ï¸ Moved text block down. Current position:",l+1)}},gl=()=>{if(!ae.value)return;const l={title:A.value.title.trim(),text:Q(A.value.text)};ae.value==="plate"?l.title||l.text?(i.value.waste_plate_description=l,i.value.show_waste_plate_description=!0):(i.value.waste_plate_description=null,i.value.show_waste_plate_description=!1):ae.value==="edge"?l.title||l.text?(i.value.waste_edge_description=l,i.value.show_waste_edge_description=!0):(i.value.waste_edge_description=null,i.value.show_waste_edge_description=!1):ae.value==="operations"&&(l.title||l.text?(i.value.waste_operations_description=l,i.value.show_waste_operations_description=!0):(i.value.waste_operations_description=null,i.value.show_waste_operations_description=!1)),ht()},ht=()=>{Ye.value=!1,ae.value=null,A.value={title:"",text:""}},yl=l=>{try{l.preventDefault();const e=l.clipboardData;if(!e){console.warn("Clipboard data not available");return}let t="";const n=e?.getData("text/html");n&&n.trim().length>0?t=dt(n):t=e?.getData("text/plain")||"";const r=Qe(t);A.value.text=(A.value.text?A.value.text+`

`:"")+r,A.value.text=Q(A.value.text)}catch(e){console.error("Error during paste:",e)}},Vt=async()=>{try{F.value.normohourSources=!0;const l=await _.get(`/api/projects/${p}/normohour-sources`);Te.value=l.data||[],console.log("ðŸ“Š Normohour sources loaded:",Te.value)}catch(l){console.error("âŒ Error loading normohour sources:",l),Te.value=[]}finally{F.value.normohourSources=!1}},Ct=()=>{Xe.value=!1,Ze.value=!1,x.value={source:"",position_profile:null,salary_range:null,period:null,link:null,note:null},I.value={}},bl=()=>(I.value={},(!x.value.source||!x.value.source.trim())&&(I.value.source="Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÐµÐ½"),x.value.link&&x.value.link.trim()&&(/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(x.value.link.trim())||(I.value.link="ÐÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð°Ñ ÑÑÑ‹Ð»ÐºÐ°")),Object.keys(I.value).length===0),wl=async()=>{if(bl())try{const l={source:x.value.source.trim(),position_profile:x.value.position_profile?x.value.position_profile.trim():null,salary_range:x.value.salary_range?x.value.salary_range.trim():null,period:x.value.period?x.value.period.trim():null,link:x.value.link?x.value.link.trim():null,note:x.value.note?x.value.note.trim():null};if(Ze.value&&x.value.id)await _.put(`/api/projects/${p}/normohour-sources/${x.value.id}`,l),console.log("âœ… Normohour source updated");else{if(Te.value.length>=20){k("ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 20 Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²","warning");return}await _.post(`/api/projects/${p}/normohour-sources`,l),console.log("âœ… Normohour source created")}await Vt(),Ct()}catch(l){console.error("âŒ Error saving normohour source:",l);const e=l.response?.data?.message||l.message;k(`ÐžÑˆÐ¸Ð±ÐºÐ°: ${e}`,"error")}},xl=async()=>{Ae.value=!0;try{const l=await _.get(`/api/smeta/pdf/${p}`,{responseType:"blob"}),e=URL.createObjectURL(l.data),t=document.createElement("a");t.href=e,t.download=`smeta_${p}.pdf`,t.click(),URL.revokeObjectURL(e)}catch(l){console.error("âŒ PDF generation error:",l),k(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ PDF: ${l.response?.data?.message||l.message}`,"error")}finally{Ae.value=!1}},kl=()=>{Le.value=!1,O.value={id:0,project_id:p,name:"",description:"",amount:0},fe.value=!0},hl=l=>{Le.value=!0,O.value={...l},fe.value=!0},Vl=async()=>{try{const l={name:O.value.name,description:O.value.description,amount:Number(O.value.amount)||0};Le.value?await _.put(`/api/projects/${p}/expenses/${O.value.id}`,l):await _.post(`/api/projects/${p}/expenses`,l),fe.value=!1,await T()}catch(l){const e=l,t=e?.response?.data?.errors,n=t?Object.values(t).flat().join(`
`):e?.response?.data?.message||e?.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ€Ð°ÑÑ…Ð¾Ð´Ð°";k(n,"error")}},Cl=async l=>{confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ€Ð°ÑÑ…Ð¾Ð´?")&&(await _.delete(`/api/projects/${p}/expenses/${l.id}`),await T())},Ee=c([]),at=c(null),X=c(null),Se=E(()=>Ee.value.map(e=>{const t=e.name||"",n=t.toLowerCase().includes("ÑÐ²ÐµÑ€Ð»")||t.toLowerCase().includes("Ð¾Ñ‚Ð²ÐµÑ€ÑÑ‚"),r=e.type!=="manual"&&!e.source?.includes("manual");let f=e.quantity;if(n&&r&&e.source==="detail_type"){const g=wt(e);g.total_holes!==void 0&&(f=g.total_holes)}return{...e,quantity:f,is_manual:e.type==="manual"||e.source==="manual"||!!e.is_manual,total_cost:(f??0)*(e.cost_per_unit??0),_cached_details:U(e)}})),Ft=c([]),ge=c(!1),Pe=c(!1),W=c({id:0,project_id:p,operation_id:null,quantity:1,note:""}),Fl=[{title:"",key:"data-table-expand"},{title:"ÐÐ°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ",key:"name"},{title:"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ",key:"category"},{title:"Ð¦ÐµÐ½Ð° Ð·Ð° ÐµÐ´.",key:"cost_per_unit",align:"end"},{title:"ÐšÐ¾Ð»-Ð²Ð¾",key:"quantity_display"},{title:"Ð•Ð´. Ð¸Ð·Ð¼.",key:"unit"},{title:"Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ",key:"total_cost",align:"end"},{title:"Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº",key:"source"},{title:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",key:"actions",sortable:!1}],Z=c([]),$t=c([]),ye=c(!1),ot=c(!1),Ut=c(null),ee=c(null),D=c({title:"",basis:"",hours:0,note:"",position_profile_id:null}),ze=c(!1),be=c(null),we=c([]),st=c(!1),N=c({title:"",basis:"",input_data:"",hours:0,note:""}),$l=E(()=>we.value.reduce((l,e)=>l+(parseFloat(e.hours)||0),0)),Ul=[{title:"ÐÐ°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ",key:"title"},{title:"ÐžÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ",key:"basis"},{title:"ÐÐ¾Ñ€Ð¼Ð°, Ñ‡",key:"hours",align:"end"},{title:"Ð¡Ñ‚Ð°Ð²ÐºÐ°, â‚½/Ñ‡",key:"rate",align:"end"},{title:"Ð¡ÑƒÐ¼Ð¼Ð°, â‚½",key:"cost",align:"end"},{title:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",key:"actions",sortable:!1,width:"100px"}],Ve=c(!1),Oe=c(!1),We=c(!1),Dt=E(()=>Array.isArray(Z.value)?Z.value.reduce((l,e)=>l+(parseFloat(e.cost_total)||0),0):0),Ce=E(()=>{const l=i.value.profileRates;if(typeof l<"u"&&console.log("ðŸ” ratesLocked computed:",{type:Array.isArray(l)?"array":typeof l,value:l,length:Array.isArray(l)?l.length:l&&typeof l=="object"?Object.keys(l).length:0}),!l)return!1;const e=Array.isArray(l)?l:Object.values(l||{});if(e.length===0)return!1;const t=e.every(n=>n.is_locked===!0);return console.log("ðŸ” All rates locked?",t,"out of",e.length),t});Mt(()=>i.value.normohour_rate,l=>{Z.value.length>0&&(Z.value=Z.value.map(e=>({...e,cost:e.hours*(l||0)})))}),Mt(()=>i.value.profileRates,l=>{console.log("ðŸ‘€ profileRates changed:",{count:l?Array.isArray(l)?l.length:Object.keys(l).length:0,rates:l?Array.isArray(l)?l.map(e=>({id:e.id,is_locked:e.is_locked})):Object.values(l).map(e=>({id:e.id,is_locked:e.is_locked})):[]})},{deep:!0}),E(()=>{try{if(!q.value||q.value.length===0)return[];const l=new Map;return q.value.forEach(e=>{if(!e.material_id)return;const t=z.value.find(f=>f.id===e.material_id);if(!t)return;const n=(e.width||0)/1e3*((e.length||0)/1e3)*(e.quantity||0);if(!l.has(e.material_id)){const f=t.price_per_unit||0;let g=f;if(t.type==="plate"&&t.length_mm&&t.width_mm){const C=t.length_mm*t.width_mm/1e6;C>0&&(g=f/C)}l.set(e.material_id,{id:e.material_id,name:t.name,volume:0,unit:t.unit||"Ð¼Â²",price_per_unit:g,price_per_sheet:f,updated_at:t.updated_at})}const r=l.get(e.material_id);r.volume+=n}),Array.from(l.values())}catch(l){return console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²:",l),[]}});const oe=E(()=>{try{if(!q.value||q.value.length===0)return console.log("plateData: no positions"),[];const l=Jt(),e=new Map;q.value.forEach(n=>{if(!n.material_id)return;const r=z.value.find(C=>C.id===n.material_id);if(!r){console.warn("Material not found:",n.material_id);return}if(console.log("Material check:",{id:r.id,name:r.name,type:r.type,isPlate:r.type==="plate"}),r.type!=="plate"){console.log("Skipping non-plate material:",r.name,"type:",r.type);return}const f=(n.width||0)/1e3*((n.length||0)/1e3)*(n.quantity||0);if(!e.has(n.material_id)){const C=r.length_mm&&r.width_mm?r.length_mm*r.width_mm/1e6:0;e.set(n.material_id,{id:n.material_id,name:r.name,area_details:0,waste_coeff:l,area_with_waste:0,sheet_area:C,sheets_count:0,price_per_sheet:r.price_per_unit||0,price_per_m2:r.price_per_unit&&C>0?r.price_per_unit/C:0,updated_at:r.updated_at,source_url:r.source_url})}const g=e.get(n.material_id);g.area_details+=f});const t=i.value?.use_area_calc_mode===!0;return e.forEach(n=>{n.area_with_waste=n.area_details*l,t?n.sheets_count=0:n.sheets_count=n.sheet_area>0?Math.ceil(n.area_with_waste/n.sheet_area):0}),console.log("plateData result:",Array.from(e.values()),"area mode:",t),Array.from(e.values())}catch(l){return console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð¿Ð»Ð¸Ñ‚Ð½Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²:",l),[]}}),se=E(()=>{try{if(!q.value||q.value.length===0)return[];const l=_t(),e=new Map;return q.value.forEach(t=>{if(!t.edge_material_id||!t.edge_scheme||t.edge_scheme==="none")return;const n=z.value.find(At=>At.id===t.edge_material_id);if(!n||n.type!=="edge")return;let r=0;const f=(t.width||0)/1e3,g=(t.length||0)/1e3,C=t.quantity||0;switch(t.edge_scheme){case"O":r=2*(f+g)*C;break;case"=":r=2*g*C;break;case"||":r=2*f*C;break;case"L":r=(f+g)*C;break;case"ÐŸ":r=(2*f+g)*C;break;default:r=0}e.has(t.edge_material_id)||e.set(t.edge_material_id,{id:t.edge_material_id,name:n.name,length_linear:0,waste_coeff:l,length_with_waste:0,price_per_unit:n.price_per_unit||0,updated_at:n.updated_at});const Nt=e.get(t.edge_material_id);Nt.length_linear+=r}),e.forEach(t=>{t.length_with_waste=t.length_linear*l}),Array.from(e.values())}catch(l){return console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÐºÑ€Ð¾Ð¼ÐºÐ¸:",l),[]}}),Dl=E(()=>{if(!oe.value||oe.value.length===0)return 0;const l=i.value?.use_area_calc_mode===!0;return oe.value.reduce((e,t)=>{const n=l?t.area_with_waste*(Number(t.price_per_m2)||0):t.sheets_count*(Number(t.price_per_sheet)||0);return e+n},0)}),jl=E(()=>!se.value||se.value.length===0?0:se.value.reduce((l,e)=>l+e.length_with_waste*(Number(e.price_per_unit)||0),0)),Nl=E(()=>(Dl.value||0)+(jl.value||0)),Al=E(()=>!Se.value||Se.value.length===0?0:Se.value.reduce((l,e)=>{const t=parseFloat(e.total_cost??(e.quantity||0)*(e.cost_per_unit||0))||0;return l+t},0)),Ml=()=>{Pe.value=!1,W.value={id:0,project_id:p,operation_id:null,quantity:1,note:""},ge.value=!0},ql=async()=>{try{const l={quantity:Number(W.value.quantity)||0,note:W.value.note||null},e=W.value.operation_id;l.operation_id=e&&typeof e=="object"?e.id:e,Pe.value?await _.put(`/api/project-operations/${W.value.id}`,l):await _.post(`/api/projects/${p}/operations`,l),ge.value=!1,await T()}catch(l){console.error("saveOperation error",l),k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸: "+(l.response?.data?.message||l.message),"error")}},Ll=l=>{Pe.value=!0,W.value={...l},ge.value=!0},Tl=async l=>{if(confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ?"))try{await _.delete(`/api/project-operations/${l.id}`),await T()}catch{k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸","error")}},El=async()=>{Oe.value=!0;try{const l=await _.post(`/api/projects/${p}/profile-rates/recalculate-and-fix`,{method:"median",only_if_missing:!1});if(l.data.success){await ne(),Ve.value=!1,console.log("âœ… Ð¡Ñ‚Ð°Ð²ÐºÐ¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ð°Ð½Ñ‹ Ð¸ Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹",l.data.data);const e=l.data.data.created_rate_ids?.length??0;k(`Ð¡Ñ‚Ð°Ð²ÐºÐ¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ð°Ð½Ñ‹ Ð¸ Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ (${e} ÑÑ‚Ð°Ð²Ð¾Ðº ÑÐ¾Ð·Ð´Ð°Ð½Ð¾)`,"success")}else console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚Ðµ ÑÑ‚Ð°Ð²Ð¾Ðº:",l.data.message),k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚Ðµ ÑÑ‚Ð°Ð²Ð¾Ðº: "+l.data.message,"error")}catch(l){console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚Ð° ÑÑ‚Ð°Ð²Ð¾Ðº:",l);try{await ne(),k("Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹, Ð½Ð¾ Ñ„Ð¸ÐºÑÐ°Ñ†Ð¸Ñ ÑÑ‚Ð°Ð²Ð¾Ðº Ð½Ðµ Ð¿Ñ€Ð¾ÑˆÐ»Ð°","warning")}catch{k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÑÑ‡ÐµÑ‚Ðµ ÑÑ‚Ð°Ð²Ð¾Ðº: "+(l.response?.data?.message||l.message),"error")}}finally{Oe.value=!1}},Sl=async()=>{We.value=!0;try{if(Ce.value){console.log("ðŸ”“ Ð Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ð²Ð¾Ðº...");const e=await _.post(`/api/projects/${p}/profile-rates/unlock`,{});if(e.data.success){console.log("ï¿½ ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°..."),await T(),console.log("âœ… Ð¡Ñ‚Ð°Ð²ÐºÐ¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹",e.data.data);const t=e.data.data.unlocked_count??0;k(`Ð¡Ñ‚Ð°Ð²ÐºÐ¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ (${t} ÑÑ‚Ð°Ð²Ð¾Ðº Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¾)`,"success")}else console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ ÑÑ‚Ð°Ð²Ð¾Ðº:",e.data.message),k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ñ€Ð°Ð·Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ ÑÑ‚Ð°Ð²Ð¾Ðº: "+e.data.message,"error")}else{console.log("ðŸ“Œ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ/Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ð²Ð¾Ðº Ð¿ÐµÑ€ÐµÐ´ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹...");const e=await _.post(`/api/projects/${p}/profile-rates/recalculate-and-fix`,{method:"median",only_if_missing:!1});if(!e.data.success){k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐµ ÑÑ‚Ð°Ð²Ð¾Ðº Ðº Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ: "+e.data.message,"error");return}console.log("âœ… Ð¡Ñ‚Ð°Ð²ÐºÐ¸ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÐµÐ½Ñ‹ Ðº Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ"),console.log("ðŸ”’ Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ð²Ð¾Ðº...");const t=await _.post(`/api/projects/${p}/profile-rates/lock`,{});if(t.data.success){console.log("ðŸ”„ ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð´Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸..."),await T(),console.log("âœ… Ð¡Ñ‚Ð°Ð²ÐºÐ¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹",t.data.data);const n=t.data.data.locked_count??0;k(`Ð¡Ñ‚Ð°Ð²ÐºÐ¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ (${n} ÑÑ‚Ð°Ð²Ð¾Ðº Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¾)`,"success")}else console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ ÑÑ‚Ð°Ð²Ð¾Ðº:",t.data.message),k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐµ ÑÑ‚Ð°Ð²Ð¾Ðº: "+t.data.message,"error")}}catch(l){console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ ÑÑ‚Ð°Ð²Ð¾Ðº:",l);try{await ne(),k("Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹, Ð½Ð¾ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ Ð½Ðµ Ð¿Ñ€Ð¾ÑˆÐ»Ð°: "+(l.response?.data?.message||l.message),"warning")}catch{k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ ÑÑ‚Ð°Ð²Ð¾Ðº: "+(l.response?.data?.message||l.message),"error")}}finally{We.value=!1}},Pl=()=>{ee.value=null,D.value={title:"",basis:"",hours:0,note:"",position_profile_id:null},ye.value=!0},jt=async()=>{try{if(!Ut.value?.validate())return;ot.value=!0;const l={title:D.value.title||"",basis:D.value.basis||null,hours:parseFloat(String(D.value.hours))||0,note:D.value.note||null,position_profile_id:D.value.position_profile_id||null};ee.value?.id?await Ue.update(Number(p),ee.value.id,l):await Ue.create(Number(p),{project_id:Number(p),...l}),ye.value=!1,await ne()}catch(l){console.error("saveLaborWork error",l),k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹: "+(l.response?.data?.message||l.message),"error")}finally{ot.value=!1}},zl=l=>{ee.value=l,D.value={title:l.title,basis:l.basis||"",hours:l.hours,note:l.note||"",position_profile_id:l.position_profile_id||null},ye.value=!0},Ol=async l=>{if(confirm(`Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ "${l.title}"?`))try{await Ue.delete(Number(p),l.id),await ne()}catch(e){console.error("deleteLaborWork error",e),k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹: "+(e.response?.data?.message||e.message),"error")}},Wl=async l=>{be.value=l,we.value=[],N.value={title:"",basis:"",input_data:"",hours:0,note:""};try{await nt(l.id),ze.value=!0}catch(e){console.error("Error opening steps modal:",e),k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹","error")}},nt=async l=>{try{const e=await _.get(`/api/projects/${p}/labor-works/${l}/steps`);we.value=e.data||[]}catch(e){console.error("Error loading steps:",e),k("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹","error")}},Rl=async()=>{if(!N.value.title.trim()){k("Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð½Ð°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸","error");return}if(N.value.hours<=0){k("Ð§Ð°ÑÑ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 0","error");return}try{st.value=!0;const l={title:N.value.title.trim(),basis:N.value.basis?.trim()||null,input_data:N.value.input_data?.trim()||null,hours:parseFloat(String(N.value.hours))||0,note:N.value.note?.trim()||null,sort_order:we.value.length};await _.post(`/api/projects/${p}/labor-works/${be.value?.id}/steps`,l),await nt(be.value?.id),await ne(),N.value={title:"",basis:"",input_data:"",hours:0,note:""},k("ÐŸÐ¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°","success")}catch(l){console.error("Error saving step:",l);const e=l.response?.data?.message||l.message||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸";k(e,"error")}finally{st.value=!1}},Bl=async l=>{if(confirm(`Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ "${l.title}"?`))try{await _.delete(`/api/projects/${p}/labor-works/${be.value?.id}/steps/${l.id}`),await nt(be.value?.id),await ne(),k("ÐŸÐ¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°","success")}catch(e){console.error("Error deleting step:",e),k("ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸","error")}},ne=async()=>{try{F.value.laborWorks=!0;const l=await _.post(`/api/projects/${p}/labor-works/recalculate`,{mode:"preview"});if(l.data.success&&l.data.data.works)l.data.data.works.length>0&&(console.log("ðŸ“‹ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:",l.data.data.works[0]),console.log("ðŸ“‹ Ð’ÑÐµ ÐºÐ»ÑŽÑ‡Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:",Object.keys(l.data.data.works[0]))),Z.value=l.data.data.works.map(e=>({...e,cost:e.cost_total??e.hours*(e.rate_per_hour||0)})),Ve.value=l.data.data.has_missing_rates??!1,l.data.data.has_missing_rates&&console.warn("âš ï¸ Ð•ÑÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð±ÐµÐ· Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÑ‚Ð°Ð²Ð¾Ðº (Ð½ÐµÑ‚ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²)");else{const e=await Ue.getAll(Number(p));Z.value=(e||[]).map(t=>{const n=t.rate_per_hour??(i.value.normohour_rate||0);return{...t,cost:t.cost_total??t.hours*n}}),Ve.value=!1}}catch(l){console.error("loadLaborWorks error",l),Ve.value=!1;try{const e=await Ue.getAll(Number(p));Z.value=(e||[]).map(t=>{const n=t.rate_per_hour??(i.value.normohour_rate||0);return{...t,cost:t.cost_total??t.hours*n}})}catch(e){console.error("loadLaborWorks fallback error",e)}}finally{F.value.laborWorks=!1}},Il=()=>{window.open("/detail-types","_blank");const l=setInterval(async()=>{try{const e=await _.get("/api/detail-types").then(t=>t.data);Y.value=e}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¸Ð¿Ð¾Ð² Ð´ÐµÑ‚Ð°Ð»Ð¸:",e)}},2e3);setTimeout(()=>clearInterval(l),300*1e3)};return Gl(async()=>{await kt(),await T()}),(l,e)=>(m(),w(H,null,[a(Ie,{class:"pa-0"},{default:o(()=>[a(Yl,{color:"primary",dark:"",class:"mb-4"},{default:o(()=>[a(Xl,null,{default:o(()=>[u("ÐŸÑ€Ð¾ÐµÐºÑ‚ #"+d(i.value.number),1)]),_:1}),a(R),a(h,{size:"small",color:"secondary","prepend-icon":"mdi-refresh",loading:je.value,disabled:je.value,onClick:al,class:"mr-2"},{default:o(()=>[...e[76]||(e[76]=[u(" ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ",-1)])]),_:1},8,["loading","disabled"]),a(h,{size:"small","prepend-icon":"mdi-cog",onClick:Ot},{default:o(()=>[...e[77]||(e[77]=[u(" ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ",-1)])]),_:1})]),_:1}),a(Zl,{"model-value":Ne.value,"onUpdate:modelValue":e[18]||(e[18]=t=>Ne.value=t),location:"right",width:"1000",temporary:"",elevation:"16",class:"settings-drawer"},{default:o(()=>[a(J,{class:"h-100 rounded-0"},{default:o(()=>[a(M,{class:"pa-4 border-b"},{default:o(()=>[s("div",sa,[e[79]||(e[79]=s("span",null,"ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°",-1)),a(h,{icon:"",variant:"text",size:"small",onClick:ie(zt,["stop"])},{default:o(()=>[a(j,null,{default:o(()=>[...e[78]||(e[78]=[u("mdi-close",-1)])]),_:1})]),_:1})])]),_:1}),a(G,{class:"pa-4 overflow-y-auto",style:{height:"calc(100vh - 100px)"}},{default:o(()=>[a(He,null,{default:o(()=>[s("div",na,[e[80]||(e[80]=s("h3",{class:"text-subtitle-1 mb-3"},"ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ",-1)),a(y,{modelValue:i.value.number,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.number=t),label:"â„– Ð´ÐµÐ»Ð°",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.expert_name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.expert_name=t),label:"Ð¤Ð˜Ðž ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð°",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.address,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.address=t),label:"ÐÐ´Ñ€ÐµÑ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°",class:"mb-3"},null,8,["modelValue"]),a(te,{modelValue:i.value.region_id,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.region_id=t),items:pt.value,"item-title":"name","item-value":"id",label:"Ð ÐµÐ³Ð¸Ð¾Ð½",clearable:"",density:"compact",class:"mb-3",hint:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€ÐµÐ³Ð¸Ð¾Ð½ Ð´Ð»Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° ÑÑ‚Ð°Ð²Ð¾Ðº","menu-props":{maxHeight:300}},null,8,["modelValue","items"])]),a(S,{class:"my-4"}),s("div",ia,[e[83]||(e[83]=s("h3",{class:"text-subtitle-1 mb-3"},"ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ñ‹",-1)),a(y,{modelValue:i.value.waste_coefficient,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.waste_coefficient=t),modelModifiers:{number:!0},label:"ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚ Ð¾Ð±Ñ€ÐµÐ·ÐºÐ¾Ð²",type:"number",min:"1",step:"0.01",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.repair_coefficient,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.repair_coefficient=t),modelModifiers:{number:!0},label:"Ð ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ñ‹Ð¹ ÐºÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚",type:"number",min:"1",step:"0.01",class:"mb-3"},null,8,["modelValue"]),s("div",ra,[e[81]||(e[81]=s("span",{class:"text-subtitle-2"},"ÐŸÐ¾ Ð»Ð¸ÑÑ‚Ð°Ð¼",-1)),a(Et,{modelValue:i.value.use_area_calc_mode,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.use_area_calc_mode=t)},null,8,["modelValue"]),e[82]||(e[82]=s("span",{class:"text-subtitle-2"},"ÐŸÐ¾ Ð¿Ð»Ð¾Ñ‰Ð°Ð´Ð¸",-1))])]),a(S,{class:"my-4"}),s("div",ua,[e[84]||(e[84]=s("h3",{class:"text-subtitle-1 mb-3"},"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ",-1)),a(te,{modelValue:i.value.default_plate_material_id,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.default_plate_material_id=t),items:z.value.filter(t=>t.type==="plate"),"item-title":"name","item-value":"id",label:"ÐŸÐ»Ð¸Ñ‚Ð½Ñ‹Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»",clearable:"",density:"compact",class:"mb-3"},null,8,["modelValue","items"]),a(te,{modelValue:i.value.default_edge_material_id,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.default_edge_material_id=t),items:z.value.filter(t=>t.type==="edge"),"item-title":"name","item-value":"id",label:"ÐšÑ€Ð¾Ð¼Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»",clearable:"",density:"compact"},null,8,["modelValue","items"])]),a(S,{class:"my-4"}),s("div",da,[e[89]||(e[89]=s("h3",{class:"text-subtitle-1 mb-3"},"ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ñ‹ Ð¾Ñ‚Ñ…Ð¾Ð´Ð¾Ð²",-1)),a(Fe,{class:"border",density:"compact"},{default:o(()=>[e[88]||(e[88]=s("thead",null,[s("tr",null,[s("th",null,"Ð¢Ð¸Ð¿"),s("th",null,"Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"),s("th",null,"ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÑ‚ÑŒ")])],-1)),s("tbody",null,[s("tr",null,[e[85]||(e[85]=s("td",null,"ÐŸÐ»Ð¸Ñ‚Ð½Ñ‹Ðµ",-1)),s("td",null,[a(y,{modelValue:i.value.waste_plate_coefficient,"onUpdate:modelValue":e[9]||(e[9]=t=>i.value.waste_plate_coefficient=t),modelModifiers:{number:!0},type:"number",step:"0.01",min:"1",density:"compact","hide-details":"",style:{"max-width":"100px"},placeholder:String(i.value.waste_coefficient||1.2)},null,8,["modelValue","placeholder"])]),s("td",null,[a(it,{modelValue:i.value.apply_waste_to_plate,"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.apply_waste_to_plate=t),"hide-details":"",class:"mt-0"},null,8,["modelValue"])])]),s("tr",null,[e[86]||(e[86]=s("td",null,"ÐšÑ€Ð¾Ð¼ÐºÐ°",-1)),s("td",null,[a(y,{modelValue:i.value.waste_edge_coefficient,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.waste_edge_coefficient=t),modelModifiers:{number:!0},type:"number",step:"0.01",min:"1",density:"compact","hide-details":"",style:{"max-width":"100px"},placeholder:String(i.value.waste_coefficient||1.1)},null,8,["modelValue","placeholder"])]),s("td",null,[a(it,{modelValue:i.value.apply_waste_to_edge,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.apply_waste_to_edge=t),"hide-details":"",class:"mt-0"},null,8,["modelValue"])])]),s("tr",null,[e[87]||(e[87]=s("td",null,"ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸",-1)),s("td",null,[a(y,{modelValue:i.value.waste_operations_coefficient,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.waste_operations_coefficient=t),modelModifiers:{number:!0},type:"number",step:"0.01",min:"1",density:"compact","hide-details":"",style:{"max-width":"100px"},placeholder:String(i.value.waste_coefficient||1)},null,8,["modelValue","placeholder"])]),s("td",null,[a(it,{modelValue:i.value.apply_waste_to_operations,"onUpdate:modelValue":e[14]||(e[14]=t=>i.value.apply_waste_to_operations=t),"hide-details":"",class:"mt-0"},null,8,["modelValue"])])])])]),_:1})]),a(S,{class:"my-4"}),s("div",ma,[e[90]||(e[90]=s("h3",{class:"text-subtitle-1 mb-3"},"ÐÐ¾Ñ€Ð¼Ð¾-Ñ‡Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚",-1)),a(y,{modelValue:i.value.normohour_rate,"onUpdate:modelValue":e[15]||(e[15]=t=>i.value.normohour_rate=t),modelModifiers:{number:!0},label:"Ð¡Ñ‚Ð°Ð²ÐºÐ°, Ñ€ÑƒÐ±/Ñ‡Ð°Ñ",type:"number",step:"0.01",min:"0",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, 734",density:"compact",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.normohour_region,"onUpdate:modelValue":e[16]||(e[16]=t=>i.value.normohour_region=t),label:"Ð“Ð¾Ñ€Ð¾Ð´/Ñ€ÐµÐ³Ð¸Ð¾Ð½",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð•ÐºÐ°Ñ‚ÐµÑ€Ð¸Ð½Ð±ÑƒÑ€Ð³",density:"compact",maxlength:"255",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:i.value.normohour_date,"onUpdate:modelValue":e[17]||(e[17]=t=>i.value.normohour_date=t),label:"Ð”Ð°Ñ‚Ð° Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ ÑÑ‚Ð°Ð²ÐºÐ¸",type:"date",density:"compact"},null,8,["modelValue"])]),a(S,{class:"my-4"}),s("div",pa,[e[94]||(e[94]=s("h3",{class:"text-subtitle-1 mb-3"},"Ð¡Ð¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ñ‹Ðµ Ð±Ð»Ð¾ÐºÐ¸ ÑÐ¼ÐµÑ‚Ñ‹",-1)),i.value.text_blocks&&i.value.text_blocks.length>0?(m(),w("div",ca,[(m(!0),w(H,null,xe(i.value.text_blocks,(t,n)=>(m(),w("div",{key:n,class:"mb-3 pa-3 border rounded",style:Lt({"background-color":t.enabled!==!1?"rgba(0,0,0,0.02)":"rgba(0,0,0,0.01)",opacity:t.enabled!==!1?1:.6})},[s("div",_a,[s("div",va,[s("span",fa,"Ð‘Ð»Ð¾Ðº "+d(n+1),1),a(Et,{modelValue:t.enabled,"onUpdate:modelValue":r=>t.enabled=r,title:"Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ/Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð±Ð»Ð¾Ðº Ð² Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ðµ"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ga,[n>0?(m(),v(h,{key:0,icon:"",size:"x-small",color:"info",variant:"text",onClick:r=>vl(n),title:"ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ð²ÐµÑ€Ñ…"},{default:o(()=>[a(j,{size:"small"},{default:o(()=>[...e[91]||(e[91]=[u("mdi-arrow-up",-1)])]),_:1})]),_:1},8,["onClick"])):V("",!0),n<(i.value.text_blocks?.length||0)-1?(m(),v(h,{key:1,icon:"",size:"x-small",color:"info",variant:"text",onClick:r=>fl(n),title:"ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ð½Ð¸Ð·"},{default:o(()=>[a(j,{size:"small"},{default:o(()=>[...e[92]||(e[92]=[u("mdi-arrow-down",-1)])]),_:1})]),_:1},8,["onClick"])):V("",!0),a(h,{icon:"",size:"x-small",color:"error",variant:"text",onClick:r=>_l(n),title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð±Ð»Ð¾Ðº"},{default:o(()=>[a(j,{size:"small"},{default:o(()=>[...e[93]||(e[93]=[u("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]),a(y,{modelValue:t.title,"onUpdate:modelValue":r=>t.title=r,label:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð±Ð»Ð¾ÐºÐ°",variant:"outlined",density:"compact",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐžÐ±Ñ‰Ð¸Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ, Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ",counter:"100",maxlength:"100",class:"mb-2",onInput:r=>t.title=t.title||"",disabled:t.enabled===!1},null,8,["modelValue","onUpdate:modelValue","onInput","disabled"]),a(pe,{modelValue:t.text,"onUpdate:modelValue":r=>t.text=r,label:"Ð¢ÐµÐºÑÑ‚ Ð±Ð»Ð¾ÐºÐ°",variant:"outlined",rows:"3",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚ÐµÐºÑÑ‚ (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 3000 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)",counter:"3000",maxlength:"3000",onInput:r=>t.text=Q(t.text),onPaste:r=>Pt(t,r),disabled:t.enabled===!1,density:"compact"},null,8,["modelValue","onUpdate:modelValue","onInput","onPaste","disabled"]),t.text.length>0?(m(),w("div",ya," Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ð¾Ð²: "+d(t.text.length)+"/3000 ",1)):V("",!0)],4))),128))])):V("",!0),!i.value.text_blocks||i.value.text_blocks.length<10?(m(),w("div",ba,[a(h,{"prepend-icon":"mdi-plus",color:"secondary",variant:"outlined",size:"small",onClick:cl},{default:o(()=>[u(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð±Ð»Ð¾Ðº ("+d(i.value.text_blocks?i.value.text_blocks.length:0)+"/10) ",1)]),_:1})])):(m(),w("div",wa," Ð”Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚ Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ (10 Ð±Ð»Ð¾ÐºÐ¾Ð²) "))])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[...e[95]||(e[95]=[u("Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°",-1)])]),_:1}),a(G,null,{default:o(()=>[a(S,{class:"my-4"}),a(M,null,{default:o(()=>[...e[96]||(e[96]=[u("ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¸",-1)])]),_:1}),a(h,{"prepend-icon":"mdi-plus",onClick:ol},{default:o(()=>[...e[97]||(e[97]=[u("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ",-1)])]),_:1}),s("div",xa,[F.value.positions?(m(),v(de,{key:0,type:"table"})):(m(),v(me,{key:1,items:q.value,headers:Bt},{"item.material":o(({item:t})=>[u(d(gt(t.material_id)),1)]),"item.edge_material":o(({item:t})=>[u(d(gt(t.edge_material_id)),1)]),"item.edge_scheme":o(({item:t})=>[u(d(Qt(t)),1)]),"item.detail_type":o(({item:t})=>[u(d(yt(t.detail_type_id)),1)]),"item.width":o(({item:t})=>[a(y,{value:Math.round(t.width||0),type:"number",density:"compact","hide-details":"",style:{"max-width":"120px"},step:"1","onUpdate:modelValue":n=>lt(t,"width",parseInt(n)||0)},null,8,["value","onUpdate:modelValue"])]),"item.length":o(({item:t})=>[a(y,{value:Math.round(t.length||0),type:"number",density:"compact","hide-details":"",style:{"max-width":"120px"},step:"1","onUpdate:modelValue":n=>lt(t,"length",parseInt(n)||0)},null,8,["value","onUpdate:modelValue"])]),"item.area_single":o(({item:t})=>[u(d(((t.width||0)/1e3*((t.length||0)/1e3)).toFixed(4)),1)]),"item.quantity":o(({item:t})=>[a(y,{modelValue:t.quantity,"onUpdate:modelValue":n=>t.quantity=n,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",style:{"max-width":"100px"},onBlur:()=>lt(t,"quantity",t.quantity)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),"item.area_total":o(({item:t})=>[u(d(((t.width||0)/1e3*((t.length||0)/1e3)*(t.quantity||0)).toFixed(4)),1)]),"item.actions":o(({item:t})=>[s("div",ka,[a(j,{onClick:n=>sl(t),disabled:X.value!==null,class:Ke(X.value!==null?"text-disabled":"cursor-pointer"),title:"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"},{default:o(()=>[...e[98]||(e[98]=[u(" mdi-pencil ",-1)])]),_:1},8,["onClick","disabled","class"]),s("div",ha,[X.value!==t.id?(m(),v(j,{key:0,onClick:n=>rl(t),disabled:X.value!==null,class:Ke(X.value!==null?"text-disabled":"cursor-pointer"),title:"ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ"},{default:o(()=>[...e[99]||(e[99]=[u(" mdi-content-duplicate ",-1)])]),_:1},8,["onClick","disabled","class"])):(m(),v(ea,{key:1,size:"24",width:"2",indeterminate:"",color:"primary",title:"ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ..."}))]),a(j,{onClick:n=>il(t),disabled:X.value!==null,class:Ke(X.value!==null?"text-disabled":"cursor-pointer"),title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"},{default:o(()=>[...e[100]||(e[100]=[u(" mdi-delete ",-1)])]),_:1},8,["onClick","disabled","class"])])]),_:1},8,["items"]))]),a(S,{class:"my-4"}),a(M,null,{default:o(()=>[e[101]||(e[101]=u(" ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ ",-1)),a(R),s("div",Va,"Ð˜Ñ‚Ð¾Ð³Ð¾: "+d(Nl.value.toFixed(2))+" â‚½",1)]),_:1}),oe.value.length>0?(m(),v(rt,{key:0,class:"mt-2"},{default:o(()=>[s("div",Ca,[s("div",null,[e[103]||(e[103]=s("span",null,"ÐŸÐ»Ð¸Ñ‚Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹",-1)),i.value.apply_waste_to_plate?V("",!0):(m(),v(K,{key:0,size:"small",variant:"filled",color:"warning",class:"ml-2"},{default:o(()=>[...e[102]||(e[102]=[u(" ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½ ",-1)])]),_:1}))]),a(K,{size:"small",variant:"outlined",color:"info"},{default:o(()=>[u(d(i.value.use_area_calc_mode?"Ð Ð°ÑÑ‡Ñ‘Ñ‚ Ð¿Ð¾ Ð¿Ð»Ð¾Ñ‰Ð°Ð´Ð¸":"Ð Ð°ÑÑ‡Ñ‘Ñ‚ Ð¿Ð¾ Ð»Ð¸ÑÑ‚Ð°Ð¼"),1)]),_:1})])]),_:1})):V("",!0),F.value.materials&&oe.value.length===0?(m(),v(de,{key:1,type:"table"})):oe.value.length>0?(m(),v(me,{key:2,items:oe.value,headers:Ht.value,density:"comfortable",class:"mb-4","show-expand":""},{"header.price_per_m2":o(({column:t})=>[a(ut,{text:"Ð¦ÐµÐ½Ð° Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð° Ð¸Ð· Ñ†ÐµÐ½Ñ‹ Ð»Ð¸ÑÑ‚Ð°"},{activator:o(({props:n})=>[s("span",qt(n,{class:"cursor-help"}),[u(d(t.title)+" ",1),a(K,{size:"x-small",variant:"text",color:"grey-darken-1"},{default:o(()=>[...e[104]||(e[104]=[u("Ñ€Ð°ÑÑ‡.",-1)])]),_:1})],16)]),_:2},1024)]),"item.area_details":o(({item:t})=>[u(d(t.area_details.toFixed(2)),1)]),"item.waste_coeff":o(({item:t})=>[u(d((Number(t.waste_coeff)||1).toFixed(2)),1)]),"item.area_with_waste":o(({item:t})=>[u(d(t.area_with_waste.toFixed(2)),1)]),"item.sheet_area":o(({item:t})=>[!i.value.use_area_calc_mode&&t.sheet_area>0?(m(),v(ut,{key:0,text:`${(t.sheet_area*1e6).toFixed(0)} Ð¼Ð¼Â²`},{activator:o(({props:n})=>[s("span",Re(Be(n)),d(t.sheet_area.toFixed(4)),17)]),_:2},1032,["text"])):i.value.use_area_calc_mode?V("",!0):(m(),w("span",Fa,"â€”"))]),"item.sheets_count":o(({item:t})=>[i.value.use_area_calc_mode?(m(),w("span",Ua,d(t.area_with_waste.toFixed(2))+" Ð¼Â²",1)):(m(),w("span",$a,d(t.sheets_count),1))]),"item.price_per_sheet":o(({item:t})=>[i.value.use_area_calc_mode?V("",!0):(m(),w("span",Da,d((Number(t.price_per_sheet)||0).toFixed(2))+" â‚½ ",1))]),"item.price_per_m2":o(({item:t})=>[i.value.use_area_calc_mode?(m(),w("span",ja,d((Number(t.price_per_m2)||0).toFixed(2))+" â‚½/Ð¼Â² ",1)):V("",!0)]),"item.total_price":o(({item:t})=>[i.value.use_area_calc_mode?(m(),w("span",Aa,d((t.area_with_waste*(Number(t.price_per_m2)||0)).toFixed(2))+" â‚½ ",1)):(m(),w("span",Na,d((t.sheets_count*(Number(t.price_per_sheet)||0)).toFixed(2))+" â‚½ ",1))]),"expanded-row":o(({columns:t,item:n})=>[s("tr",null,[s("td",{colspan:t.length,class:"pa-4",style:{"background-color":"#f5f5f5"}},[a(Ie,{class:"pa-0"},{default:o(()=>[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[...e[105]||(e[105]=[s("div",{class:"text-subtitle-2 mb-2"},[s("strong",null,"Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð°:")],-1)])]),_:1})]),_:1}),a(B,null,{default:o(()=>[a(P,{cols:"12",md:"6"},{default:o(()=>[s("div",qa,[s("div",null,[e[106]||(e[106]=u("ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹: ",-1)),s("strong",null,d(n.area_details.toFixed(2))+" Ð¼Â²",1)]),s("div",null,[e[107]||(e[107]=u("ÐšÐ¾ÑÑ„. Ð¾Ñ‚Ñ…Ð¾Ð´Ð¾Ð²: ",-1)),s("strong",null,d((Number(n.waste_coeff)||1).toFixed(2)),1)]),s("div",null,[e[108]||(e[108]=u("ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ñ Ð¾Ñ‚Ñ…Ð¾Ð´Ð°Ð¼Ð¸: ",-1)),s("strong",null,d(n.area_with_waste.toFixed(2))+" Ð¼Â²",1)]),i.value.use_area_calc_mode?(m(),w(H,{key:1},[s("div",Sa,[e[116]||(e[116]=s("div",{class:"text-subtitle-2 mb-2"},[s("strong",null,"ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ€Ð°ÑÑ‡Ñ‘Ñ‚:")],-1)),s("div",null,[e[113]||(e[113]=u("ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ðº Ð¾Ð¿Ð»Ð°Ñ‚Ðµ: ",-1)),s("strong",null,d(n.area_with_waste.toFixed(2))+" Ð¼Â²",1)]),s("div",null,[e[114]||(e[114]=u("Ð¦ÐµÐ½Ð° Ð·Ð° Ð¼Â² (Ñ€Ð°ÑÑ‡.): ",-1)),s("strong",null,d(n.price_per_m2.toFixed(2))+" â‚½/Ð¼Â²",1)]),s("div",Pa,[e[115]||(e[115]=u("Ð˜Ñ‚Ð¾Ð³Ð¾: ",-1)),s("strong",null,d(n.area_with_waste.toFixed(2))+" Ã— "+d(n.price_per_m2.toFixed(2))+" = "+d((n.area_with_waste*n.price_per_m2).toFixed(2))+" â‚½",1)])]),s("div",za,[e[117]||(e[117]=s("div",{class:"mb-2"},[s("strong",null,"Ð¡Ð¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ:")],-1)),s("div",null,"Ð Ð°Ð·Ð¼ÐµÑ€ Ð»Ð¸ÑÑ‚Ð°: "+d(n.sheet_area.toFixed(4))+" Ð¼Â²",1),s("div",null,"Ð¦ÐµÐ½Ð° Ð·Ð° Ð»Ð¸ÑÑ‚: "+d((Number(n.price_per_sheet)||0).toFixed(2))+" â‚½",1),e[118]||(e[118]=s("div",{class:"mt-2"},"Ð¦ÐµÐ½Ð° Ð·Ð° Ð¼Â² Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð° Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð½Ñ‹Ð¼ Ð¿ÑƒÑ‚Ñ‘Ð¼ Ð¸Ð· Ñ†ÐµÐ½Ñ‹ Ð»Ð¸ÑÑ‚Ð°:",-1)),s("div",null,d((Number(n.price_per_sheet)||0).toFixed(2))+" â‚½ / "+d(n.sheet_area.toFixed(4))+" Ð¼Â² = "+d(n.price_per_m2.toFixed(2))+" â‚½/Ð¼Â²",1)])],64)):(m(),w(H,{key:0},[s("div",null,[e[109]||(e[109]=u("ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ð»Ð¸ÑÑ‚Ð°: ",-1)),s("strong",null,d(n.sheet_area.toFixed(4))+" Ð¼Â²",1)]),s("div",La,[e[110]||(e[110]=u("Ð›Ð¸ÑÑ‚Ð¾Ð²: ",-1)),s("strong",null,"ceil("+d(n.area_with_waste.toFixed(2))+" / "+d(n.sheet_area.toFixed(4))+") = "+d(n.sheets_count),1)]),s("div",Ta,[e[111]||(e[111]=u("Ð¦ÐµÐ½Ð° Ð·Ð° Ð¼Â²: ",-1)),s("strong",null,d(n.price_per_m2.toFixed(2))+" â‚½/Ð¼Â²",1)]),s("div",Ea,[e[112]||(e[112]=u("Ð˜Ñ‚Ð¾Ð³Ð¾: ",-1)),s("strong",null,d(n.sheets_count)+" Ã— "+d((Number(n.price_per_sheet)||0).toFixed(2))+" = "+d((n.sheets_count*(Number(n.price_per_sheet)||0)).toFixed(2))+" â‚½",1)])],64))])]),_:2},1024),n.updated_at?(m(),v(P,{key:0,cols:"12",md:"6"},{default:o(()=>[e[122]||(e[122]=s("div",{class:"text-subtitle-2 mb-2"},[s("strong",null,"Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº Ñ†ÐµÐ½Ñ‹:")],-1)),s("div",Oa,[s("div",null,[e[119]||(e[119]=u("Ð”Ð°Ñ‚Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ: ",-1)),s("strong",null,d(new Date(n.updated_at).toLocaleDateString("ru-RU")),1)]),n.source_url?(m(),w("div",Wa,[a(h,{href:n.source_url,target:"_blank",size:"small",variant:"text",color:"primary","prepend-icon":"mdi-link-variant"},{default:o(()=>[...e[120]||(e[120]=[u(" ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð° ",-1)])]),_:1},8,["href"])])):V("",!0),e[121]||(e[121]=s("div",{class:"text-caption text-grey mt-2"},"Ð¦ÐµÐ½Ð° Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ð° Ð½Ð° ÑƒÐºÐ°Ð·Ð°Ð½Ð½ÑƒÑŽ Ð´Ð°Ñ‚Ñƒ",-1))])]),_:2},1024)):V("",!0)]),_:2},1024)]),_:2},1024)],8,Ma)])]),_:1},8,["items","headers"])):V("",!0),se.value.length>0?(m(),v(rt,{key:3,class:"mt-2"},{default:o(()=>[s("div",Ra,[e[124]||(e[124]=s("span",null,"ÐšÑ€Ð¾Ð¼ÐºÐ°",-1)),i.value.apply_waste_to_edge?V("",!0):(m(),v(K,{key:0,size:"small",variant:"filled",color:"warning"},{default:o(()=>[...e[123]||(e[123]=[u(" ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½ ",-1)])]),_:1}))])]),_:1})):V("",!0),F.value.materials&&se.value.length===0?(m(),v(de,{key:4,type:"table"})):se.value.length>0?(m(),v(me,{key:5,items:se.value,headers:Gt,density:"comfortable","show-expand":""},{"item.length_linear":o(({item:t})=>[u(d(t.length_linear.toFixed(2)),1)]),"item.waste_coeff":o(({item:t})=>[u(d((Number(t.waste_coeff)||1).toFixed(2)),1)]),"item.length_with_waste":o(({item:t})=>[u(d(t.length_with_waste.toFixed(2)),1)]),"item.price_per_unit":o(({item:t})=>[u(d((Number(t.price_per_unit)||0).toFixed(2))+" â‚½ ",1)]),"item.total_price":o(({item:t})=>[u(d((t.length_with_waste*(Number(t.price_per_unit)||0)).toFixed(2))+" â‚½ ",1)]),"expanded-row":o(({columns:t,item:n})=>[s("tr",null,[s("td",{colspan:t.length,class:"pa-4",style:{"background-color":"#f5f5f5"}},[a(Ie,{class:"pa-0"},{default:o(()=>[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[...e[125]||(e[125]=[s("div",{class:"text-subtitle-2 mb-3"},[s("strong",null,"Ð Ð°ÑÑ‡Ñ‘Ñ‚ Ð´Ð»Ð¸Ð½Ñ‹ ÐºÑ€Ð¾Ð¼ÐºÐ¸:")],-1)])]),_:1})]),_:1}),a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[a(Fe,{class:"border-table"},{default:o(()=>[e[127]||(e[127]=s("thead",null,[s("tr",null,[s("th",null,"ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ"),s("th",null,"Ð Ð°Ð·Ð¼ÐµÑ€ Ð´ÐµÑ‚Ð°Ð»Ð¸ (Ð¼Ð¼)"),s("th",null,"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚Ð¾Ñ€Ñ†Ð¾Ð²"),s("th",null,"ÐŸÐµÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¾Ð´Ð½Ð¾Ð¹ (Ð¼)"),s("th",null,"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾"),s("th",null,"Ð˜Ñ‚Ð¾Ð³Ð¾ Ð´Ð»Ð¸Ð½Ð° (Ð¼)")])],-1)),s("tbody",null,[(m(!0),w(H,null,xe(bt(n.id),r=>(m(),w("tr",{key:r.position_id},[s("td",null,d(r.position_name),1),s("td",null,d(r.width)+" Ã— "+d(r.length),1),s("td",null,d(r.edge_scheme_label),1),s("td",null,d(r.perimeter_one.toFixed(4)),1),s("td",null,d(r.quantity),1),s("td",null,[s("strong",null,d(r.total_length.toFixed(2)),1)])]))),128))]),s("tfoot",null,[s("tr",null,[e[126]||(e[126]=s("td",{colspan:"5",style:{"text-align":"right"}},[s("strong",null,"Ð’ÑÐµÐ³Ð¾:")],-1)),s("td",null,[s("strong",null,d(n.length_linear.toFixed(2))+" Ð¼",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(B,{class:"mt-4"},{default:o(()=>[a(P,{cols:"12",md:"6"},{default:o(()=>[s("div",Ia,[s("div",null,[e[128]||(e[128]=u("ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚ Ð¾Ñ‚Ñ…Ð¾Ð´Ð¾Ð²: ",-1)),s("strong",null,d((Number(n.waste_coeff)||1).toFixed(2)),1)]),s("div",Ha,[e[129]||(e[129]=u("Ð Ð°ÑÑ‡Ñ‘Ñ‚: ",-1)),s("strong",null,d(n.length_linear.toFixed(2))+" Ã— "+d((Number(n.waste_coeff)||1).toFixed(2))+" = "+d(n.length_with_waste.toFixed(2))+" Ð¼",1)]),e[130]||(e[130]=s("div",{class:"text-caption",style:{color:"#666","margin-top":"12px","line-height":"1.5"}},[s("strong",null,"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:"),u(' ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Ðº Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñƒ Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÐºÑ€Ð¾Ð¼ÐºÐ¾Ð¾Ð±Ð»Ð¸Ñ†Ð¾Ð²ÐºÐ¸. Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ "ÐšÑ€Ð¾Ð¼ÐºÐ¾Ð¾Ð±Ð»Ð¸Ñ†Ð¾Ð²ÐºÐ°" Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð° Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ ÑÑ‚Ð¾Ð³Ð¾ Ð¶Ðµ ÐºÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ð°. ')],-1))])]),_:2},1024)]),_:2},1024)]),_:2},1024)],8,Ba)])]),_:1},8,["items"])):V("",!0),a(S,{class:"my-4"}),a(M,null,{default:o(()=>[e[131]||(e[131]=u(" ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ ",-1)),a(R),s("div",Ja,"Ð˜Ñ‚Ð¾Ð³Ð¾: "+d(Al.value.toFixed(2))+" â‚½",1)]),_:1}),a(h,{"prepend-icon":"mdi-plus",onClick:Ml,class:"mb-2"},{default:o(()=>[...e[132]||(e[132]=[u("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ",-1)])]),_:1}),F.value.operations?(m(),v(de,{key:6,type:"table"})):(m(),v(me,{key:7,expanded:[at.value],items:Se.value,headers:Fl,density:"comfortable","show-expand":"","item-value":"id","onClick:row":e[19]||(e[19]=(t,{item:n,expand:r})=>{r&&(at.value.value=at.value.value===n.id?null:n.id)})},{"item.quantity_display":o(({item:t})=>[u(d((typeof t.quantity=="number"?t.quantity:parseFloat(t.quantity||0)).toFixed(2)),1)]),"item.name":o(({item:t})=>[s("div",Ga,[s("span",null,d(t.name),1),t.is_manual?V("",!0):(m(),v(j,{key:0,size:"18",color:"blue"},{default:o(()=>[...e[133]||(e[133]=[u("mdi-robot",-1)])]),_:1}))])]),"item.cost_per_unit":o(({item:t})=>[s("div",Ka,d(parseFloat(t.cost_per_unit||0).toFixed(2))+" â‚½",1)]),"item.total_cost":o(({item:t})=>[u(d(parseFloat(t.total_cost).toFixed(2))+" â‚½ ",1)]),"item.source":o(({item:t})=>[a(K,{size:"small",color:t.is_manual?"primary":"success",variant:"flat"},{default:o(()=>[u(d(t.is_manual?"Ð ÑƒÑ‡Ð½Ð°Ñ":"ÐÐ²Ñ‚Ð¾"),1)]),_:2},1032,["color"])]),"item.actions":o(({item:t})=>[t.is_manual?(m(),v(j,{key:0,onClick:n=>Ll(t),class:"me-2",color:"primary"},{default:o(()=>[...e[134]||(e[134]=[u(" mdi-pencil ",-1)])]),_:1},8,["onClick"])):V("",!0),t.is_manual?(m(),v(j,{key:1,onClick:n=>Tl(t),color:"error",icon:"mdi-delete"},null,8,["onClick"])):V("",!0)]),"expanded-row":o(({columns:t,item:n})=>[s("tr",null,[s("td",{colspan:t.length,class:"pa-4",style:{"background-color":"#f5f5f5"}},[a(Ie,{class:"pa-0"},{default:o(()=>[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[s("div",Ya,[s("strong",null,'Ð Ð°ÑÑ‡Ñ‘Ñ‚ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ "'+d(n.name)+'":',1)])]),_:2},1024)]),_:2},1024),U(n).type==="edging"?(m(),w(H,{key:0},[a(B,null,{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[a(Fe,{class:"border-table"},{default:o(()=>[e[136]||(e[136]=s("thead",null,[s("tr",null,[s("th",null,"ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ / ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»"),s("th",{style:{"text-align":"right"}},"Ð”Ð»Ð¸Ð½Ð° (Ð¼)")])],-1)),s("tbody",null,[(m(!0),w(H,null,xe(U(n).details,r=>(m(),w("tr",{key:`${r.position_name}-${r.material_name}`},[s("td",null,[s("div",null,d(r.position_name),1),s("div",Xa,d(r.material_name),1)]),s("td",Za,d(r.length.toFixed(2)),1)]))),128))]),s("tfoot",null,[s("tr",null,[e[135]||(e[135]=s("td",null,[s("strong",null,"Ð˜Ñ‚Ð¾Ð³Ð¾:")],-1)),s("td",eo,[s("strong",null,d(U(n).total_length.toFixed(2))+" Ð¼",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(B,{class:"mt-3"},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[s("div",to,[s("div",null,[e[137]||(e[137]=u("ÐšÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°: ",-1)),s("strong",null,d((Number(U(n).waste_coeff)||1).toFixed(2)),1)]),s("div",lo,[e[138]||(e[138]=u("Ðš Ð¾Ð¿Ð»Ð°Ñ‚Ðµ: ",-1)),s("strong",null,d(U(n).total_with_waste.toFixed(2))+" Ð¼.Ð¿.",1)]),s("div",ao," ("+d(U(n).total_length.toFixed(2))+" Ã— "+d((Number(U(n).waste_coeff)||1).toFixed(2))+" = "+d(U(n).total_with_waste.toFixed(2))+" Ð¼.Ð¿.) ",1)])]),_:2},1024)]),_:2},1024)],64)):U(n).type==="sawing"?(m(),v(B,{key:1},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[s("div",oo,d(U(n).note),1),a(Fe,{class:"border-table"},{default:o(()=>[e[140]||(e[140]=s("thead",null,[s("tr",null,[s("th",null,"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»"),s("th",{style:{"text-align":"right"}},"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ (Ð¼Â²)")])],-1)),s("tbody",null,[(m(!0),w(H,null,xe(U(n).details,r=>(m(),w("tr",{key:r.material_name},[s("td",null,d(r.material_name),1),s("td",so,d(r.area.toFixed(2)),1)]))),128))]),s("tfoot",null,[s("tr",null,[e[139]||(e[139]=s("td",null,[s("strong",null,"Ð˜Ñ‚Ð¾Ð³Ð¾:")],-1)),s("td",no,[s("strong",null,d(U(n).total_area.toFixed(2))+" Ð¼Â²",1)])])])]),_:2},1024)]),_:2},1024)]),_:2},1024)):U(n).type==="drilling"?(m(),v(B,{key:2},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[U(n).details&&U(n).details.length>0?(m(),v(Fe,{key:0,class:"border-table"},{default:o(()=>[e[142]||(e[142]=s("thead",null,[s("tr",null,[s("th",null,"Ð¢Ð¸Ð¿ Ð´ÐµÑ‚Ð°Ð»Ð¸"),s("th",{style:{"text-align":"right"}},"ÐžÑ‚Ð²ÐµÑ€ÑÑ‚Ð¸Ð¹ Ð½Ð° Ð´ÐµÑ‚Ð°Ð»ÑŒ"),s("th",{style:{"text-align":"right"}},"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹"),s("th",{style:{"text-align":"right"}},"Ð’ÑÐµÐ³Ð¾ Ð¾Ñ‚Ð²ÐµÑ€ÑÑ‚Ð¸Ð¹")])],-1)),s("tbody",null,[(m(!0),w(H,null,xe(U(n).details,r=>(m(),w("tr",{key:r.detail_type_name},[s("td",null,d(r.detail_type_name),1),s("td",io,d(r.holes_per_piece),1),s("td",ro,d(r.quantity),1),s("td",uo,d(r.total_holes),1)]))),128))]),s("tfoot",null,[s("tr",null,[e[141]||(e[141]=s("td",{colspan:"3"},[s("strong",null,"Ð˜Ñ‚Ð¾Ð³Ð¾:")],-1)),s("td",mo,[s("strong",null,d(U(n).total_holes)+" ÑˆÑ‚",1)])])])]),_:2},1024)):(m(),v(Je,{key:1,type:"info",variant:"tonal"},{default:o(()=>[u(d(U(n).message),1)]),_:2},1024))]),_:2},1024)]),_:2},1024)):(m(),v(B,{key:3},{default:o(()=>[a(P,{cols:"12"},{default:o(()=>[a(Je,{type:"info",variant:"tonal"},{default:o(()=>[u(d(U(n).message),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:2},1024)],8,Qa)])]),_:1},8,["expanded","items"])),a(S,{class:"my-4"}),a(M,null,{default:o(()=>[...e[143]||(e[143]=[u("Ð¤ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ð°",-1)])]),_:1}),a(h,{"prepend-icon":"mdi-plus",onClick:ul},{default:o(()=>[...e[144]||(e[144]=[u("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ñƒ",-1)])]),_:1}),F.value.fittings?(m(),v(de,{key:8,type:"table",class:"mt-3"})):(m(),v(me,{key:9,items:mt.value,headers:It},{"item.actions":o(({item:t})=>[a(j,{onClick:ie(n=>dl(t),["stop"]),class:"me-2"},{default:o(()=>[...e[145]||(e[145]=[u("mdi-pencil",-1)])]),_:1},8,["onClick"]),a(j,{onClick:ie(n=>pl(t),["stop"])},{default:o(()=>[...e[146]||(e[146]=[u("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["items"])),a(S,{class:"my-4"}),a(M,null,{default:o(()=>[e[147]||(e[147]=u(" ÐÐ¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÐ¼Ñ‹Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ",-1)),a(R),s("div",po,"Ð˜Ñ‚Ð¾Ð³Ð¾: "+d((typeof Dt.value=="number"?Dt.value:0).toFixed(2))+" â‚½",1)]),_:1}),Ve.value?(m(),v(Je,{key:10,type:"warning",variant:"tonal",class:"mb-3",closable:""},{default:o(()=>[...e[148]||(e[148]=[s("strong",null,"âš  ÐÐµ Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð¸ Ð¸Ð¼ÐµÑŽÑ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ ÑÑ‚Ð°Ð²ÐºÐ¸",-1),u(' â€” Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ "ÐŸÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ð²ÐºÐ¸" Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° Ð¸Ð»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ. ',-1)])]),_:1})):V("",!0),a(h,{"prepend-icon":"mdi-plus",onClick:Pl,class:"mb-3"},{default:o(()=>[...e[149]||(e[149]=[u("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ",-1)])]),_:1}),a(h,{"prepend-icon":"mdi-refresh",onClick:El,class:"mb-3 ms-3",variant:"outlined",loading:Oe.value,disabled:Oe.value},{default:o(()=>[...e[150]||(e[150]=[u(" ÐŸÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ð²ÐºÐ¸ ",-1)])]),_:1},8,["loading","disabled"]),a(h,{"prepend-icon":Ce.value?"mdi-lock":"mdi-lock-open",onClick:Sl,class:"mb-3 ms-3",variant:"outlined",color:Ce.value?"success":"warning",loading:We.value,disabled:We.value},{default:o(()=>[u(d(Ce.value?"Ð¡Ñ‚Ð°Ð²ÐºÐ¸ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹":"Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ð²ÐºÐ¸"),1)]),_:1},8,["prepend-icon","color","loading","disabled"]),Ce.value?(m(),v(K,{key:11,color:"success","text-color":"white","prepend-icon":"mdi-check-circle",class:"mb-3 ms-3"},{default:o(()=>[...e[151]||(e[151]=[u(" Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð° ",-1)])]),_:1})):(m(),v(K,{key:12,color:"warning","text-color":"white","prepend-icon":"mdi-alert-circle",class:"mb-3 ms-3"},{default:o(()=>[...e[152]||(e[152]=[u(" ÐÐµ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð° ",-1)])]),_:1})),F.value.laborWorks?(m(),v(de,{key:13,type:"table"})):(m(),v(me,{key:14,items:Z.value,headers:Ul,density:"comfortable","item-value":"id",class:"mb-4"},{"item.basis":o(({item:t})=>[u(d(t.basis||"â€”"),1)]),"item.hours":o(({item:t})=>[u(d(typeof t.hours=="number"?t.hours.toFixed(2):parseFloat(t.hours||0).toFixed(2)),1)]),"item.rate":o(({item:t})=>[s("div",co,d((parseFloat(t.rate_per_hour)||0).toFixed(2))+" â‚½/Ñ‡",1)]),"item.cost":o(({item:t})=>[s("div",{style:Lt([{"text-align":"right",width:"120px"},{color:(parseFloat(t.cost_total)||0)===0&&(i.value.normohour_rate||0)>0?"#666":"inherit"}])},[s("strong",null,d((parseFloat(t.cost_total)||0).toFixed(2))+" â‚½",1)],4)]),"item.actions":o(({item:t})=>[a(ut,{text:"Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ"},{activator:o(({props:n})=>[a(j,qt(n,{onClick:r=>Wl(t),class:"me-2",color:"info",size:"small"}),{default:o(()=>[...e[153]||(e[153]=[u(" mdi-clipboard-list ",-1)])]),_:1},16,["onClick"])]),_:2},1024),a(j,{onClick:n=>zl(t),class:"me-2",color:"primary",size:"small"},{default:o(()=>[...e[154]||(e[154]=[u(" mdi-pencil ",-1)])]),_:1},8,["onClick"]),a(j,{onClick:n=>Ol(t),color:"error",size:"small"},{default:o(()=>[...e[155]||(e[155]=[u(" mdi-delete ",-1)])]),_:1},8,["onClick"])]),"no-data":o(()=>[...e[156]||(e[156]=[s("div",{class:"text-center py-8 text-grey"}," ÐœÐ¾Ð½Ñ‚Ð°Ð¶Ð½Ð¾-ÑÐ±Ð¾Ñ€Ð¾Ñ‡Ð½Ñ‹Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ ",-1)])]),_:1},8,["items"])),a(S,{class:"my-4"}),a(M,null,{default:o(()=>[e[157]||(e[157]=u("ÐÐ°ÐºÐ»Ð°Ð´Ð½Ñ‹Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹ ",-1)),s("div",_o,"Ð˜Ñ‚Ð¾Ð³Ð¾: "+d((Array.isArray(le.value)?le.value.reduce((t,n)=>t+(parseFloat(n.amount)||0),0):0).toFixed(2))+" â‚½",1)]),_:1}),s("div",vo,[a(h,{"prepend-icon":"mdi-plus",onClick:kl},{default:o(()=>[...e[158]||(e[158]=[u("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð°ÑÑ…Ð¾Ð´",-1)])]),_:1})]),F.value.expenses?(m(),v(de,{key:15,type:"table"})):(m(),v(me,{key:16,items:le.value,headers:Kt},{"item.amount":o(({item:t})=>[u(d(Number(t.amount||0).toFixed(2))+" â‚½ ",1)]),"item.actions":o(({item:t})=>[a(j,{onClick:ie(n=>hl(t),["stop"]),class:"me-2"},{default:o(()=>[...e[159]||(e[159]=[u("mdi-pencil",-1)])]),_:1},8,["onClick"]),a(j,{onClick:ie(n=>Cl(t),["stop"])},{default:o(()=>[...e[160]||(e[160]=[u("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["items"])),a(S,{class:"my-4"}),a(h,{color:"secondary",onClick:xl,loading:Ae.value,disabled:Ae.value},{default:o(()=>[...e[161]||(e[161]=[u("Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ PDF",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),a(re,{modelValue:_e.value,"onUpdate:modelValue":e[30]||(e[30]=t=>_e.value=t),"max-width":"700"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Me.value?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ":"ÐÐ¾Ð²Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ"),1)]),_:1}),a(G,null,{default:o(()=>[a(He,{ref_key:"positionForm",ref:ft},{default:o(()=>[a(te,{modelValue:b.value.detail_type_id,"onUpdate:modelValue":[e[21]||(e[21]=t=>b.value.detail_type_id=t),Yt],items:Y.value,"item-title":"name","item-value":"id",label:"Ð¢Ð¸Ð¿ Ð´ÐµÑ‚Ð°Ð»Ð¸",clearable:"",density:"comfortable",class:"mb-3"},{"append-inner":o(()=>[a(h,{icon:"mdi-plus",size:"x-small",variant:"tonal",color:"primary",onClick:ie(Il,["stop"]),title:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ð´ÐµÑ‚Ð°Ð»Ð¸"})]),"append-item":o(()=>[a($e,{onClick:e[20]||(e[20]=t=>l.$router.push("/detail-types"))},{default:o(()=>[a(Tt,null,{default:o(()=>[...e[162]||(e[162]=[u("Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð¸Ð¿Ð°Ð¼Ð¸",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","items"]),a(te,{modelValue:b.value.material_id,"onUpdate:modelValue":[e[22]||(e[22]=t=>b.value.material_id=t),el],items:Wt.value,"item-title":"name","item-value":"id",label:"ÐŸÐ»Ð¸Ñ‚Ð½Ñ‹Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»",rules:[t=>!!t||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"],density:"comfortable",class:"mb-3"},{item:o(({props:t,item:n})=>[a($e,Re(Be(t)),{default:o(()=>[n.raw.origin==="parser"?(m(),v(Ge,{key:0,class:"text-blue"},{default:o(()=>[...e[163]||(e[163]=[u(" Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ (ÑÐ¿Ð°Ñ€ÑÐµÐ½Ð¾) ",-1)])]),_:1})):(m(),v(Ge,{key:1,class:"text-grey"},{default:o(()=>[...e[164]||(e[164]=[u(" ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ",-1)])]),_:1}))]),_:2},1040)]),_:1},8,["modelValue","items","rules"]),a(B,null,{default:o(()=>[a(P,{cols:"6"},{default:o(()=>[a(y,{modelValue:b.value.width,"onUpdate:modelValue":e[23]||(e[23]=t=>b.value.width=t),modelModifiers:{number:!0},label:"Ð¨Ð¸Ñ€Ð¸Ð½Ð°, Ð¼Ð¼",type:"number",rules:[t=>t>0||"Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ > 0"],density:"comfortable"},null,8,["modelValue","rules"])]),_:1}),a(P,{cols:"6"},{default:o(()=>[a(y,{modelValue:b.value.length,"onUpdate:modelValue":e[24]||(e[24]=t=>b.value.length=t),modelModifiers:{number:!0},label:"Ð”Ð»Ð¸Ð½Ð°, Ð¼Ð¼",type:"number",rules:[t=>t>0||"Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ > 0"],density:"comfortable"},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(y,{modelValue:b.value.quantity,"onUpdate:modelValue":e[25]||(e[25]=t=>b.value.quantity=t),modelModifiers:{number:!0},label:"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾",type:"number",min:1,rules:[t=>t>=1||"ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 1"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(te,{modelValue:b.value.edge_scheme,"onUpdate:modelValue":[e[26]||(e[26]=t=>b.value.edge_scheme=t),tl],items:vt,"item-title":"label","item-value":"value",label:"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚Ð¾Ñ€Ñ†Ð¾Ð²",disabled:!!b.value.detail_type_id,density:"comfortable",class:"mb-3"},{selection:o(({item:t})=>[a(K,{size:"small"},{default:o(()=>[a(j,{start:"",size:"16"},{default:o(()=>[u(d(t.raw.icon),1)]),_:2},1024),u(" "+d(t.raw.label),1)]),_:2},1024)]),item:o(({props:t,item:n})=>[a($e,Re(Be(t)),{prepend:o(()=>[a(j,null,{default:o(()=>[u(d(n.raw.icon),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","disabled"]),b.value.edge_scheme&&b.value.edge_scheme!=="none"?(m(),v(te,{key:0,modelValue:b.value.edge_material_id,"onUpdate:modelValue":[e[27]||(e[27]=t=>b.value.edge_material_id=t),ll],items:Rt.value,"item-title":"name","item-value":"id",label:"ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð» ÐºÑ€Ð¾Ð¼ÐºÐ¸",rules:[t=>!!t||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"],density:"comfortable",class:"mb-3"},null,8,["modelValue","items","rules"])):V("",!0),a(y,{modelValue:b.value.custom_name,"onUpdate:modelValue":e[28]||(e[28]=t=>b.value.custom_name=t),label:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð´ÐµÑ‚Ð°Ð»Ð¸ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",hint:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Â«ÐŸÐ¾Ð»ÐºÐ° Ð»ÐµÐ²Ð°ÑÂ»","persistent-hint":"",density:"comfortable"},null,8,["modelValue"])]),_:1},512)]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:e[29]||(e[29]=t=>_e.value=!1)},{default:o(()=>[...e[165]||(e[165]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:nl},{default:o(()=>[...e[166]||(e[166]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:ve.value,"onUpdate:modelValue":e[38]||(e[38]=t=>ve.value=t),"max-width":"600"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(qe.value?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ñƒ":"ÐÐ¾Ð²Ð°Ñ Ñ„ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ð°"),1)]),_:1}),a(G,null,{default:o(()=>[a(y,{modelValue:$.value.name,"onUpdate:modelValue":e[31]||(e[31]=t=>$.value.name=t),label:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ",required:""},null,8,["modelValue"]),a(y,{modelValue:$.value.article,"onUpdate:modelValue":e[32]||(e[32]=t=>$.value.article=t),label:"ÐÑ€Ñ‚Ð¸ÐºÑƒÐ» (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)"},null,8,["modelValue"]),a(te,{modelValue:$.value.unit,"onUpdate:modelValue":e[33]||(e[33]=t=>$.value.unit=t),items:ke.value,label:"Ð•Ð´. Ð¸Ð·Ð¼.",rules:[t=>!!t||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"],density:"comfortable",class:"mb-3",clearable:""},null,8,["modelValue","items","rules"]),a(y,{modelValue:$.value.quantity,"onUpdate:modelValue":e[34]||(e[34]=t=>$.value.quantity=t),modelModifiers:{number:!0},label:"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾",type:"number"},null,8,["modelValue"]),a(y,{modelValue:$.value.unit_price,"onUpdate:modelValue":e[35]||(e[35]=t=>$.value.unit_price=t),modelModifiers:{number:!0},label:"Ð¦ÐµÐ½Ð° Ð·Ð° ÑˆÑ‚, â‚½",type:"number"},null,8,["modelValue"]),a(pe,{modelValue:$.value.note,"onUpdate:modelValue":e[36]||(e[36]=t=>$.value.note=t),label:"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:e[37]||(e[37]=t=>ve.value=!1)},{default:o(()=>[...e[167]||(e[167]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:ml},{default:o(()=>[...e[168]||(e[168]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:fe.value,"onUpdate:modelValue":e[43]||(e[43]=t=>fe.value=t),"max-width":"600"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Le.value?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð°ÑÑ…Ð¾Ð´":"ÐÐ¾Ð²Ñ‹Ð¹ Ñ€Ð°ÑÑ…Ð¾Ð´"),1)]),_:1}),a(G,null,{default:o(()=>[a(y,{modelValue:O.value.name,"onUpdate:modelValue":e[39]||(e[39]=t=>O.value.name=t),label:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð”Ð¾ÑÑ‚Ð°Ð²ÐºÐ°, ÐœÐ¾Ð½Ñ‚Ð°Ð¶, ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ",required:"",class:"mb-3"},null,8,["modelValue"]),a(pe,{modelValue:O.value.description,"onUpdate:modelValue":e[40]||(e[40]=t=>O.value.description=t),label:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",placeholder:"Ð”ÐµÑ‚Ð°Ð»Ð¸ Ñ€Ð°ÑÑ…Ð¾Ð´Ð°",rows:"3",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:O.value.amount,"onUpdate:modelValue":e[41]||(e[41]=t=>O.value.amount=t),modelModifiers:{number:!0},label:"Ð¡ÑƒÐ¼Ð¼Ð°, â‚½",type:"number",step:"0.01",min:"0"},null,8,["modelValue"])]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:e[42]||(e[42]=t=>fe.value=!1)},{default:o(()=>[...e[169]||(e[169]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:Vl},{default:o(()=>[...e[170]||(e[170]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:Ye.value,"onUpdate:modelValue":e[47]||(e[47]=t=>Ye.value=t),"max-width":"700"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[e[171]||(e[171]=u(" ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÐºÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ð° ",-1)),ae.value?(m(),w("span",fo," ("+d(ae.value==="plate"?"ÐŸÐ»Ð¸Ñ‚Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹":ae.value==="edge"?"ÐšÑ€Ð¾Ð¼ÐºÐ°":"ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸")+") ",1)):V("",!0)]),_:1}),a(G,{class:"mt-4"},{default:o(()=>[a(y,{modelValue:A.value.title,"onUpdate:modelValue":e[44]||(e[44]=t=>A.value.title=t),label:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ",variant:"outlined",density:"compact",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐœÐµÑ‚Ð¾Ð´Ð¸ÐºÐ° Ñ€Ð°ÑÑ‡Ñ‘Ñ‚Ð°, ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ, Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ",counter:"100",maxlength:"100",class:"mb-3"},null,8,["modelValue"]),a(pe,{modelValue:A.value.text,"onUpdate:modelValue":e[45]||(e[45]=t=>A.value.text=t),label:"Ð¢ÐµÐºÑÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ",variant:"outlined",rows:"4",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚ÐµÐºÑÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ (Ð¼Ð°ÐºÑÐ¸Ð¼ÑƒÐ¼ 3000 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð², HTML ÑƒÐ´Ð°Ð»ÑÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸)",counter:"3000",maxlength:"3000",onInput:e[46]||(e[46]=t=>A.value.text=Q(A.value.text)),onPaste:yl,class:"mb-2"},null,8,["modelValue"]),A.value.text.length>0?(m(),w("div",go," Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ð¾Ð²: "+d(A.value.text.length)+"/3000 ",1)):V("",!0)]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:ht},{default:o(()=>[...e[172]||(e[172]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:gl},{default:o(()=>[...e[173]||(e[173]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:Xe.value,"onUpdate:modelValue":e[55]||(e[55]=t=>Xe.value=t),"max-width":"700"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Ze.value?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº":"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº ÑÑ‚Ð°Ð²ÐºÐ¸"),1)]),_:1}),a(G,{class:"mt-4"},{default:o(()=>[a(y,{modelValue:x.value.source,"onUpdate:modelValue":e[48]||(e[48]=t=>x.value.source=t),label:"Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº *",variant:"outlined",density:"compact",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: hh.ru, Avito, Ð˜Ð½Ð´ÐµÐºÑ Ð·Ð°Ñ€Ð¿Ð»Ð°Ñ‚, ÐžÐ¿Ñ€Ð¾Ñ Ð¿Ð¾Ð´Ñ€ÑÐ´Ñ‡Ð¸ÐºÐ¾Ð²",counter:"255",maxlength:"255",error:!!I.value.source,"error-messages":I.value.source?[I.value.source]:[],class:"mb-3"},null,8,["modelValue","error","error-messages"]),a(y,{modelValue:x.value.position_profile,"onUpdate:modelValue":e[49]||(e[49]=t=>x.value.position_profile=t),label:"ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ Ð´Ð¾Ð»Ð¶Ð½Ð¾ÑÑ‚Ð¸",variant:"outlined",density:"compact",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð¡Ð±Ð¾Ñ€Ñ‰Ð¸Ðº Ð¼ÐµÐ±ÐµÐ»Ð¸, ÐŸÐ»Ð¾Ñ‚Ð½Ð¸Ðº ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ 3, ÐœÐ¾Ð½Ñ‚Ð°Ð¶Ð½Ð¸Ðº",counter:"255",maxlength:"255",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:x.value.salary_range,"onUpdate:modelValue":e[50]||(e[50]=t=>x.value.salary_range=t),label:"Ð—Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ð°/Ð²Ð¸Ð»ÐºÐ°",variant:"outlined",density:"compact",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: 1000-1200 â‚½/Ñ‡ Ð¸Ð»Ð¸ 75000-85000 â‚½/Ð¼ÐµÑÑÑ†",counter:"255",maxlength:"255",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:x.value.period,"onUpdate:modelValue":e[51]||(e[51]=t=>x.value.period=t),label:"ÐŸÐµÑ€Ð¸Ð¾Ð´",variant:"outlined",density:"compact",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÑÐ½Ð²Ð°Ñ€Ñ 2026, ÐºÐ²Ð°Ñ€Ñ‚Ð°Ð» 4 2025",counter:"50",maxlength:"50",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:x.value.link,"onUpdate:modelValue":e[52]||(e[52]=t=>x.value.link=t),label:"Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº",variant:"outlined",density:"compact",placeholder:"https://hh.ru/...",counter:"1000",maxlength:"1000",onBlur:e[53]||(e[53]=t=>x.value.link=x.value.link?x.value.link.trim():null),error:!!I.value.link,"error-messages":I.value.link?[I.value.link]:[],class:"mb-3"},null,8,["modelValue","error","error-messages"]),a(pe,{modelValue:x.value.note,"onUpdate:modelValue":e[54]||(e[54]=t=>x.value.note=t),label:"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ",variant:"outlined",rows:"2",placeholder:"Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐµ",counter:"1000",maxlength:"1000",class:"mb-2"},null,8,["modelValue"]),x.value.note?(m(),w("div",yo," Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ð¾Ð²: "+d(x.value.note.length)+"/1000 ",1)):V("",!0),e[174]||(e[174]=s("div",{class:"text-caption text-orange"}," * â€” Ð¿Ð¾Ð»Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ",-1))]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:Ct},{default:o(()=>[...e[175]||(e[175]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:wl},{default:o(()=>[...e[176]||(e[176]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(re,{modelValue:ge.value,"onUpdate:modelValue":e[60]||(e[60]=t=>ge.value=t),"max-width":"600"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(Pe.value?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ":"ÐÐ¾Ð²Ð°Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ"),1)]),_:1}),a(G,null,{default:o(()=>[a(te,{modelValue:W.value.operation_id,"onUpdate:modelValue":e[56]||(e[56]=t=>W.value.operation_id=t),items:Ft.value,"item-title":"name","item-value":"id",label:"ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ñ",rules:[t=>!!t||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"],density:"comfortable","return-object":"",class:"mb-3"},{item:o(({props:t,item:n})=>[a($e,Re(Be(t)),{default:o(()=>[a(Ge,null,{default:o(()=>[u(d(n.raw.category),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","rules"]),a(y,{modelValue:W.value.quantity,"onUpdate:modelValue":e[57]||(e[57]=t=>W.value.quantity=t),modelModifiers:{number:!0},label:"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾",type:"number",min:"0.01",step:"0.01",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:W.value.note,"onUpdate:modelValue":e[58]||(e[58]=t=>W.value.note=t),label:"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",density:"comfortable"},null,8,["modelValue"])]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:e[59]||(e[59]=t=>ge.value=!1)},{default:o(()=>[...e[177]||(e[177]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:ql},{default:o(()=>[...e[178]||(e[178]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:ye.value,"onUpdate:modelValue":e[67]||(e[67]=t=>ye.value=t),"max-width":"600"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(d(ee.value?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ":"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ"),1)]),_:1}),a(G,null,{default:o(()=>[a(He,{ref_key:"laborWorkFormRef",ref:Ut,onSubmit:ie(jt,["prevent"])},{default:o(()=>[a(y,{modelValue:D.value.title,"onUpdate:modelValue":e[61]||(e[61]=t=>D.value.title=t),label:"ÐÐ°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹",rules:[t=>!!t||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾",t=>t&&t.length<=255||"ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 255 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(y,{modelValue:D.value.basis,"onUpdate:modelValue":e[62]||(e[62]=t=>D.value.basis=t),label:"ÐžÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ (Ð“ÐžÐ¡Ð¢/Ð¢Ð£)",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð¿. 5.2.4 Ð“ÐžÐ¡Ð¢ 16371-2014",rules:[t=>!t||t.length<=500||"ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 500 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(y,{modelValue:D.value.hours,"onUpdate:modelValue":e[63]||(e[63]=t=>D.value.hours=t),modelModifiers:{number:!0},label:"ÐÐ¾Ñ€Ð¼Ð°, Ñ‡",type:"number",min:"0",step:"0.25",readonly:ee.value&&ee.value.hours_source==="from_steps",rules:[t=>t!=null&&t!==""||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾",t=>t>=0||"ÐÐµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŒÑˆÐµ 0",t=>t<=999.99||"ÐÐµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 999.99"],density:"comfortable",class:"mb-3"},Kl({_:2},[ee.value&&ee.value.hours_source==="from_steps"?{name:"hint",fn:o(()=>[e[179]||(e[179]=u(' âš ï¸ ÐŸÐ¾Ð»Ðµ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¾. Ð§Ð°ÑÑ‹ Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð¸Ð· Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹. ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¸Ñ… Ð² "Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸". ',-1))]),key:"0"}:void 0]),1032,["modelValue","readonly","rules"]),a(ta,{modelValue:D.value.position_profile_id,"onUpdate:modelValue":e[64]||(e[64]=t=>D.value.position_profile_id=t),label:"ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ Ð´Ð¾Ð»Ð¶Ð½Ð¾ÑÑ‚Ð¸ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",items:$t.value,"item-title":"name","item-value":"id",placeholder:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ Ð´Ð»Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° ÑÑ‚Ð°Ð²ÐºÐ¸...",density:"comfortable",class:"mb-3",clearable:""},null,8,["modelValue","items"]),a(pe,{modelValue:D.value.note,"onUpdate:modelValue":e[65]||(e[65]=t=>D.value.note=t),label:"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",placeholder:"Ð§Ñ‚Ð¾ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ, Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ...",rules:[t=>!t||t.length<=5e3||"ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 5000 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"],rows:"3",density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),D.value.hours?(m(),v(Je,{key:0,type:"info",variant:"tonal",class:"mb-3"},{default:o(()=>[i.value.normohour_rate?(m(),w("div",bo,[e[180]||(e[180]=s("strong",null,"ÐŸÑ€Ð¸Ð±Ð»Ð¸Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°:",-1)),u(" "+d((D.value.hours*(i.value.normohour_rate||0)).toFixed(2))+" â‚½ ",1),s("div",wo," ("+d(D.value.hours.toFixed(2))+" Ñ‡ Ã— "+d((i.value.normohour_rate||0).toFixed(2))+" â‚½/Ñ‡) ",1),e[181]||(e[181]=s("div",{class:"text-caption mt-2",style:{"font-style":"italic"}}," * Ð Ð°ÑÑ‡ÐµÑ‚ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ. Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑƒÐ¼Ð¼Ð° Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ ",-1))])):(m(),w("div",xo," Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑƒÐ¼Ð¼Ð° Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð° Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ ÑÑ‚Ð°Ð²Ð¾Ðº "))]),_:1})):V("",!0)]),_:1},512)]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:e[66]||(e[66]=t=>ye.value=!1)},{default:o(()=>[...e[182]||(e[182]=[u("ÐžÑ‚Ð¼ÐµÐ½Ð°",-1)])]),_:1}),a(h,{color:"primary",onClick:jt,loading:ot.value},{default:o(()=>[...e[183]||(e[183]=[u("Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(re,{modelValue:ze.value,"onUpdate:modelValue":e[74]||(e[74]=t=>ze.value=t),"max-width":"700"},{default:o(()=>[a(J,null,{default:o(()=>[a(M,null,{default:o(()=>[u(" ðŸ“‹ Ð”ÐµÑ‚Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ: "+d(be.value?.title),1)]),_:1}),a(G,{class:"pa-4"},{default:o(()=>[we.value.length>0?(m(),w("div",ko,[a(la,null,{default:o(()=>[(m(!0),w(H,null,xe(we.value,(t,n)=>(m(),v($e,{key:t.id,class:"mb-2"},{prepend:o(()=>[a(K,{size:"small",variant:"outlined"},{default:o(()=>[u(d(n+1),1)]),_:2},1024)]),append:o(()=>[s("div",Co,[s("div",Fo,d(t.hours.toFixed(2))+"Ñ‡",1),a(j,{onClick:r=>Bl(t),size:"small",color:"error"},{default:o(()=>[...e[184]||(e[184]=[u(" mdi-delete ",-1)])]),_:1},8,["onClick"])])]),default:o(()=>[a(Tt,null,{default:o(()=>[u(d(t.title),1)]),_:2},1024),t.basis||t.input_data?(m(),v(Ge,{key:0},{default:o(()=>[t.input_data?(m(),w("div",ho,"ðŸ“¦ "+d(t.input_data),1)):V("",!0),t.basis?(m(),w("div",Vo,"ðŸ“„ "+d(t.basis),1)):V("",!0)]),_:2},1024)):V("",!0)]),_:2},1024))),128))]),_:1})])):(m(),w("div",$o," ÐÐµÑ‚ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ ")),a(S,{class:"my-4"}),s("div",Uo,[e[185]||(e[185]=s("span",{class:"text-subtitle-1 font-weight-bold"},"Ð˜Ñ‚Ð¾Ð³Ð¾ Ñ‡Ð°ÑÐ¾Ð²:",-1)),a(K,{color:"primary","text-color":"white",size:"large"},{default:o(()=>[u(d($l.value.toFixed(2))+" Ñ‡ ",1)]),_:1})]),a(He,{onSubmit:ie(Rl,["prevent"]),class:"mt-4"},{default:o(()=>[a(S,{class:"mb-4"}),a(rt,null,{default:o(()=>[...e[186]||(e[186]=[u("Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ",-1)])]),_:1}),a(y,{modelValue:N.value.title,"onUpdate:modelValue":e[68]||(e[68]=t=>N.value.title=t),label:"ÐÐ°Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²ÐºÐ° Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°",rules:[t=>!!t||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(y,{modelValue:N.value.basis,"onUpdate:modelValue":e[69]||(e[69]=t=>N.value.basis=t),label:"ÐžÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð¿. 3.1",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:N.value.input_data,"onUpdate:modelValue":e[70]||(e[70]=t=>N.value.input_data=t),label:"Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: 1 Ñ…Ð¾Ð»Ð¾Ð´Ð¸Ð»ÑŒÐ½Ð¸Ðº, 6 Ð¼Ð¾Ð´ÑƒÐ»ÐµÐ¹",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(y,{modelValue:N.value.hours,"onUpdate:modelValue":e[71]||(e[71]=t=>N.value.hours=t),modelModifiers:{number:!0},label:"Ð§Ð°ÑÑ‹ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ ÑÑ‚Ð°Ð¿Ð°",type:"number",min:"0",step:"0.25",rules:[t=>t!=null&&t!==""||"ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾",t=>t>=0||"ÐÐµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŒÑˆÐµ 0"],density:"comfortable",class:"mb-3"},null,8,["modelValue","rules"]),a(pe,{modelValue:N.value.note,"onUpdate:modelValue":e[72]||(e[72]=t=>N.value.note=t),label:"ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",rows:"2",density:"comfortable",class:"mb-3"},null,8,["modelValue"]),a(h,{type:"submit",color:"success","prepend-icon":"mdi-plus",block:"",loading:st.value},{default:o(()=>[...e[187]||(e[187]=[u(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),a(ue,null,{default:o(()=>[a(R),a(h,{onClick:e[73]||(e[73]=t=>ze.value=!1)},{default:o(()=>[...e[188]||(e[188]=[u("Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ql,{modelValue:ce.value.show,"onUpdate:modelValue":e[75]||(e[75]=t=>ce.value.show=t),timeout:ce.value.timeout,color:ce.value.color,location:"bottom right"},{default:o(()=>[u(d(ce.value.message),1)]),_:1},8,["modelValue","timeout","color"])],64))}}),Ao=St(Do,[["__scopeId","data-v-ba0cb2c7"]]);export{Ao as default};
