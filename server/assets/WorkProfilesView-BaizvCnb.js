import{W as Ie,r,d as D,X as Se,$ as m,z as i,G as a,D as t,aY as n,a2 as u,C as R,a0 as I,a1 as ne,a3 as re,F as d}from"./vendor-Cpjz-SYi.js";import{Y as Te,Z as Me,x as N,d as c,$ as ue,q as g,a0 as de,c as v,h as f,j as y,b as _,o as Z,e as ve,m as S,k as me,g as w,i as T,p as pe,s as qe,a as fe,a1 as Fe,a2 as ce,V as We,C as _e,w as O,_ as he}from"./index-DvMw0XIj.js";const Be={class:"work-profiles-view"},Ae={class:"section-header"},Ne={class:"text-h6"},Oe={class:"text-h6"},Le={class:"text-h6"},Ge={class:"text-h6"},Ye={key:0},je={key:1,class:"text-grey"},Ee={class:"font-weight-medium"},He={key:0,class:"text-caption text-grey"},Qe={key:0},Xe={key:1,class:"text-grey"},Ze={class:"font-weight-medium"},Je={class:"font-weight-medium"},Ke={key:1,class:"text-grey"},el=["title"],ll={key:1,class:"text-grey"},al={class:"d-flex gap-2"},tl={class:"text-center py-8"},ol={class:"mb-4"},sl={class:"section-header"},il={class:"font-weight-medium"},nl=["title"],rl={key:1,class:"text-grey"},ul={class:"d-flex gap-2"},dl={class:"text-center py-8"},vl=Ie({__name:"WorkProfilesView",setup(ml){const V=r([]),J=r([]),L=r([]),G=r([]),x=r(!1),C=r(!1),Y=r(!1),j=r(!1),k=r(null),M=r(""),q=r(null),E=r(!0),F=r(null),K=r(),W=r("sources"),b=r(!1),P=r(!1),H=r(!1),Q=r(!1),U=r(null),$=r(null),ee=r(),p=r({name:"",description:"",sort_order:0}),s=r({region_id:null,position_profile_id:null,source:"",type:"single",salary_value:null,salary_value_min:null,salary_value_max:null,hours_per_month:160,source_date:new Date().toISOString().split("T")[0],link:"",note:"",is_active:!0}),ye=[{title:"Регион",key:"region_name",width:"120px"},{title:"Источник",key:"source",width:"150px"},{title:"Профиль должности",key:"position_profile_name",width:"150px"},{title:"Зарплата",key:"salary_display",width:"140px"},{title:"Ставка/час",key:"rate_display",width:"120px"},{title:"Часы/мес",key:"hours_per_month",width:"100px",align:"center"},{title:"Ссылка",key:"link",width:"80px",align:"center",sortable:!1},{title:"Примечание",key:"note",width:"150px"},{title:"Статус",key:"is_active",width:"100px"},{title:"",key:"actions",width:"80px",sortable:!1}],ge=[{title:"Название",key:"name",width:"300px"},{title:"Описание",key:"description",width:"400px"},{title:"Порядок сортировки",key:"sort_order",width:"150px",align:"center"},{title:"",key:"actions",width:"80px",sortable:!1}],Ve=D(()=>new Set(V.value.map(o=>o.region_id))),xe=D(()=>new Set(V.value.filter(o=>o.position_profile_id).map(o=>o.position_profile_id))),le=D(()=>{if(s.value.type==="single"&&s.value.salary_value){const o=s.value.hours_per_month||160;return Math.round(s.value.salary_value/o)}return null}),ke=D(()=>{if(s.value.type==="range"&&s.value.salary_value_min){const o=s.value.hours_per_month||160;return Math.round(s.value.salary_value_min/o)}return null}),be=D(()=>{if(s.value.type==="range"&&s.value.salary_value_max){const o=s.value.hours_per_month||160;return Math.round(s.value.salary_value_max/o)}return null}),z=async()=>{try{const o=await c.get("/api/global-normohour-sources");V.value=o.data.data||[],h()}catch(o){console.error("Ошибка загрузки профилей работ:",o)}},we=async()=>{try{const o=await c.get("/api/regions");L.value=(o.data.data||o.data||[]).sort((e,l)=>(e.region_name||"").localeCompare(l.region_name||""))}catch(o){console.error("Ошибка загрузки регионов:",o)}},X=async()=>{try{const o=await c.get("/api/position-profiles");G.value=o.data.data||o.data||[]}catch(o){console.error("Ошибка загрузки профилей должностей:",o)}},h=()=>{let o=V.value;if(M.value){const e=M.value.toLowerCase();o=o.filter(l=>l.source.toLowerCase().includes(e)||l.note&&l.note.toLowerCase().includes(e))}q.value&&(o=o.filter(e=>e.region_id===q.value)),E.value&&(o=o.filter(e=>e.is_active)),J.value=o},ae=()=>{s.value.type==="single"?(s.value.salary_value_min=null,s.value.salary_value_max=null):s.value.salary_value=null},B=()=>{},te=()=>{k.value=null,s.value={region_id:null,position_profile_id:null,source:"",type:"single",salary_value:null,salary_value_min:null,salary_value_max:null,hours_per_month:160,source_date:new Date().toISOString().split("T")[0],link:"",note:"",is_active:!0},x.value=!0},Ce=o=>{k.value=o.id,s.value={region_id:o.region_id,position_profile_id:o.position_profile_id||null,source:o.source,type:o.is_range?"range":"single",salary_value:o.is_range?null:o.salary_value||null,salary_value_min:o.is_range&&o.salary_value_min||null,salary_value_max:o.is_range&&o.salary_value_max||null,hours_per_month:o.hours_per_month||160,source_date:o.source_date||new Date().toISOString().split("T")[0],link:o.link||"",note:o.note||"",is_active:o.is_active},x.value=!0},oe=async()=>{if(K.value?.validate()){Y.value=!0;try{const o={region_id:s.value.region_id,position_profile_id:s.value.position_profile_id||null,source:s.value.source,type:s.value.type,salary_value:s.value.salary_value||null,salary_value_min:s.value.salary_value_min||null,salary_value_max:s.value.salary_value_max||null,hours_per_month:s.value.hours_per_month||160,source_date:s.value.source_date,link:s.value.link||null,note:s.value.note||null,is_active:s.value.is_active};k.value?await c.put(`/api/global-normohour-sources/${k.value}`,o):await c.post("/api/global-normohour-sources",o),x.value=!1,await z()}catch(o){console.error("Ошибка сохранения:",o),alert("Ошибка сохранения источника профиля работ")}finally{Y.value=!1}}},Pe=async o=>{try{await c.get(`/api/global-normohour-sources/${o.id}/toggle-active`),await z()}catch(e){console.error("Ошибка изменения активности:",e)}},Ue=o=>{F.value=o,C.value=!0},$e=async()=>{if(F.value){j.value=!0;try{await c.delete(`/api/global-normohour-sources/${F.value.id}`),C.value=!1,await z()}catch(o){console.error("Ошибка удаления:",o),alert("Ошибка удаления источника профиля работ")}finally{j.value=!1}}},se=()=>{U.value=null,p.value={name:"",description:"",sort_order:0},b.value=!0},ze=o=>{U.value=o.id,p.value={name:o.name,description:o.description||"",sort_order:o.sort_order||0},b.value=!0},ie=async()=>{if(ee.value?.validate()){H.value=!0;try{const o={name:p.value.name,description:p.value.description||null,sort_order:p.value.sort_order||0};U.value?await c.put(`/api/position-profiles/${U.value}`,o):await c.post("/api/position-profiles",o),b.value=!1,await X()}catch(o){console.error("Ошибка сохранения профиля должности:",o),alert("Ошибка сохранения профиля должности")}finally{H.value=!1}}},De=o=>{$.value=o,P.value=!0},Re=async()=>{if($.value){Q.value=!0;try{await c.delete(`/api/position-profiles/${$.value.id}`),P.value=!1,await X()}catch(o){console.error("Ошибка удаления профиля должности:",o),alert("Ошибка удаления профиля должности")}finally{Q.value=!1}}};return Se(async()=>{await z(),await we(),await X()}),(o,e)=>(d(),m("div",Be,[e[68]||(e[68]=i("div",{class:"page-header"},[i("div",null,[i("h1",{class:"page-title"},"Профили работ"),i("div",{class:"page-subtitle"},"Источники нормо-часов и профили должностей")])],-1)),a(Te,{modelValue:W.value,"onUpdate:modelValue":e[0]||(e[0]=l=>W.value=l),class:"page-tabs"},{default:t(()=>[a(ue,{value:"sources"},{default:t(()=>[a(g,{class:"mr-2"},{default:t(()=>[...e[28]||(e[28]=[n("mdi-chart-box-outline",-1)])]),_:1}),e[29]||(e[29]=n(" Источники нормо-часов ",-1))]),_:1}),a(ue,{value:"profiles"},{default:t(()=>[a(g,{class:"mr-2"},{default:t(()=>[...e[30]||(e[30]=[n("mdi-briefcase-outline",-1)])]),_:1}),e[31]||(e[31]=n(" Профили должностей ",-1))]),_:1})]),_:1},8,["modelValue"]),a(Me,{modelValue:W.value,"onUpdate:modelValue":e[20]||(e[20]=l=>W.value=l)},{default:t(()=>[a(de,{value:"sources"},{default:t(()=>[i("div",Ae,[e[33]||(e[33]=i("div",null,[i("h2",{class:"section-title"},"Источники нормо-часов"),i("div",{class:"section-subtitle"},"Управление источниками ставок и норм")],-1)),a(v,{class:"primary-btn",color:"primary","prepend-icon":"mdi-plus",onClick:te},{default:t(()=>[...e[32]||(e[32]=[n(" Добавить источник ",-1)])]),_:1})]),a(f,{class:"content-card filters-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(y,{class:"filters-row"},{default:t(()=>[a(_,{modelValue:M.value,"onUpdate:modelValue":e[1]||(e[1]=l=>M.value=l),placeholder:"Поиск по источнику...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"250px"},onInput:h},null,8,["modelValue"]),a(Z,{modelValue:q.value,"onUpdate:modelValue":[e[2]||(e[2]=l=>q.value=l),h],items:L.value,"item-title":"region_name","item-value":"id",placeholder:"Фильтр по регионам",variant:"outlined",density:"compact","hide-details":"",clearable:"",style:{"max-width":"250px"}},null,8,["modelValue","items"]),a(ve,{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=l=>E.value=l),label:"Только активные",density:"compact","hide-details":"",onChange:h},null,8,["modelValue"]),a(S),a(v,{icon:"",size:"small",variant:"text",onClick:z,title:"Обновить"},{default:t(()=>[a(g,null,{default:t(()=>[...e[34]||(e[34]=[n("mdi-refresh",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(me,{class:"stats-grid"},{default:t(()=>[a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{class:"content-card stat-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(y,null,{default:t(()=>[e[35]||(e[35]=i("div",{class:"text-caption text-grey"},"Всего источников",-1)),i("div",Ne,u(V.value.length),1)]),_:1})]),_:1})]),_:1}),a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{class:"content-card stat-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(y,null,{default:t(()=>[e[36]||(e[36]=i("div",{class:"text-caption text-grey"},"Активных",-1)),i("div",Oe,u(V.value.filter(l=>l.is_active).length),1)]),_:1})]),_:1})]),_:1}),a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{class:"content-card stat-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(y,null,{default:t(()=>[e[37]||(e[37]=i("div",{class:"text-caption text-grey"},"Регионов",-1)),i("div",Le,u(Ve.value.size),1)]),_:1})]),_:1})]),_:1}),a(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(f,{class:"content-card stat-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(y,null,{default:t(()=>[e[38]||(e[38]=i("div",{class:"text-caption text-grey"},"Профилей должностей",-1)),i("div",Ge,u(xe.value.size),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{class:"content-card data-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(T,{class:"section-card-title"},{default:t(()=>[...e[39]||(e[39]=[n("Источники нормо-часов",-1)])]),_:1}),a(pe,{items:J.value,headers:ye,"item-value":"id",density:"comfortable",class:"data-table","items-per-page":25},{"item.region_name":t(({item:l})=>[l.region_name?(d(),m("span",Ye,u(l.region_name),1)):(d(),m("span",je,"—"))]),"item.source":t(({item:l})=>[i("div",Ee,u(l.source),1),l.source_date_formatted?(d(),m("div",He,u(l.source_date_formatted),1)):I("",!0)]),"item.position_profile_name":t(({item:l})=>[l.position_profile_name?(d(),m("span",Qe,u(l.position_profile_name),1)):(d(),m("span",Xe,"—"))]),"item.salary_display":t(({item:l})=>[i("div",Ze,u(l.salary_display),1)]),"item.rate_display":t(({item:l})=>[i("div",Je,u(l.rate_display),1)]),"item.hours_per_month":t(({item:l})=>[n(u(l.hours_per_month),1)]),"item.link":t(({item:l})=>[l.link?(d(),R(v,{key:0,icon:"",size:"small",variant:"text",href:l.link,target:"_blank",title:"Открыть ссылку"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[40]||(e[40]=[n("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])):(d(),m("span",Ke,"—"))]),"item.note":t(({item:l})=>[l.note?(d(),m("span",{key:0,title:l.note,class:"text-truncate"},u(l.note),9,el)):(d(),m("span",ll,"—"))]),"item.is_active":t(({item:l})=>[a(qe,{color:l.is_active?"success":"grey",size:"small",onClick:A=>Pe(l),style:{cursor:"pointer"}},{default:t(()=>[n(u(l.is_active?"Активен":"Неактивен"),1)]),_:2},1032,["color","onClick"])]),"item.actions":t(({item:l})=>[i("div",al,[a(v,{icon:"",size:"small",variant:"text",color:"primary",onClick:A=>Ce(l),title:"Редактировать"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[41]||(e[41]=[n("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),a(v,{icon:"",size:"small",variant:"text",color:"error",onClick:A=>Ue(l),title:"Удалить"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[42]||(e[42]=[n("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]),"no-data":t(()=>[i("div",tl,[e[44]||(e[44]=i("div",{class:"text-grey mb-3"},"Источники не найдены",-1)),a(v,{color:"primary",variant:"text",onClick:te},{default:t(()=>[...e[43]||(e[43]=[n(" Добавить первый источник ",-1)])]),_:1})])]),_:2},1032,["items"])]),_:1}),a(N,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=l=>x.value=l),"max-width":"700",scrollable:""},{default:t(()=>[a(f,{class:"content-card dialog-card"},{default:t(()=>[a(T,null,{default:t(()=>[n(u(k.value?"Редактировать источник нормо-часов":"Новый источник нормо-часов"),1)]),_:1}),a(y,{class:"mt-4"},{default:t(()=>[a(fe,{ref_key:"formRef",ref:K,onSubmit:ne(oe,["prevent"])},{default:t(()=>[a(Z,{modelValue:s.value.region_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.region_id=l),items:L.value,"item-title":"region_name","item-value":"id",label:"Регион*",variant:"outlined",density:"compact",required:"",class:"mb-4",rules:[l=>!!l||"Регион обязателен"]},null,8,["modelValue","items","rules"]),a(Z,{modelValue:s.value.position_profile_id,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.position_profile_id=l),items:G.value,"item-title":"name","item-value":"id",label:"Профиль должности",variant:"outlined",density:"compact",clearable:"",class:"mb-4"},null,8,["modelValue","items"]),a(_,{modelValue:s.value.source,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.source=l),label:"Источник*",placeholder:"Например: hh.ru",variant:"outlined",density:"compact",required:"",class:"mb-4",rules:[l=>!!l||"Источник обязателен"]},null,8,["modelValue","rules"]),i("div",ol,[e[45]||(e[45]=i("label",{class:"text-subtitle-2 d-block mb-2"},"Тип ставки*",-1)),a(Fe,{modelValue:s.value.type,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.type=l),inline:"",required:""},{default:t(()=>[a(ce,{value:"single",label:"Одно значение",onChange:ae}),a(ce,{value:"range",label:"Диапазон (от - до)",onChange:ae})]),_:1},8,["modelValue"])]),s.value.type==="single"?(d(),R(_,{key:0,modelValue:s.value.salary_value,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.salary_value=l),modelModifiers:{number:!0},label:"Зарплата (₽)*",placeholder:"Например: 100000",variant:"outlined",density:"compact",type:"number",required:"",class:"mb-4",rules:[l=>!!l||"Зарплата обязательна",l=>l>0||"Зарплата должна быть больше 0"],onInput:B},null,8,["modelValue","rules"])):I("",!0),s.value.type==="range"?(d(),R(me,{key:1,class:"mb-4"},{default:t(()=>[a(w,{cols:"12",sm:"6"},{default:t(()=>[a(_,{modelValue:s.value.salary_value_min,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.salary_value_min=l),modelModifiers:{number:!0},label:"От (₽)*",placeholder:"Например: 100000",variant:"outlined",density:"compact",type:"number",required:"",rules:[l=>!!l||"Минимум обязателен",l=>l>0||"Должно быть больше 0"],onInput:B},null,8,["modelValue","rules"])]),_:1}),a(w,{cols:"12",sm:"6"},{default:t(()=>[a(_,{modelValue:s.value.salary_value_max,"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.salary_value_max=l),modelModifiers:{number:!0},label:"До (₽)*",placeholder:"Например: 150000",variant:"outlined",density:"compact",type:"number",required:"",rules:[l=>!!l||"Максимум обязателен",l=>l>0||"Должно быть больше 0"],onInput:B},null,8,["modelValue","rules"])]),_:1})]),_:1})):I("",!0),a(_,{modelValue:s.value.hours_per_month,"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.hours_per_month=l),modelModifiers:{number:!0},label:"Часы в месяц",placeholder:"160",variant:"outlined",density:"compact",type:"number",class:"mb-4",rules:[l=>!l||l>0||"Должно быть больше 0"],onInput:B},null,8,["modelValue","rules"]),le.value?(d(),R(We,{key:2,type:"info",class:"mb-4"},{default:t(()=>[s.value.type==="single"?(d(),m(re,{key:0},[e[46]||(e[46]=n(" Ставка в час: ",-1)),i("strong",null,u(le.value)+" ₽/ч",1)],64)):(d(),m(re,{key:1},[e[47]||(e[47]=n(" Ставка в час: ",-1)),i("strong",null,u(ke.value)+"–"+u(be.value)+" ₽/ч",1)],64))]),_:1})):I("",!0),a(_,{modelValue:s.value.source_date,"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.source_date=l),label:"Дата источника",type:"date",variant:"outlined",density:"compact",class:"mb-4"},null,8,["modelValue"]),a(_,{modelValue:s.value.link,"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.link=l),label:"Ссылка на источник",placeholder:"https://...",variant:"outlined",density:"compact",type:"url",class:"mb-4"},null,8,["modelValue"]),a(_e,{modelValue:s.value.note,"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.note=l),label:"Примечание",placeholder:"Дополнительная информация",variant:"outlined",density:"compact",rows:"2",class:"mb-4"},null,8,["modelValue"]),a(ve,{modelValue:s.value.is_active,"onUpdate:modelValue":e[15]||(e[15]=l=>s.value.is_active=l),label:"Активен",class:"mb-4"},null,8,["modelValue"])]),_:1},512)]),_:1}),a(O,null,{default:t(()=>[a(S),a(v,{onClick:e[16]||(e[16]=l=>x.value=!1)},{default:t(()=>[...e[48]||(e[48]=[n("Отмена",-1)])]),_:1}),a(v,{color:"primary",loading:Y.value,onClick:oe},{default:t(()=>[n(u(k.value?"Сохранить":"Добавить"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(N,{modelValue:C.value,"onUpdate:modelValue":e[19]||(e[19]=l=>C.value=l),"max-width":"400"},{default:t(()=>[a(f,{class:"content-card dialog-card"},{default:t(()=>[a(T,null,{default:t(()=>[...e[49]||(e[49]=[n("Удалить источник?",-1)])]),_:1}),a(y,{class:"mt-4"},{default:t(()=>[i("p",null,[e[50]||(e[50]=n("Вы уверены, что хотите удалить источник ",-1)),i("strong",null,u(F.value?.source),1),e[51]||(e[51]=n("?",-1))]),e[52]||(e[52]=i("p",{class:"text-caption text-grey mt-3"},"Это действие нельзя отменить.",-1))]),_:1}),a(O,null,{default:t(()=>[a(S),a(v,{onClick:e[18]||(e[18]=l=>C.value=!1)},{default:t(()=>[...e[53]||(e[53]=[n("Отмена",-1)])]),_:1}),a(v,{color:"error",loading:j.value,onClick:$e},{default:t(()=>[...e[54]||(e[54]=[n(" Удалить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(de,{value:"profiles"},{default:t(()=>[i("div",sl,[e[56]||(e[56]=i("div",null,[i("h2",{class:"section-title"},"Профили должностей"),i("div",{class:"section-subtitle"},"Справочник должностей для расчётов")],-1)),a(v,{class:"primary-btn",color:"primary","prepend-icon":"mdi-plus",onClick:se},{default:t(()=>[...e[55]||(e[55]=[n(" Добавить профиль ",-1)])]),_:1})]),a(f,{class:"content-card data-card",elevation:"0",variant:"outlined"},{default:t(()=>[a(pe,{items:G.value,headers:ge,"item-value":"id",density:"comfortable","items-per-page":25,class:"data-table"},{"item.name":t(({item:l})=>[i("div",il,u(l.name),1)]),"item.description":t(({item:l})=>[l.description?(d(),m("span",{key:0,title:l.description,class:"text-truncate"},u(l.description),9,nl)):(d(),m("span",rl,"—"))]),"item.sort_order":t(({item:l})=>[n(u(l.sort_order),1)]),"item.actions":t(({item:l})=>[i("div",ul,[a(v,{icon:"",size:"small",variant:"text",color:"primary",onClick:A=>ze(l),title:"Редактировать"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[57]||(e[57]=[n("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),a(v,{icon:"",size:"small",variant:"text",color:"error",onClick:A=>De(l),title:"Удалить"},{default:t(()=>[a(g,{size:"small"},{default:t(()=>[...e[58]||(e[58]=[n("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]),"no-data":t(()=>[i("div",dl,[e[60]||(e[60]=i("div",{class:"text-grey mb-3"},"Профили должностей не найдены",-1)),a(v,{color:"primary",variant:"text",onClick:se},{default:t(()=>[...e[59]||(e[59]=[n(" Добавить первый профиль ",-1)])]),_:1})])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(N,{modelValue:b.value,"onUpdate:modelValue":e[25]||(e[25]=l=>b.value=l),"max-width":"500"},{default:t(()=>[a(f,{class:"content-card dialog-card"},{default:t(()=>[a(T,null,{default:t(()=>[n(u(U.value?"Редактировать профиль должности":"Новый профиль должности"),1)]),_:1}),a(y,{class:"mt-4"},{default:t(()=>[a(fe,{ref_key:"profileFormRef",ref:ee,onSubmit:ne(ie,["prevent"])},{default:t(()=>[a(_,{modelValue:p.value.name,"onUpdate:modelValue":e[21]||(e[21]=l=>p.value.name=l),label:"Название профиля*",placeholder:"Например: Сборщик мебели",variant:"outlined",density:"compact",required:"",class:"mb-4",rules:[l=>!!l||"Название обязательно"]},null,8,["modelValue","rules"]),a(_e,{modelValue:p.value.description,"onUpdate:modelValue":e[22]||(e[22]=l=>p.value.description=l),label:"Описание",placeholder:"Дополнительная информация о профиле",variant:"outlined",density:"compact",rows:"3",class:"mb-4"},null,8,["modelValue"]),a(_,{modelValue:p.value.sort_order,"onUpdate:modelValue":e[23]||(e[23]=l=>p.value.sort_order=l),modelModifiers:{number:!0},label:"Порядок сортировки",type:"number",variant:"outlined",density:"compact",class:"mb-4",rules:[l=>l>=0||"Значение должно быть >= 0"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),a(O,{class:"pt-0"},{default:t(()=>[a(S),a(v,{color:"grey",variant:"text",onClick:e[24]||(e[24]=l=>b.value=!1)},{default:t(()=>[...e[61]||(e[61]=[n(" Отмена ",-1)])]),_:1}),a(v,{color:"primary",variant:"elevated",loading:H.value,onClick:ie},{default:t(()=>[...e[62]||(e[62]=[n(" Сохранить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(N,{modelValue:P.value,"onUpdate:modelValue":e[27]||(e[27]=l=>P.value=l),"max-width":"400"},{default:t(()=>[a(f,{class:"content-card dialog-card"},{default:t(()=>[a(T,null,{default:t(()=>[...e[63]||(e[63]=[n("Удалить профиль должности?",-1)])]),_:1}),$.value?(d(),R(y,{key:0,class:"pt-4"},{default:t(()=>[e[64]||(e[64]=n(" Вы уверены, что хотите удалить профиль ",-1)),i("strong",null,u($.value.name),1),e[65]||(e[65]=n("? Это действие нельзя отменить. ",-1))]),_:1})):I("",!0),a(O,{class:"pt-0"},{default:t(()=>[a(S),a(v,{color:"grey",variant:"text",onClick:e[26]||(e[26]=l=>P.value=!1)},{default:t(()=>[...e[66]||(e[66]=[n(" Отмена ",-1)])]),_:1}),a(v,{color:"error",variant:"elevated",loading:Q.value,onClick:Re},{default:t(()=>[...e[67]||(e[67]=[n(" Удалить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),cl=he(vl,[["__scopeId","data-v-00087eb5"]]);export{cl as default};
